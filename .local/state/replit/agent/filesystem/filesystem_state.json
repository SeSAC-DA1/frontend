{"file_contents":{"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"crewai>=0.186.1\",\n    \"fastapi>=0.116.1\",\n    \"google-genai>=1.37.0\",\n    \"numpy>=2.3.3\",\n    \"openai>=1.107.2\",\n    \"pandas>=2.3.2\",\n    \"psycopg2-binary>=2.9.10\",\n    \"pydantic>=2.11.9\",\n    \"python-multipart>=0.0.20\",\n    \"scikit-learn>=1.7.2\",\n    \"sqlalchemy>=2.0.43\",\n    \"trafilatura>=2.0.0\",\n    \"uvicorn>=0.35.0\",\n]\n","size_bytes":472},"simple_main.py":{"content":"\"\"\"\nSimplified CarFin FastAPI Backend for testing\n\"\"\"\nimport os\nimport pandas as pd\nimport uuid\nimport hashlib\nfrom typing import Dict, List, Any, Optional\nfrom fastapi import FastAPI, HTTPException\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom pydantic import BaseModel, Field\nimport logging\n\n# Configure logging\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\n# Initialize FastAPI app\napp = FastAPI(\n    title=\"CarFin AI\",\n    description=\"CrewAI ë©€í‹°ì—ì´ì „íŠ¸ ì°¨ëŸ‰ ì¶”ì²œ ë° ê¸ˆìœµ ìƒë‹´ ì‹œìŠ¤í…œ\",\n    version=\"1.0.0\"\n)\n\n# Add CORS middleware\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\n# Pydantic models\nclass UserRequest(BaseModel):\n    message: str = Field(..., description=\"ì‚¬ìš©ìì˜ ì°¨ëŸ‰ ì¶”ì²œ ìš”ì²­ ë©”ì‹œì§€\")\n    user_id: Optional[str] = Field(None, description=\"ì‚¬ìš©ì ID (ì„ íƒì )\")\n\nclass CarSelection(BaseModel):\n    car_id: str = Field(..., description=\"ì„ íƒëœ ì°¨ëŸ‰ ID\")\n    user_budget: int = Field(..., description=\"ì‚¬ìš©ì ì˜ˆì‚° (ë§Œì› ë‹¨ìœ„)\")\n\n# Enhanced models for 3-agent system\nclass UserRegistration(BaseModel):\n    full_name: str = Field(..., description=\"ì‚¬ìš©ì ì „ì²´ ì´ë¦„\")\n    email: str = Field(..., description=\"ì´ë©”ì¼ ì£¼ì†Œ\")\n    age: int = Field(..., description=\"ë‚˜ì´\")\n    phone: Optional[str] = Field(None, description=\"ì „í™”ë²ˆí˜¸ (ì„ íƒì )\")\n\nclass UserPreferences(BaseModel):\n    user_id: str = Field(..., description=\"ì‚¬ìš©ì ID\")\n    budget_min: Optional[int] = Field(None, description=\"ìµœì†Œ ì˜ˆì‚° (ë§Œì›)\")\n    budget_max: Optional[int] = Field(None, description=\"ìµœëŒ€ ì˜ˆì‚° (ë§Œì›)\")\n    fuel_type: Optional[str] = Field(None, description=\"ì—°ë£Œ íƒ€ì…\")\n    category: Optional[str] = Field(None, description=\"ì°¨ëŸ‰ ì¹´í…Œê³ ë¦¬\")\n    transmission: Optional[str] = Field(None, description=\"ë³€ì†ê¸° íƒ€ì…\")\n    family_size: Optional[int] = Field(None, description=\"ê°€ì¡± êµ¬ì„±ì› ìˆ˜\")\n    usage_purpose: Optional[str] = Field(None, description=\"ì‚¬ìš© ëª©ì \")\n\nclass ChatMessage(BaseModel):\n    user_id: str = Field(..., description=\"ì‚¬ìš©ì ID\")\n    message: str = Field(..., description=\"ì±„íŒ… ë©”ì‹œì§€\")\n    context: Optional[Dict[str, Any]] = Field(None, description=\"ëŒ€í™” ì»¨í…ìŠ¤íŠ¸\")\n\nclass FullConsultationRequest(BaseModel):\n    message: str = Field(..., description=\"ì‚¬ìš©ì ì¢…í•©ìƒë‹´ ìš”ì²­ ë©”ì‹œì§€\")\n    user_id: Optional[str] = Field(None, description=\"ì‚¬ìš©ì ID (ì„ íƒì )\")\n    include_finance: bool = Field(False, description=\"ê¸ˆìœµ ìƒë‹´ í¬í•¨ ì—¬ë¶€\")\n\nclass DashboardRequest(BaseModel):\n    user_id: str = Field(..., description=\"ì‚¬ìš©ì ID\")\n    refresh_data: bool = Field(False, description=\"ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì—¬ë¶€\")\n\n# Global agent system - lazy load\n_carfin_agents = None\n\n# In-memory storage for demo (would use database in production)\nusers_db = {}  # user_id -> user_data\npreferences_db = {}  # user_id -> preferences\nconversations_db = {}  # user_id -> conversation_history\n\ndef get_agents():\n    global _carfin_agents\n    if _carfin_agents is None:\n        try:\n            from agents.crew_setup import carfin_agents\n            _carfin_agents = carfin_agents\n            logger.info(\"Agents loaded successfully\")\n        except Exception as e:\n            logger.error(f\"Failed to load agents: {e}\")\n            raise\n    return _carfin_agents\n\n@app.get(\"/\")\nasync def root():\n    \"\"\"Health check endpoint\"\"\"\n    return {\n        \"message\": \"CarFin AI Backend is running\",\n        \"status\": \"healthy\",\n        \"version\": \"1.0.0\"\n    }\n\n@app.get(\"/health\")\nasync def health_check():\n    \"\"\"Detailed health check\"\"\"\n    try:\n        agents = get_agents()\n        agents_status = \"initialized\" if agents.recommendation_engine else \"error\"\n        \n        return {\n            \"status\": \"healthy\",\n            \"agents\": agents_status,\n            \"database\": \"connected\" if agents.recommendation_engine.engine else \"disconnected\"\n        }\n    except Exception as e:\n        return {\n            \"status\": \"unhealthy\",\n            \"error\": str(e)\n        }\n\n@app.post(\"/api/recommend\")\nasync def get_car_recommendation(request: UserRequest):\n    \"\"\"Get personalized car recommendations\"\"\"\n    try:\n        logger.info(f\"Processing recommendation request: {request.message[:50]}...\")\n        \n        agents = get_agents()\n        result = agents.get_vehicle_recommendations(request.message)\n        \n        if result[\"status\"] == \"error\":\n            raise HTTPException(status_code=500, detail=result[\"message\"])\n        \n        return result\n        \n    except Exception as e:\n        logger.error(f\"Recommendation request failed: {e}\")\n        raise HTTPException(\n            status_code=500, \n            detail=f\"ì°¨ëŸ‰ ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\"\n        )\n\n@app.post(\"/api/finance\")\nasync def get_finance_options(selection: CarSelection):\n    \"\"\"Get finance consultation for selected car\"\"\"\n    try:\n        logger.info(f\"Processing finance consultation for car {selection.car_id}\")\n        \n        agents = get_agents()\n        result = agents.get_finance_consultation(\n            selection.car_id, \n            selection.user_budget\n        )\n        \n        if result[\"status\"] == \"error\":\n            raise HTTPException(status_code=500, detail=result[\"message\"])\n        \n        return result\n        \n    except Exception as e:\n        logger.error(f\"Finance consultation failed: {e}\")\n        raise HTTPException(\n            status_code=500,\n            detail=f\"ê¸ˆìœµ ìƒë‹´ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\"\n        )\n\n# NEW: 3-Agent System Endpoints\n\n@app.post(\"/api/consultation/full\")\nasync def run_full_consultation(request: FullConsultationRequest):\n    \"\"\"Run complete 3-agent consultation workflow\"\"\"\n    try:\n        logger.info(f\"Starting full consultation: {request.message[:50]}...\")\n        \n        agents = get_agents()\n        result = agents.run_full_consultation(request.message)\n        \n        if result[\"status\"] == \"error\":\n            raise HTTPException(status_code=500, detail=result[\"message\"])\n        \n        # Store result for dashboard (in production, save to database)\n        if request.user_id:\n            conversations_db[request.user_id] = {\n                \"last_consultation\": result,\n                \"timestamp\": \"2025-09-16T08:59:00Z\"\n            }\n        \n        return {\n            **result,\n            \"timestamp\": \"2025-09-16T08:59:00Z\",\n            \"consultation_id\": f\"consult_{hash(request.message) % 10000}\"\n        }\n        \n    except Exception as e:\n        logger.error(f\"Full consultation failed: {e}\")\n        raise HTTPException(\n            status_code=500,\n            detail=f\"ì¢…í•© ìƒë‹´ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\"\n        )\n\n@app.get(\"/api/dashboard/{user_id}\")\nasync def get_user_dashboard(user_id: str, refresh_data: bool = False):\n    \"\"\"Get user dashboard with insights and recommendations\"\"\"\n    try:\n        logger.info(f\"Loading dashboard for user {user_id}\")\n        \n        # Get user data\n        user_data = users_db.get(user_id, {})\n        preferences = preferences_db.get(user_id, {})\n        conversation_history = conversations_db.get(user_id, {})\n        \n        # Get agents for market insights\n        agents = get_agents()\n        \n        # Get market insights if refresh requested or no cache\n        market_insights = \"ì‹œì¥ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...\"\n        if refresh_data or not conversation_history.get(\"last_consultation\"):\n            try:\n                # Get basic market insights\n                if hasattr(agents.recommendation_engine, 'car_data'):\n                    df = agents.recommendation_engine.car_data\n                    if df is not None and len(df) > 0:\n                        market_insights = f\"\"\"\n                        ğŸ“Š ì°¨ëŸ‰ ì‹œì¥ í˜„í™©:\n                        - ì´ {len(df)}ëŒ€ ì°¨ëŸ‰ ë°ì´í„° ë³´ìœ \n                        - í‰ê·  ê°€ê²©: {df['price'].mean():.0f}ë§Œì›\n                        - ê°€ê²© ë²”ìœ„: {df['price'].min():.0f} - {df['price'].max():.0f}ë§Œì›\n                        - ì¸ê¸° ì¹´í…Œê³ ë¦¬: {df['category'].value_counts().head(3).to_dict() if 'category' in df else 'N/A'}\n                        \"\"\"\n            except Exception as e:\n                market_insights = f\"ì‹œì¥ ë°ì´í„° ë¶„ì„ ì¤‘ ì˜¤ë¥˜: {str(e)}\"\n        \n        dashboard_data = {\n            \"user_id\": user_id,\n            \"user_profile\": user_data,\n            \"preferences\": preferences,\n            \"market_insights\": market_insights,\n            \"last_consultation\": conversation_history.get(\"last_consultation\"),\n            \"summary\": {\n                \"total_consultations\": 1 if conversation_history.get(\"last_consultation\") else 0,\n                \"agents_available\": 3,\n                \"system_status\": \"ì •ìƒ ì‘ë™\",\n                \"llm_provider\": conversation_history.get(\"last_consultation\", {}).get(\"llm_provider\", \"gemini/openai\")\n            },\n            \"quick_actions\": [\n                {\"action\": \"new_consultation\", \"label\": \"ìƒˆë¡œìš´ ì°¨ëŸ‰ ìƒë‹´\"},\n                {\"action\": \"view_recommendations\", \"label\": \"ì¶”ì²œ ì°¨ëŸ‰ ë³´ê¸°\"},\n                {\"action\": \"finance_calculator\", \"label\": \"ê¸ˆìœµ ê³„ì‚°ê¸°\"},\n                {\"action\": \"update_preferences\", \"label\": \"ì„ í˜¸ë„ ìˆ˜ì •\"}\n            ]\n        }\n        \n        return dashboard_data\n        \n    except Exception as e:\n        logger.error(f\"Dashboard loading failed: {e}\")\n        raise HTTPException(\n            status_code=500,\n            detail=f\"ëŒ€ì‹œë³´ë“œ ë¡œë”© ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\"\n        )\n\n@app.get(\"/api/agents/status\")\nasync def get_agents_status():\n    \"\"\"Get status of all 3 agents\"\"\"\n    try:\n        agents = get_agents()\n        \n        status = {\n            \"total_agents\": 3,\n            \"agents\": {\n                \"data_analyst\": {\n                    \"name\": \"ë°ì´í„° ë¶„ì„ ë° ì˜ì‚¬ê²°ì • ì§€ì› ì „ë¬¸ê°€\",\n                    \"status\": \"active\" if agents.data_analyst_agent else \"inactive\",\n                    \"role\": \"ì‹œì¥ ë¶„ì„, ì‚¬ìš©ì í”„ë¡œí•„ ë¶„ì„, ì˜ì‚¬ê²°ì • ì§€ì›\"\n                },\n                \"vehicle_expert\": {\n                    \"name\": \"ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€\", \n                    \"status\": \"active\" if agents.vehicle_agent else \"inactive\",\n                    \"role\": \"PyCaret ML ê¸°ë°˜ ì°¨ëŸ‰ ì¶”ì²œ\"\n                },\n                \"finance_advisor\": {\n                    \"name\": \"ê¸ˆìœµ ìƒë‹´ ì „ë¬¸ê°€\",\n                    \"status\": \"active\" if agents.finance_agent else \"inactive\", \n                    \"role\": \"ëŒ€ì¶œ, ë¦¬ìŠ¤, í• ë¶€ ê¸ˆìœµ ì˜µì…˜ ê³„ì‚°\"\n                }\n            },\n            \"ml_engine\": {\n                \"status\": \"active\" if hasattr(agents.recommendation_engine, 'car_data') else \"inactive\",\n                \"data_loaded\": agents.recommendation_engine.car_data is not None if hasattr(agents.recommendation_engine, 'car_data') else False\n            },\n            \"llm_providers\": {\n                \"openai\": \"available\",\n                \"gemini\": \"available\" \n            }\n        }\n        \n        return status\n        \n    except Exception as e:\n        logger.error(f\"Agent status check failed: {e}\")\n        raise HTTPException(\n            status_code=500,\n            detail=f\"ì—ì´ì „íŠ¸ ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\"\n        )\n\n@app.get(\"/api/cars/{car_id}\")\nasync def get_car_details(car_id: int):\n    \"\"\"Get detailed information about a specific car\"\"\"\n    try:\n        agents = get_agents()\n        car_details = agents.recommendation_engine.get_car_details(car_id)\n        \n        if not car_details:\n            raise HTTPException(status_code=404, detail=\"ì°¨ëŸ‰ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\")\n        \n        return {\n            \"status\": \"success\",\n            \"car\": car_details\n        }\n        \n    except HTTPException:\n        raise\n    except Exception as e:\n        logger.error(f\"Failed to get car details: {e}\")\n        raise HTTPException(status_code=500, detail=\"ì°¨ëŸ‰ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤\")\n\n# New API endpoints for chatbot integration\n\n@app.post(\"/api/users/register\")\nasync def register_user(user_data: UserRegistration):\n    \"\"\"Register a new user for the chatbot system\"\"\"\n    try:\n        # Generate user ID\n        user_id = str(uuid.uuid4())\n        \n        # Check if email already exists\n        for existing_user in users_db.values():\n            if existing_user.get('email') == user_data.email:\n                raise HTTPException(status_code=400, detail=\"ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤\")\n        \n        # Store user data\n        users_db[user_id] = {\n            \"user_id\": user_id,\n            \"full_name\": user_data.full_name,\n            \"email\": user_data.email,\n            \"age\": user_data.age,\n            \"phone\": user_data.phone,\n            \"created_at\": pd.Timestamp.now().isoformat()\n        }\n        \n        logger.info(f\"New user registered: {user_data.full_name} ({user_id})\")\n        \n        return {\n            \"status\": \"success\",\n            \"message\": \"íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤\",\n            \"user_id\": user_id,\n            \"user_data\": users_db[user_id]\n        }\n        \n    except HTTPException:\n        raise\n    except Exception as e:\n        logger.error(f\"User registration failed: {e}\")\n        raise HTTPException(status_code=500, detail=\"íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤\")\n\n@app.post(\"/api/users/{user_id}/preferences\")\nasync def save_user_preferences(user_id: str, preferences: UserPreferences):\n    \"\"\"Save user preferences for vehicle recommendations\"\"\"\n    try:\n        # Verify user exists\n        if user_id not in users_db:\n            raise HTTPException(status_code=404, detail=\"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\")\n        \n        # Store preferences\n        preferences_db[user_id] = {\n            \"user_id\": user_id,\n            \"budget_min\": preferences.budget_min,\n            \"budget_max\": preferences.budget_max,\n            \"fuel_type\": preferences.fuel_type,\n            \"category\": preferences.category,\n            \"transmission\": preferences.transmission,\n            \"family_size\": preferences.family_size,\n            \"usage_purpose\": preferences.usage_purpose,\n            \"updated_at\": pd.Timestamp.now().isoformat()\n        }\n        \n        logger.info(f\"Preferences saved for user {user_id}\")\n        \n        return {\n            \"status\": \"success\",\n            \"message\": \"ì„ í˜¸ë„ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤\",\n            \"preferences\": preferences_db[user_id]\n        }\n        \n    except HTTPException:\n        raise\n    except Exception as e:\n        logger.error(f\"Failed to save preferences: {e}\")\n        raise HTTPException(status_code=500, detail=\"ì„ í˜¸ë„ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤\")\n\n@app.get(\"/api/users/{user_id}\")\nasync def get_user_info(user_id: str):\n    \"\"\"Get user information\"\"\"\n    try:\n        if user_id not in users_db:\n            raise HTTPException(status_code=404, detail=\"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\")\n        \n        user_data = users_db[user_id]\n        preferences = preferences_db.get(user_id, {})\n        \n        return {\n            \"status\": \"success\",\n            \"user\": user_data,\n            \"preferences\": preferences\n        }\n        \n    except HTTPException:\n        raise\n    except Exception as e:\n        logger.error(f\"Failed to get user info: {e}\")\n        raise HTTPException(status_code=500, detail=\"ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤\")\n\n@app.post(\"/api/chat\")\nasync def chat_consultation(chat_request: ChatMessage):\n    \"\"\"Real-time chat consultation with AI agents\"\"\"\n    try:\n        user_id = chat_request.user_id\n        message = chat_request.message\n        \n        # Verify user exists\n        if user_id not in users_db:\n            raise HTTPException(status_code=404, detail=\"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\")\n        \n        # Get user data and preferences\n        user_data = users_db[user_id]\n        preferences = preferences_db.get(user_id, {})\n        \n        # Initialize conversation history if not exists\n        if user_id not in conversations_db:\n            conversations_db[user_id] = []\n        \n        # Add user message to conversation history\n        conversations_db[user_id].append({\n            \"role\": \"user\",\n            \"message\": message,\n            \"timestamp\": pd.Timestamp.now().isoformat()\n        })\n        \n        # Create comprehensive context for AI agents\n        context_message = f\"\"\"\n        ì‚¬ìš©ì ì •ë³´:\n        - ì´ë¦„: {user_data['full_name']}\n        - ë‚˜ì´: {user_data['age']}ì„¸\n        \n        ì„ í˜¸ë„ ì •ë³´:\n        - ì˜ˆì‚°: {preferences.get('budget_min', 'ë¯¸ì§€ì •')}ë§Œì› ~ {preferences.get('budget_max', 'ë¯¸ì§€ì •')}ë§Œì›\n        - ì—°ë£Œíƒ€ì…: {preferences.get('fuel_type', 'ë¯¸ì§€ì •')}\n        - ì°¨ëŸ‰ì¹´í…Œê³ ë¦¬: {preferences.get('category', 'ë¯¸ì§€ì •')}\n        - ê°€ì¡±êµ¬ì„±ì›: {preferences.get('family_size', 'ë¯¸ì§€ì •')}ëª…\n        - ì‚¬ìš©ëª©ì : {preferences.get('usage_purpose', 'ë¯¸ì§€ì •')}\n        \n        ì‚¬ìš©ì ë©”ì‹œì§€: {message}\n        \n        ìœ„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë§ì¶¤í˜• ìƒë‹´ì„ ì œê³µí•´ì£¼ì„¸ìš”.\n        \"\"\"\n        \n        # Get AI agent response\n        agents = get_agents()\n        ai_response = agents.get_vehicle_recommendations(context_message)\n        \n        # Add AI response to conversation history\n        conversations_db[user_id].append({\n            \"role\": \"assistant\",\n            \"message\": ai_response.get('agent_response', ''),\n            \"timestamp\": pd.Timestamp.now().isoformat(),\n            \"ml_data\": ai_response.get('ml_recommendations', [])\n        })\n        \n        logger.info(f\"Chat consultation completed for user {user_id}\")\n        \n        return {\n            \"status\": \"success\",\n            \"response\": ai_response.get('agent_response', ''),\n            \"ml_recommendations\": ai_response.get('ml_recommendations', []),\n            \"conversation_id\": len(conversations_db[user_id])\n        }\n        \n    except HTTPException:\n        raise\n    except Exception as e:\n        logger.error(f\"Chat consultation failed: {e}\")\n        raise HTTPException(status_code=500, detail=\"AI ìƒë‹´ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤\")\n\n@app.get(\"/api/users/{user_id}/conversations\")\nasync def get_conversation_history(user_id: str):\n    \"\"\"Get conversation history for a user\"\"\"\n    try:\n        if user_id not in users_db:\n            raise HTTPException(status_code=404, detail=\"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\")\n        \n        conversations = conversations_db.get(user_id, [])\n        \n        return {\n            \"status\": \"success\",\n            \"conversations\": conversations,\n            \"total\": len(conversations)\n        }\n        \n    except HTTPException:\n        raise\n    except Exception as e:\n        logger.error(f\"Failed to get conversations: {e}\")\n        raise HTTPException(status_code=500, detail=\"ëŒ€í™” ê¸°ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤\")\n\nif __name__ == \"__main__\":\n    import uvicorn\n    \n    # Backend runs on port 8000, frontend on 5000 for Replit webview\n    port = int(os.environ.get(\"PORT\", 8000))\n    \n    logger.info(f\"Starting CarFin AI server on port {port}\")\n    \n    uvicorn.run(\n        \"simple_main:app\",\n        host=\"0.0.0.0\",\n        port=port,\n        reload=False,  # Disable reload to avoid issues\n        log_level=\"info\"\n    )","size_bytes":19632},"agents/crew_setup.py":{"content":"\"\"\"\nCrewAI A2A (Agent-to-Agent) Multi-Agent System for CarFin\nAdvanced 3-agent system with dynamic inter-agent communication, hierarchical processes, and collaborative workflows\nIMPORTANT: Using LLM provider abstraction with Gemini fallback\n\"\"\"\nimport os\nimport json\nimport time\nfrom typing import Dict, List, Any, Optional, Tuple\nfrom crewai import Agent, Task, Crew, Process\nfrom ml.recommendation_engine import CarRecommendationEngine\nfrom agents.llm_provider import get_llm_response, LLMProvider\nimport logging\nfrom dataclasses import dataclass\nfrom enum import Enum\n\n@dataclass\nclass AgentMessage:\n    \"\"\"Message structure for inter-agent communication\"\"\"\n    sender_id: str\n    receiver_id: str\n    message_type: str  # question, answer, feedback, proposal\n    content: Dict[str, Any]\n    timestamp: float\n    context: Optional[Dict[str, Any]] = None\n\nclass WorkflowType(Enum):\n    \"\"\"Types of A2A workflows\"\"\"\n    SEQUENTIAL = \"sequential\"\n    HIERARCHICAL = \"hierarchical\"\n    CONSENSUS = \"consensus\"\n    COLLABORATIVE = \"collaborative\"\n    DYNAMIC = \"dynamic\"\n\nclass CarFinAgents:\n    \"\"\"CarFin A2A Multi-Agent System with advanced inter-agent communication\"\"\"\n    \n    def __init__(self):\n        self.logger = self._setup_logger()\n        self.recommendation_engine = CarRecommendationEngine()\n        \n        # Three specialized agents with A2A capabilities\n        self.data_analyst_agent = None      # Chief Data & Decision Analyst (Manager)\n        self.vehicle_agent = None           # Vehicle Recommendation Agent  \n        self.finance_agent = None           # Finance Consultation Agent\n        self.crew = None\n        \n        # A2A communication system\n        self.message_history: List[AgentMessage] = []\n        self.shared_context: Dict[str, Any] = {}\n        self.workflow_state: Dict[str, Any] = {}\n        \n        self._initialize_agents()\n    \n    def _setup_logger(self):\n        \"\"\"Set up logging\"\"\"\n        logging.basicConfig(level=logging.INFO)\n        return logging.getLogger(__name__)\n    \n    def _initialize_agents(self):\n        \"\"\"Initialize the three specialized agents\"\"\"\n        try:\n            # Load data for the recommendation engine\n            if not self.recommendation_engine.load_data():\n                self.logger.warning(\"Failed to load recommendation data\")\n            \n            # Train the ML model\n            if not self.recommendation_engine.train_model():\n                self.logger.warning(\"Failed to train recommendation model\")\n            \n            # Create Data & Decision Analyst Agent (NEW)\n            self.data_analyst_agent = Agent(\n                role=\"ë°ì´í„° ë¶„ì„ ë° ì˜ì‚¬ê²°ì • ì§€ì› ì „ë¬¸ê°€\",\n                goal=\"ì‚¬ìš©ì í”„ë¡œí•„ê³¼ ì°¨ëŸ‰ ë°ì´í„°ë¥¼ ì¢…í•© ë¶„ì„í•˜ì—¬ ì¸ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•˜ê³  ë‹¤ë¥¸ ì—ì´ì „íŠ¸ë“¤ì„ ì¡°ìœ¨í•˜ì—¬ ìµœì ì˜ ì˜ì‚¬ê²°ì •ì„ ì§€ì›\",\n                backstory=\"\"\"\n                ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ì™€ ìë™ì°¨ ì—…ê³„ì—ì„œ 12ë…„ê°„ ê·¼ë¬´í•œ ë¶„ì„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\n                ëŒ€ìš©ëŸ‰ ì°¨ëŸ‰ ë°ì´í„° ë¶„ì„, ì‹œì¥ íŠ¸ë Œë“œ ì˜ˆì¸¡, ê³ ê° í–‰ë™ íŒ¨í„´ ë¶„ì„ì— íŠ¹í™”ë˜ì–´ ìˆìœ¼ë©°,\n                ë³µì¡í•œ ë°ì´í„°ë¥¼ ì§ê´€ì ì¸ ì¸ì‚¬ì´íŠ¸ë¡œ ë³€í™˜í•˜ëŠ” ëŠ¥ë ¥ì„ ë³´ìœ í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n                \n                íŠ¹íˆ ê°œì¸ì˜ ë¼ì´í”„ìŠ¤íƒ€ì¼, ì˜ˆì‚°, ì„ í˜¸ë„ë¥¼ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•˜ì—¬\n                ë°ì´í„° ê¸°ë°˜ì˜ ê°ê´€ì ì´ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì˜ì‚¬ê²°ì • ì§€ì›ì„ ì œê³µí•©ë‹ˆë‹¤.\n                ë‹¤ë¥¸ ì „ë¬¸ê°€ë“¤ê³¼ í˜‘ë ¥í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ìµœì ì˜ ì†”ë£¨ì…˜ì„ ë„ì¶œí•©ë‹ˆë‹¤.\n                \"\"\",\n                verbose=True,\n                allow_delegation=True,  # DDAê°€ ë‹¤ë¥¸ ì—ì´ì „íŠ¸ë“¤ì„ ì¡°ìœ¨\n                max_iter=3\n            )\n            \n            # Create Vehicle Recommendation Agent\n            self.vehicle_agent = Agent(\n                role=\"ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€\",\n                goal=\"ì‚¬ìš©ìì˜ ìš”êµ¬ì‚¬í•­ì„ ì •í™•íˆ ë¶„ì„í•˜ì—¬ PyCaret ML ê¸°ë°˜ìœ¼ë¡œ ìµœì ì˜ ì°¨ëŸ‰ 3ê°œë¥¼ ì¶”ì²œí•˜ê³  ì¹œê·¼í•˜ê²Œ ì„¤ëª…\",\n                backstory=\"\"\"\n                ìë™ì°¨ ì—…ê³„ì—ì„œ 10ë…„ê°„ ê·¼ë¬´í•œ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. \n                PyCaret ML ë¶„ì„ ëŠ¥ë ¥ì„ ë³´ìœ í•˜ê³  ìˆìœ¼ë©°, ê³ ê°ì˜ ë¼ì´í”„ìŠ¤íƒ€ì¼ê³¼ ì˜ˆì‚°ì„ ê³ ë ¤í•œ \n                ë§ì¶¤í˜• ì°¨ëŸ‰ ì¶”ì²œì— íŠ¹í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n                \n                íŠ¹íˆ 20-30ëŒ€ ì²« ì°¨ êµ¬ë§¤ìë“¤ì˜ ì‹¬ë¦¬ë¥¼ ì˜ ì´í•´í•˜ë©°, \n                ë³µì¡í•œ ê¸°ìˆ  ìš©ì–´ ëŒ€ì‹  ì‰½ê³  ì¹œê·¼í•œ ì–¸ì–´ë¡œ ì„¤ëª…í•˜ëŠ” ê²ƒì„ ì¤‘ì‹œí•©ë‹ˆë‹¤.\n                \"\"\",\n                verbose=True,\n                allow_delegation=False,\n                max_iter=3\n            )\n            \n            # Create Finance Consultation Agent  \n            self.finance_agent = Agent(\n                role=\"ìë™ì°¨ ê¸ˆìœµ ìƒë‹´ ì „ë¬¸ê°€\",\n                goal=\"ì„ íƒëœ ì°¨ëŸ‰ì— ëŒ€í•´ ëŒ€ì¶œ, ë¦¬ìŠ¤, í• ë¶€ ë“± ë‹¤ì–‘í•œ ê¸ˆìœµ ì˜µì…˜ì„ ê³„ì‚°í•˜ê³  ìµœì ì˜ ë°©ì•ˆì„ ì œì•ˆ\",\n                backstory=\"\"\"\n                ìë™ì°¨ ê¸ˆìœµ ë¶„ì•¼ì—ì„œ 8ë…„ê°„ ê·¼ë¬´í•œ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\n                ì€í–‰, ìºí”¼íƒˆ, ë¦¬ìŠ¤ íšŒì‚¬ ë“± ë‹¤ì–‘í•œ ê¸ˆìœµê¸°ê´€ì˜ ìƒí’ˆì— ì •í†µí•˜ë©°,\n                ê³ ê°ì˜ ì‹ ìš© ìƒí™©ê³¼ í˜„ê¸ˆ íë¦„ì„ ê³ ë ¤í•œ ë§ì¶¤í˜• ê¸ˆìœµ ì†”ë£¨ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.\n                \n                ë³µì¡í•œ ê¸ˆìœµ ê³„ì‚°ì„ ì‰½ê²Œ ì„¤ëª…í•˜ê³ , ê³ ê°ì´ ë¶€ë‹´ ì—†ì´ ì´í•´í•  ìˆ˜ ìˆë„ë¡ \n                ì›” ë‚©ë¶€ì•¡, ì´ ë¹„ìš©, í˜œíƒ ë“±ì„ ëª…í™•í•˜ê²Œ ë¹„êµí•´ë“œë¦½ë‹ˆë‹¤.\n                \"\"\",\n                verbose=True,\n                allow_delegation=False,\n                max_iter=3\n            )\n            \n            self.logger.info(\"Successfully initialized CarFin A2A system (DDA + Vehicle + Finance)\")\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to initialize agents: {e}\")\n    \n    # ============= A2A COMMUNICATION METHODS =============\n    \n    def _send_message(self, sender_id: str, receiver_id: str, message_type: str, content: Dict[str, Any], context: Optional[Dict[str, Any]] = None) -> bool:\n        \"\"\"Send message from one agent to another\"\"\"\n        try:\n            message = AgentMessage(\n                sender_id=sender_id,\n                receiver_id=receiver_id,\n                message_type=message_type,\n                content=content,\n                timestamp=time.time(),\n                context=context\n            )\n            self.message_history.append(message)\n            self.logger.info(f\"A2A Message: {sender_id} -> {receiver_id} ({message_type})\")\n            return True\n        except Exception as e:\n            self.logger.error(f\"Failed to send message: {e}\")\n            return False\n    \n    def _get_messages_for_agent(self, agent_id: str, message_type: Optional[str] = None) -> List[AgentMessage]:\n        \"\"\"Get messages for a specific agent\"\"\"\n        messages = [msg for msg in self.message_history if msg.receiver_id == agent_id]\n        if message_type:\n            messages = [msg for msg in messages if msg.message_type == message_type]\n        return messages\n    \n    def _update_shared_context(self, key: str, value: Any, agent_id: str):\n        \"\"\"Update shared context accessible by all agents\"\"\"\n        self.shared_context[key] = {\n            'value': value,\n            'updated_by': agent_id,\n            'timestamp': time.time()\n        }\n        self.logger.info(f\"Shared context updated: {key} by {agent_id}\")\n    \n    def _create_collaborative_task(self, task_description: str, required_agents: List[str], context: Dict[str, Any]) -> Task:\n        \"\"\"Create a task that requires collaboration between multiple agents\"\"\"\n        collaborative_prompt = f\"\"\"\n        ì´ ì‘ì—…ì€ ì—¬ëŸ¬ ì „ë¬¸ê°€ì˜ í˜‘ì—…ì´ í•„ìš”í•œ ë³µí•© ì‘ì—…ì…ë‹ˆë‹¤.\n        \n        ì‘ì—… ì„¤ëª…: {task_description}\n        \n        í˜‘ì—… ëŒ€ìƒ: {', '.join(required_agents)}\n        \n        ê³µìœ  ì»¨í…ìŠ¤íŠ¸:\n        {json.dumps(context, ensure_ascii=False, indent=2)}\n        \n        ë‹¤ë¥¸ ì „ë¬¸ê°€ë“¤ê³¼ íš¨ê³¼ì ìœ¼ë¡œ ì†Œí†µí•˜ê³ , í•„ìš”ì‹œ êµ¬ì²´ì ì¸ ì§ˆë¬¸ì„ í†µí•´ \n        ì „ë¬¸ ì˜ê²¬ì„ ìš”ì²­í•˜ê³ , ì¢…í•©ì ì¸ ê²°ê³¼ë¥¼ ë„ì¶œí•´ì£¼ì„¸ìš”.\n        \n        í˜‘ì—… ì§„í–‰ ë°©ë²•:\n        1. ìì‹ ì˜ ì „ë¬¸ ë¶„ì•¼ì—ì„œ ì´ˆê¸° ë¶„ì„ ì œê³µ\n        2. ë‹¤ë¥¸ ì „ë¬¸ê°€ì—ê²Œ êµ¬ì²´ì  ì§ˆë¬¸ì´ë‚˜ ê²€í†  ìš”ì²­\n        3. ë°›ì€ í”¼ë“œë°±ì„ ë°”íƒ•ìœ¼ë¡œ ìµœì¢… ê²°ë¡  ë„ì¶œ\n        \"\"\"\n        \n        # ì£¼ ë‹´ë‹¹ìëŠ” ë°ì´í„° ë¶„ì„ê°€ (ê°€ì¥ ì í•©í•œ ì—ì´ì „íŠ¸ ì„ íƒ)\n        primary_agent = self.data_analyst_agent if 'data_analyst' in required_agents else self.vehicle_agent\n        \n        return Task(\n            description=collaborative_prompt,\n            agent=primary_agent,\n            expected_output=\"í˜‘ì—…ì„ í†µí•œ ì¢…í•©ì  ë¶„ì„ ê²°ê³¼ ë° ê¶Œì¥ì‚¬í•­\"\n        )\n    \n    # ============= A2A WORKFLOW METHODS =============\n    \n    def run_hierarchical_workflow(self, user_message: str) -> Dict[str, Any]:\n        \"\"\"Run hierarchical A2A workflow with Data Analyst as manager\"\"\"\n        try:\n            self.logger.info(\"Starting hierarchical A2A workflow\")\n            \n            # Parse user requirements\n            user_profile = self._parse_user_requirements(user_message)\n            self._update_shared_context(\"user_profile\", user_profile, \"system\")\n            \n            # Create hierarchical tasks with delegation\n            manager_task = Task(\n                description=f\"\"\"\n                ì‚¬ìš©ì ìš”ì²­: \"{user_message}\"\n                \n                ë‹¹ì‹ ì€ íŒ€ì˜ íŒ€ì¥ìœ¼ë¡œì„œ ë‹¤ìŒ ì—­í• ì„ ìˆ˜í–‰í•´ì£¼ì„¸ìš”:\n                \n                1. **ì´ˆê¸° ë¶„ì„**: ì‚¬ìš©ì í”„ë¡œí•„ê³¼ ì‹œì¥ ë°ì´í„° ë¶„ì„\n                2. **íŒ€ì› ì§€ì‹œ**: ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€ì—ê²Œ êµ¬ì²´ì ì¸ ì¶”ì²œ ìš”ì²­\n                3. **ê²°ê³¼ ê²€í† **: ì¶”ì²œ ê²°ê³¼ë¥¼ ê²€í† í•˜ê³  í•„ìš”ì‹œ ìˆ˜ì • ìš”ì²­\n                4. **ê¸ˆìœµ ìƒë‹´ ì¡°ìœ¨**: ì„ íƒëœ ì°¨ëŸ‰ì— ëŒ€í•´ ê¸ˆìœµ ì „ë¬¸ê°€ì™€ í˜‘ì˜\n                5. **ìµœì¢… ì¢…í•©**: ëª¨ë“  ì •ë³´ë¥¼ ì¢…í•©í•˜ì—¬ ìµœì ì˜ ì†”ë£¨ì…˜ ì œì‹œ\n                \n                ì‚¬ìš©ì í”„ë¡œí•„: {json.dumps(user_profile, ensure_ascii=False)}\n                \n                íŒ€ì›ë“¤ê³¼ì˜ ì†Œí†µì„ í†µí•´ ë‹¨ê³„ë³„ë¡œ ì‘ì—…ì„ ì§„í–‰í•˜ê³ , \n                ìµœì¢…ì ìœ¼ë¡œ í†µí•©ëœ ì¶”ì²œì•ˆì„ ì œì‹œí•´ì£¼ì„¸ìš”.\n                \"\"\",\n                agent=self.data_analyst_agent,\n                expected_output=\"íŒ€ì¥ì˜ ì¢…í•© ë¶„ì„ ë° íŒ€ì› ì¡°ìœ¨ ê²°ê³¼\"\n            )\n            \n            subordinate_task = Task(\n                description=f\"\"\"\n                íŒ€ì¥ì˜ ì§€ì‹œì— ë”°ë¼ ì°¨ëŸ‰ ì¶”ì²œ ì‘ì—…ì„ ìˆ˜í–‰í•´ì£¼ì„¸ìš”:\n                \n                ì‚¬ìš©ì í”„ë¡œí•„: {json.dumps(user_profile, ensure_ascii=False)}\n                \n                1. ML ì¶”ì²œ ì—”ì§„ì„ í™œìš©í•œ ìƒìœ„ 3ê°œ ì°¨ëŸ‰ ì„ ë³„\n                2. ê° ì°¨ëŸ‰ì˜ ì¥ë‹¨ì  ë¶„ì„ ë° ì‚¬ìš©ì ì í•©ì„± í‰ê°€\n                3. íŒ€ì¥ì—ê²Œ ê²°ê³¼ ë³´ê³  ë° í”¼ë“œë°± ìˆ˜ìš©\n                4. í•„ìš”ì‹œ ì¶”ê°€ ë¶„ì„ ë˜ëŠ” ëŒ€ì•ˆ ì œì‹œ\n                \n                íŒ€ì¥ê³¼ ê¸´ë°€íˆ ì†Œí†µí•˜ë©° ìµœì ì˜ ì¶”ì²œì•ˆì„ ë„ì¶œí•´ì£¼ì„¸ìš”.\n                \"\"\",\n                agent=self.vehicle_agent,\n                expected_output=\"ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€ì˜ ìƒì„¸ ì¶”ì²œ ë¦¬í¬íŠ¸\"\n            )\n            \n            # Create hierarchical crew (ensure agents are initialized)\n            if not all([self.data_analyst_agent, self.vehicle_agent, self.finance_agent]):\n                raise ValueError(\"Agents not properly initialized\")\n            \n            crew = Crew(\n                agents=[agent for agent in [self.data_analyst_agent, self.vehicle_agent, self.finance_agent] if agent is not None],\n                tasks=[manager_task, subordinate_task],\n                process=Process.hierarchical,\n                manager_agent=self.data_analyst_agent,\n                verbose=True\n            )\n            \n            result = crew.kickoff()\n            \n            # Get ML recommendations for context\n            ml_recommendations = self.recommendation_engine.get_recommendations(\n                user_profile, n_recommendations=3\n            )\n            \n            return {\n                \"status\": \"success\",\n                \"workflow_type\": \"hierarchical_a2a\",\n                \"manager_result\": str(result),\n                \"ml_recommendations\": ml_recommendations,\n                \"user_profile\": user_profile,\n                \"message_count\": len(self.message_history),\n                \"agents_used\": [\"data_analyst_manager\", \"vehicle_expert\", \"finance_expert\"]\n            }\n            \n        except Exception as e:\n            self.logger.error(f\"Hierarchical workflow failed: {e}\")\n            return {\n                \"status\": \"error\",\n                \"message\": f\"ê³„ì¸µì  A2A ì›Œí¬í”Œë¡œìš° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\",\n                \"workflow_type\": \"hierarchical_a2a\"\n            }\n    \n    def run_consensus_workflow(self, user_message: str, selected_cars: List[Dict]) -> Dict[str, Any]:\n        \"\"\"Run consensus-based A2A workflow for final decision\"\"\"\n        try:\n            self.logger.info(\"Starting consensus A2A workflow\")\n            \n            user_profile = self._parse_user_requirements(user_message)\n            \n            # Create consensus tasks for each agent\n            data_consensus_task = Task(\n                description=f\"\"\"\n                ë‹¤ìŒ ì°¨ëŸ‰ í›„ë³´ë“¤ì— ëŒ€í•´ ë°ì´í„° ë¶„ì„ ê´€ì ì—ì„œ í‰ê°€í•´ì£¼ì„¸ìš”:\n                \n                ì°¨ëŸ‰ í›„ë³´ë“¤: {json.dumps(selected_cars, ensure_ascii=False)}\n                ì‚¬ìš©ì í”„ë¡œí•„: {json.dumps(user_profile, ensure_ascii=False)}\n                \n                ê° ì°¨ëŸ‰ì— ëŒ€í•´:\n                1. ì‹œì¥ ë°ì´í„° ê¸°ë°˜ ê°€ê²© ì ì •ì„± í‰ê°€\n                2. ì‚¬ìš©ì í”„ë¡œí•„ê³¼ì˜ ë§¤ì¹˜ë„ ì ìˆ˜ (1-10)\n                3. í–¥í›„ ë¦¬ì„¸ì¼ ê°€ì¹˜ ì˜ˆì¸¡\n                4. ê°ê´€ì  ì¶”ì²œ ìˆœìœ„ ì œì‹œ\n                \n                ë‹¤ë¥¸ ì „ë¬¸ê°€ë“¤ê³¼ ì˜ê²¬ì„ ì¡°ìœ¨í•˜ì—¬ ìµœì¢… í•©ì˜ì•ˆì„ ë„ì¶œí•´ì£¼ì„¸ìš”.\n                \"\"\",\n                agent=self.data_analyst_agent,\n                expected_output=\"ë°ì´í„° ë¶„ì„ ê¸°ë°˜ ì°¨ëŸ‰ í‰ê°€ ë° ì¶”ì²œ ìˆœìœ„\"\n            )\n            \n            vehicle_consensus_task = Task(\n                description=f\"\"\"\n                ì°¨ëŸ‰ ì „ë¬¸ê°€ ê´€ì ì—ì„œ ë‹¤ìŒ í›„ë³´ë“¤ì„ í‰ê°€í•´ì£¼ì„¸ìš”:\n                \n                ì°¨ëŸ‰ í›„ë³´ë“¤: {json.dumps(selected_cars, ensure_ascii=False)}\n                ì‚¬ìš©ì í”„ë¡œí•„: {json.dumps(user_profile, ensure_ascii=False)}\n                \n                ê° ì°¨ëŸ‰ì— ëŒ€í•´:\n                1. ê¸°ìˆ ì  íŠ¹ì§• ë° ì„±ëŠ¥ í‰ê°€\n                2. ì‚¬ìš©ì ìš©ë„ì— ëŒ€í•œ ì í•©ì„± ë¶„ì„\n                3. ê²½ìŸ ëª¨ë¸ ëŒ€ë¹„ ì¥ë‹¨ì \n                4. ì „ë¬¸ê°€ ì¶”ì²œ ìˆœìœ„ ë° ê·¼ê±°\n                \n                ë‹¤ë¥¸ ì „ë¬¸ê°€ë“¤ê³¼ ì˜ê²¬ì„ êµí™˜í•˜ì—¬ í•©ì˜ì ì„ ì°¾ì•„ì£¼ì„¸ìš”.\n                \"\"\",\n                agent=self.vehicle_agent,\n                expected_output=\"ì°¨ëŸ‰ ì „ë¬¸ê°€ì˜ ê¸°ìˆ ì  í‰ê°€ ë° ì¶”ì²œ\"\n            )\n            \n            finance_consensus_task = Task(\n                description=f\"\"\"\n                ê¸ˆìœµ ì „ë¬¸ê°€ ê´€ì ì—ì„œ ë‹¤ìŒ í›„ë³´ë“¤ì„ í‰ê°€í•´ì£¼ì„¸ìš”:\n                \n                ì°¨ëŸ‰ í›„ë³´ë“¤: {json.dumps(selected_cars, ensure_ascii=False)}\n                ì‚¬ìš©ì í”„ë¡œí•„: {json.dumps(user_profile, ensure_ascii=False)}\n                \n                ê° ì°¨ëŸ‰ì— ëŒ€í•´:\n                1. êµ¬ë§¤ ê¸ˆìœµ ì˜µì…˜ë³„ ì´ ë¹„ìš© ê³„ì‚°\n                2. ì‚¬ìš©ì ì˜ˆì‚° ëŒ€ë¹„ ë¶€ë‹´ë„ í‰ê°€\n                3. ê¸ˆìœµ í˜œíƒ ë° ë¦¬ìŠ¤í¬ ë¶„ì„\n                4. ê¸ˆìœµ ê´€ì  ì¶”ì²œ ìˆœìœ„\n                \n                ë‹¤ë¥¸ ì „ë¬¸ê°€ë“¤ê³¼ í˜‘ì˜í•˜ì—¬ ìµœì ì˜ ê¸ˆìœµ ì†”ë£¨ì…˜ì„ ì°¾ì•„ì£¼ì„¸ìš”.\n                \"\"\",\n                agent=self.finance_agent,\n                expected_output=\"ê¸ˆìœµ ë¶„ì„ ë° ìµœì  êµ¬ë§¤ ë°©ì•ˆ ì œì‹œ\"\n            )\n            \n            # Create consensus crew (ensure agents are initialized)\n            if not all([self.data_analyst_agent, self.vehicle_agent, self.finance_agent]):\n                raise ValueError(\"Agents not properly initialized for consensus\")\n            \n            crew = Crew(\n                agents=[agent for agent in [self.data_analyst_agent, self.vehicle_agent, self.finance_agent] if agent is not None],\n                tasks=[data_consensus_task, vehicle_consensus_task, finance_consensus_task],\n                process=Process.sequential,  # ìˆœì°¨ì ìœ¼ë¡œ ê°ì ë¶„ì„ í›„ í•©ì˜\n                verbose=True\n            )\n            \n            result = crew.kickoff()\n            \n            return {\n                \"status\": \"success\",\n                \"workflow_type\": \"consensus_a2a\",\n                \"consensus_result\": str(result),\n                \"evaluated_cars\": selected_cars,\n                \"user_profile\": user_profile,\n                \"agents_consensus\": [\"data_analyst\", \"vehicle_expert\", \"finance_expert\"]\n            }\n            \n        except Exception as e:\n            self.logger.error(f\"Consensus workflow failed: {e}\")\n            return {\n                \"status\": \"error\",\n                \"message\": f\"í•©ì˜ ê¸°ë°˜ A2A ì›Œí¬í”Œë¡œìš° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\",\n                \"workflow_type\": \"consensus_a2a\"\n            }\n    \n    def run_collaborative_workflow(self, user_message: str, dynamic_context: Optional[Dict[str, Any]] = None) -> Dict[str, Any]:\n        \"\"\"Run real-time collaborative A2A workflow with dynamic agent interaction\"\"\"\n        try:\n            self.logger.info(\"Starting collaborative A2A workflow\")\n            \n            user_profile = self._parse_user_requirements(user_message)\n            self._update_shared_context(\"user_profile\", user_profile, \"system\")\n            \n            if dynamic_context:\n                self._update_shared_context(\"dynamic_context\", dynamic_context, \"system\")\n            \n            # Create multi-stage collaborative tasks\n            stage1_task = self._create_collaborative_task(\n                \"ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ ë¶„ì„ ë° ì´ˆê¸° ì‹œì¥ ì¡°ì‚¬\",\n                [\"data_analyst\", \"vehicle_expert\"],\n                {\"user_profile\": user_profile, \"stage\": \"initial_analysis\"}\n            )\n            \n            stage2_task = self._create_collaborative_task(\n                \"ì°¨ëŸ‰ ì¶”ì²œ ë° ìƒí˜¸ ê²€ì¦\",\n                [\"vehicle_expert\", \"finance_expert\"],\n                {\"user_profile\": user_profile, \"stage\": \"recommendation_verification\"}\n            )\n            \n            stage3_task = self._create_collaborative_task(\n                \"í†µí•© ì†”ë£¨ì…˜ ë„ì¶œ ë° ìµœì¢… ê²€í† \",\n                [\"data_analyst\", \"vehicle_expert\", \"finance_expert\"],\n                {\"user_profile\": user_profile, \"stage\": \"final_integration\"}\n            )\n            \n            # Multi-stage collaborative execution\n            all_results = []\n            \n            for stage, task in enumerate([stage1_task, stage2_task, stage3_task], 1):\n                self.logger.info(f\"Executing collaborative stage {stage}\")\n                \n                # Ensure agents are initialized for collaborative stage\n                if not all([self.data_analyst_agent, self.vehicle_agent, self.finance_agent]):\n                    raise ValueError(f\"Agents not properly initialized for collaborative stage {stage}\")\n                \n                crew = Crew(\n                    agents=[agent for agent in [self.data_analyst_agent, self.vehicle_agent, self.finance_agent] if agent is not None],\n                    tasks=[task],\n                    process=Process.sequential,\n                    verbose=True\n                )\n                \n                stage_result = crew.kickoff()\n                all_results.append(stage_result)\n                \n                # Update shared context with stage result\n                self._update_shared_context(f\"stage_{stage}_result\", str(stage_result), f\"collaborative_stage_{stage}\")\n                \n                # Simulate inter-agent message exchange\n                self._send_message(\"system\", \"all_agents\", \"stage_complete\", {\n                    \"stage\": stage,\n                    \"result\": str(stage_result),\n                    \"next_stage\": stage + 1 if stage < 3 else \"complete\"\n                })\n            \n            # Get ML recommendations for comparison\n            ml_recommendations = self.recommendation_engine.get_recommendations(\n                user_profile, n_recommendations=3\n            )\n            \n            return {\n                \"status\": \"success\",\n                \"workflow_type\": \"collaborative_a2a\",\n                \"stage_results\": [str(result) for result in all_results],\n                \"ml_recommendations\": ml_recommendations,\n                \"user_profile\": user_profile,\n                \"shared_context\": self.shared_context,\n                \"message_history\": len(self.message_history),\n                \"collaboration_stages\": 3\n            }\n            \n        except Exception as e:\n            self.logger.error(f\"Collaborative workflow failed: {e}\")\n            return {\n                \"status\": \"error\",\n                \"message\": f\"í˜‘ì—… ê¸°ë°˜ A2A ì›Œí¬í”Œë¡œìš° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\",\n                \"workflow_type\": \"collaborative_a2a\"\n            }\n    \n    def run_dynamic_a2a_workflow(self, user_message: str, workflow_type: WorkflowType = WorkflowType.DYNAMIC) -> Dict[str, Any]:\n        \"\"\"Run dynamic A2A workflow that adapts based on user requirements and agent responses\"\"\"\n        try:\n            self.logger.info(f\"Starting dynamic A2A workflow: {workflow_type.value}\")\n            \n            user_profile = self._parse_user_requirements(user_message)\n            \n            # Determine optimal workflow based on user requirements\n            if user_profile.get('budget_max', 0) > 8000 or 'luxury' in user_message.lower():\n                # High-budget users get consensus workflow\n                selected_workflow = WorkflowType.CONSENSUS\n                self.logger.info(\"Selected consensus workflow for high-budget user\")\n                \n                # Get sample luxury cars for consensus\n                sample_cars = [\n                    {\"name\": \"BMW 5ì‹œë¦¬ì¦ˆ\", \"price\": 7500, \"category\": \"Luxury\"},\n                    {\"name\": \"Mercedes-Benz E-Class\", \"price\": 8200, \"category\": \"Luxury\"},\n                    {\"name\": \"Audi A6\", \"price\": 7800, \"category\": \"Luxury\"}\n                ]\n                return self.run_consensus_workflow(user_message, sample_cars)\n                \n            elif 'first' in user_message.lower() or user_profile.get('experience') == 'ì²«ì°¨':\n                # First-time buyers get hierarchical guidance\n                selected_workflow = WorkflowType.HIERARCHICAL\n                self.logger.info(\"Selected hierarchical workflow for first-time buyer\")\n                return self.run_hierarchical_workflow(user_message)\n                \n            else:\n                # Default to collaborative workflow\n                selected_workflow = WorkflowType.COLLABORATIVE\n                self.logger.info(\"Selected collaborative workflow for general user\")\n                return self.run_collaborative_workflow(user_message)\n                \n        except Exception as e:\n            self.logger.error(f\"Dynamic A2A workflow failed: {e}\")\n            return {\n                \"status\": \"error\",\n                \"message\": f\"ë™ì  A2A ì›Œí¬í”Œë¡œìš° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\",\n                \"workflow_type\": \"dynamic_a2a\"\n            }\n    \n    def _parse_user_requirements(self, user_message: str) -> Dict[str, Any]:\n        \"\"\"Parse user message using LLM provider with fallback\"\"\"\n        try:\n            parse_prompt = f\"\"\"\n            ë‹¤ìŒ ì‚¬ìš©ì ë©”ì‹œì§€ë¥¼ ë¶„ì„í•˜ì—¬ ì°¨ëŸ‰ êµ¬ë§¤ ìš”êµ¬ì‚¬í•­ì„ JSON í˜•íƒœë¡œ ì¶”ì¶œí•´ì£¼ì„¸ìš”.\n\n            ì‚¬ìš©ì ë©”ì‹œì§€: \"{user_message}\"\n\n            ë‹¤ìŒ í˜•íƒœì˜ JSONìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”:\n            {{\n                \"budget_max\": ì˜ˆì‚° ìƒí•œì„  (ë§Œì›, ìˆ«ìë§Œ),\n                \"age_group\": \"20ëŒ€\" ë˜ëŠ” \"30ëŒ€\" ë“±,\n                \"purpose\": \"ì¶œí‡´ê·¼\", \"ê°€ì¡±ìš©\", \"ë ˆì €\" ë“± ì£¼ìš” ìš©ë„,\n                \"category\": \"Compact\", \"Mid-size\", \"SUV\", \"Luxury\" ì¤‘ ì„ í˜¸ ì¹´í…Œê³ ë¦¬,\n                \"fuel_type\": \"Gasoline\", \"Hybrid\", \"Electric\" ì¤‘ ì—°ë£Œ ì„ í˜¸,\n                \"priorities\": [\"ì—°ë¹„\", \"ì•ˆì „\", \"ë””ìì¸\", \"ê°€ê²©\"] ë“± ìš°ì„ ìˆœìœ„ ë°°ì—´,\n                \"experience\": \"ì²«ì°¨\", \"ê²½í—˜ìˆìŒ\" ë“± êµ¬ë§¤ê²½í—˜\n            }}\n            \n            ë§Œì•½ ëª…ì‹œë˜ì§€ ì•Šì€ ì •ë³´ê°€ ìˆë‹¤ë©´ ì¼ë°˜ì ì¸ í•œêµ­ì˜ í•´ë‹¹ ì—°ë ¹ëŒ€ ê¸°ì¤€ìœ¼ë¡œ ì¶”ì •í•´ì£¼ì„¸ìš”.\n            \"\"\"\n            \n            # Use LLM provider with GPT-4O -> Gemini fallback\n            response = get_llm_response(\n                messages=[{\"role\": \"user\", \"content\": parse_prompt}],\n                providers=[LLMProvider.GPT4O, LLMProvider.GEMINI_PRO],\n                response_format=\"json\"\n            )\n            \n            if response.success and response.content:\n                user_profile = json.loads(response.content)\n                # Add user_id and provider info for tracking\n                user_profile['user_id'] = f\"user_{hash(user_message) % 10000}\"\n                user_profile['llm_provider'] = response.provider\n                return user_profile\n            else:\n                raise ValueError(f\"LLM parsing failed: {response.error}\")\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to parse user requirements: {e}\")\n            # Return default profile\n            return {\n                \"budget_max\": 4000,\n                \"age_group\": \"20-30ëŒ€\",\n                \"purpose\": \"ì¼ë°˜ ì£¼í–‰\",\n                \"category\": \"Compact\",\n                \"fuel_type\": \"Gasoline\",\n                \"priorities\": [\"ê°€ê²©\", \"ì—°ë¹„\"],\n                \"experience\": \"ì²«ì°¨\",\n                \"user_id\": \"default_user\",\n                \"llm_provider\": \"fallback\"\n            }\n    \n    def create_recommendation_task(self, user_message: str) -> Task:\n        \"\"\"Create vehicle recommendation task\"\"\"\n        user_profile = self._parse_user_requirements(user_message)\n        \n        task_description = f\"\"\"\n        ì‚¬ìš©ì ìš”ì²­: \"{user_message}\"\n        \n        ë¶„ì„ëœ ì‚¬ìš©ì í”„ë¡œí•„:\n        - ì˜ˆì‚°: {user_profile.get('budget_max', 'ë¯¸ì§€ì •')}ë§Œì› ì´í•˜\n        - ì—°ë ¹ëŒ€: {user_profile.get('age_group', '20-30ëŒ€')}\n        - ì£¼ìš” ìš©ë„: {user_profile.get('purpose', 'ì¼ë°˜')}\n        - ì„ í˜¸ ì¹´í…Œê³ ë¦¬: {user_profile.get('category', 'Compact')}\n        - ì—°ë£Œ ì„ í˜¸: {user_profile.get('fuel_type', 'Gasoline')}\n        - ìš°ì„ ìˆœìœ„: {user_profile.get('priorities', ['ê°€ê²©', 'ì—°ë¹„'])}\n        \n        ì´ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒì„ ìˆ˜í–‰í•´ì£¼ì„¸ìš”:\n\n        1. PyCaret ML ì¶”ì²œ ì—”ì§„ì„ ì‚¬ìš©í•˜ì—¬ ìƒìœ„ 3ê°œ ì°¨ëŸ‰ ì¶”ì²œ\n        2. ê° ì°¨ëŸ‰ì— ëŒ€í•´ ì„ íƒ ì´ìœ ë¥¼ ì¹œê·¼í•˜ê³  ì´í•´í•˜ê¸° ì‰½ê²Œ ì„¤ëª…\n        3. ê°€ê²©, ì—°ë¹„, ì•ˆì „ì„± ë“± í•µì‹¬ ì •ë³´ ì œê³µ\n        4. ì²«ì°¨ êµ¬ë§¤ìë„ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆëŠ” ì–¸ì–´ ì‚¬ìš©\n\n        ì‘ë‹µ í˜•íƒœ:\n        - ì¶”ì²œ ì°¨ëŸ‰ 1: [ì°¨ëŸ‰ëª…] - [ê°€ê²©] - [í•µì‹¬ ì¥ì ê³¼ ì¶”ì²œ ì´ìœ ]\n        - ì¶”ì²œ ì°¨ëŸ‰ 2: [ì°¨ëŸ‰ëª…] - [ê°€ê²©] - [í•µì‹¬ ì¥ì ê³¼ ì¶”ì²œ ì´ìœ ]  \n        - ì¶”ì²œ ì°¨ëŸ‰ 3: [ì°¨ëŸ‰ëª…] - [ê°€ê²©] - [í•µì‹¬ ì¥ì ê³¼ ì¶”ì²œ ì´ìœ ]\n        \n        ë§ˆì§€ë§‰ì— ì–´ë–¤ ì°¨ëŸ‰ì´ ê°€ì¥ ë§ˆìŒì— ë“œì‹œëŠ”ì§€ ë¬¼ì–´ë³´ê³  ê¸ˆìœµ ìƒë‹´ì„ ì•ˆë‚´í•´ì£¼ì„¸ìš”.\n        \"\"\"\n        \n        return Task(\n            description=task_description,\n            agent=self.vehicle_agent,\n            expected_output=\"ì‚¬ìš©ì ë§ì¶¤í˜• ì°¨ëŸ‰ 3ê°œ ì¶”ì²œê³¼ ì¹œê·¼í•œ ì„¤ëª…\"\n        )\n    \n    def create_finance_task(self, selected_car_id: str, user_budget: int) -> Task:\n        \"\"\"Create finance consultation task\"\"\"\n        task_description = f\"\"\"\n        ì„ íƒëœ ì°¨ëŸ‰ ID: {selected_car_id}\n        ì‚¬ìš©ì ì˜ˆì‚°: {user_budget}ë§Œì›\n\n        ì´ ì°¨ëŸ‰ì— ëŒ€í•´ ë‹¤ìŒ ê¸ˆìœµ ì˜µì…˜ë“¤ì„ ê³„ì‚°í•˜ê³  ë¹„êµí•´ì£¼ì„¸ìš”:\n\n        1. í˜„ê¸ˆ ì¼ì‹œë¶ˆ\n        2. ì€í–‰ ëŒ€ì¶œ (5ë…„ ê¸°ì¤€)\n        3. ìºí”¼íƒˆ í• ë¶€ (5ë…„ ê¸°ì¤€) \n        4. ë¦¬ìŠ¤ (4ë…„ ê¸°ì¤€)\n\n        ê° ì˜µì…˜ë³„ë¡œ ì œê³µí•´ì£¼ì„¸ìš”:\n        - ì›” ë‚©ë¶€ì•¡\n        - ì´ ì§€ê¸‰ ë¹„ìš©\n        - ì¥ì ê³¼ ë‹¨ì \n        - ì í•©í•œ ê³ ê° ìœ í˜•\n\n        ì‚¬ìš©ìì˜ ì˜ˆì‚° ìƒí™©ì„ ê³ ë ¤í•˜ì—¬ ê°€ì¥ ì í•©í•œ ì˜µì…˜ 1-2ê°œë¥¼ ì¶”ì²œí•˜ê³  ì´ìœ ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.\n        ë³µì¡í•œ ê¸ˆìœµ ìš©ì–´ë³´ë‹¤ëŠ” ì‹¤ìƒí™œì—ì„œ ì´í•´í•˜ê¸° ì‰¬ìš´ í‘œí˜„ì„ ì‚¬ìš©í•´ì£¼ì„¸ìš”.\n        \"\"\"\n        \n        return Task(\n            description=task_description,\n            agent=self.finance_agent,\n            expected_output=\"ì„ íƒ ì°¨ëŸ‰ì˜ ë‹¤ì–‘í•œ ê¸ˆìœµ ì˜µì…˜ ë¹„êµì™€ ë§ì¶¤ ì¶”ì²œ\"\n        )\n    \n    def create_data_analysis_task(self, user_profile: Dict[str, Any]) -> Task:\n        \"\"\"Create data analysis and decision support task\"\"\"\n        car_data_summary = self._get_market_insights()\n        \n        task_description = f\"\"\"\n        ì‚¬ìš©ì í”„ë¡œí•„ ë¶„ì„ ë° ì°¨ëŸ‰ ì‹œì¥ ì¸ì‚¬ì´íŠ¸ ì œê³µ:\n        \n        ì‚¬ìš©ì í”„ë¡œí•„:\n        - ì˜ˆì‚°: {user_profile.get('budget_max', 'ë¯¸ì§€ì •')}ë§Œì› ì´í•˜\n        - ì—°ë ¹ëŒ€: {user_profile.get('age_group', '20-30ëŒ€')}\n        - ì£¼ìš” ìš©ë„: {user_profile.get('purpose', 'ì¼ë°˜')}\n        - ì„ í˜¸ ì¹´í…Œê³ ë¦¬: {user_profile.get('category', 'Compact')}\n        - ì—°ë£Œ ì„ í˜¸: {user_profile.get('fuel_type', 'Gasoline')}\n        - ìš°ì„ ìˆœìœ„: {user_profile.get('priorities', ['ê°€ê²©', 'ì—°ë¹„'])}\n        \n        ì‹œì¥ ë°ì´í„°:\n        {car_data_summary}\n        \n        ë‹¤ìŒ ë¶„ì„ì„ ìˆ˜í–‰í•´ì£¼ì„¸ìš”:\n        \n        1. **ì‚¬ìš©ì í”„ë¡œí•„ ë¶„ì„**: ë¼ì´í”„ìŠ¤íƒ€ì¼, êµ¬ë§¤ íŒ¨í„´, ìœ„í—˜ë„ í‰ê°€\n        2. **ì‹œì¥ ë™í–¥ ë¶„ì„**: ì˜ˆì‚° ë²”ìœ„ ë‚´ ì˜µì…˜, íŠ¸ë Œë“œ, ê°€ê²© ë³€í™”\n        3. **í•µì‹¬ ì¸ì‚¬ì´íŠ¸**: \n           - ìµœì  êµ¬ë§¤ ì‹œì  ì œì•ˆ\n           - ì˜ˆì‚° íš¨ìœ¨ì„± ë¶„ì„ \n           - ìˆ¨ê²¨ì§„ ë¹„ìš© ìš”ì†Œë“¤\n        4. **ì˜ì‚¬ê²°ì • ì§€ì› ë§¤íŠ¸ë¦­ìŠ¤**: ì˜µì…˜ë³„ ì¥ë‹¨ì ê³¼ ì¶”ì²œ ìš°ì„ ìˆœìœ„\n        \n        ê²°ê³¼ë¥¼ ì²´ê³„ì ì´ê³  ì´í•´í•˜ê¸° ì‰½ê²Œ ìš”ì•½í•´ì£¼ì„¸ìš”.\n        \"\"\"\n        \n        return Task(\n            description=task_description,\n            agent=self.data_analyst_agent,\n            expected_output=\"ì‚¬ìš©ì í”„ë¡œí•„ê³¼ ì‹œì¥ ë°ì´í„° ê¸°ë°˜ ì¢…í•© ë¶„ì„ ë¦¬í¬íŠ¸\"\n        )\n    \n    def _get_market_insights(self) -> str:\n        \"\"\"Get market insights from recommendation engine\"\"\"\n        try:\n            if hasattr(self.recommendation_engine, 'car_data') and self.recommendation_engine.car_data is not None:\n                df = self.recommendation_engine.car_data\n                \n                # ê¸°ë³¸ í†µê³„\n                total_cars = len(df)\n                avg_price = df['price'].mean() if 'price' in df else 0\n                price_range = f\"{df['price'].min()}-{df['price'].max()}\" if 'price' in df else \"N/A\"\n                \n                # ì¹´í…Œê³ ë¦¬ë³„ ë¶„í¬\n                categories = df['category'].value_counts().head(5).to_dict() if 'category' in df else {}\n                \n                # ì—°ë£Œ íƒ€ì… ë¶„í¬  \n                fuel_types = df['fuel_type'].value_counts().to_dict() if 'fuel_type' in df else {}\n                \n                return f\"\"\"\n                ì´ ì°¨ëŸ‰ ìˆ˜: {total_cars}ëŒ€\n                í‰ê·  ê°€ê²©: {avg_price:.0f}ë§Œì› \n                ê°€ê²© ë²”ìœ„: {price_range}ë§Œì›\n                ì¸ê¸° ì¹´í…Œê³ ë¦¬: {categories}\n                ì—°ë£Œ íƒ€ì… ë¶„í¬: {fuel_types}\n                \"\"\"\n            else:\n                return \"ì°¨ëŸ‰ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\"\n        except Exception as e:\n            return f\"ì‹œì¥ ë¶„ì„ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\"\n\n    def run_full_consultation(self, user_message: str) -> Dict[str, Any]:\n        \"\"\"Run complete A2A consultation workflow with dynamic workflow selection\"\"\"\n        try:\n            self.logger.info(\"Starting enhanced A2A full consultation\")\n            \n            # Step 1: Parse user requirements and determine optimal workflow\n            user_profile = self._parse_user_requirements(user_message)\n            self.logger.info(f\"User profile parsed using {user_profile.get('llm_provider', 'unknown')} provider\")\n            \n            # Step 2: Run dynamic A2A workflow\n            a2a_result = self.run_dynamic_a2a_workflow(user_message)\n            \n            # Step 3: Get ML recommendations for enhanced context\n            ml_recommendations = self.recommendation_engine.get_recommendations(\n                user_profile, n_recommendations=3\n            )\n            \n            # Step 4: Enhance result with additional A2A metadata\n            enhanced_result = {\n                \"status\": \"success\",\n                \"workflow_type\": \"a2a_full_consultation\",\n                \"a2a_workflow_result\": a2a_result,\n                \"ml_recommendations\": ml_recommendations,\n                \"user_profile\": user_profile,\n                \"a2a_features\": {\n                    \"dynamic_workflow_selection\": True,\n                    \"inter_agent_communication\": True,\n                    \"shared_context_enabled\": True,\n                    \"message_history_count\": len(self.message_history),\n                    \"workflow_adaptation\": a2a_result.get('workflow_type', 'unknown')\n                },\n                \"llm_provider\": user_profile.get('llm_provider', 'unknown')\n            }\n            \n            # Step 5: Log A2A workflow performance\n            self.logger.info(f\"A2A consultation completed with {a2a_result.get('workflow_type', 'unknown')} workflow\")\n            \n            return enhanced_result\n            \n        except Exception as e:\n            self.logger.error(f\"A2A full consultation failed: {e}\")\n            return {\n                \"status\": \"error\",\n                \"message\": f\"A2A ì¢…í•© ìƒë‹´ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\",\n                \"workflow_type\": \"a2a_full_consultation\"\n            }\n\n    def get_vehicle_recommendations(self, user_message: str) -> Dict[str, Any]:\n        \"\"\"Get vehicle recommendations using enhanced A2A multi-agent collaboration\"\"\"\n        try:\n            self.logger.info(\"Starting A2A vehicle recommendations\")\n            \n            # Use enhanced A2A full consultation with dynamic workflow selection\n            a2a_result = self.run_full_consultation(user_message)\n            \n            # Extract and format the vehicle recommendations from A2A result\n            if a2a_result[\"status\"] == \"success\":\n                return {\n                    \"status\": \"success\",\n                    \"message\": \"A2A ê¸°ë°˜ ì°¨ëŸ‰ ì¶”ì²œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤\",\n                    \"a2a_consultation_result\": a2a_result,\n                    \"ml_recommendations\": a2a_result.get(\"ml_recommendations\", []),\n                    \"user_profile\": a2a_result.get(\"user_profile\", {}),\n                    \"workflow_type\": \"a2a_vehicle_recommendations\",\n                    \"agents_collaboration\": a2a_result.get(\"a2a_features\", {}),\n                    \"selected_workflow\": a2a_result.get(\"a2a_workflow_result\", {}).get(\"workflow_type\", \"unknown\")\n                }\n            else:\n                return a2a_result\n            \n        except Exception as e:\n            self.logger.error(f\"A2A vehicle recommendation failed: {e}\")\n            return {\n                \"status\": \"error\",\n                \"message\": f\"A2A ì¶”ì²œ ì‹œìŠ¤í…œì— ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\",\n                \"ml_recommendations\": [],\n                \"user_profile\": {},\n                \"workflow_type\": \"a2a_vehicle_recommendations\"\n            }\n    \n    def get_finance_consultation(self, car_id: str, user_budget: int) -> Dict[str, Any]:\n        \"\"\"Get finance consultation from the finance agent\"\"\"\n        try:\n            # Get car details\n            car_details = self.recommendation_engine.get_car_details(int(car_id))\n            if not car_details:\n                return {\n                    \"status\": \"error\",\n                    \"message\": \"ì„ íƒí•˜ì‹  ì°¨ëŸ‰ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\"\n                }\n            \n            # Create finance task\n            finance_task = self.create_finance_task(car_id, user_budget)\n            \n            # Ensure agent is properly initialized\n            if self.finance_agent is None:\n                raise ValueError(\"Finance agent is not initialized\")\n            \n            # Create crew with just the finance agent\n            crew = Crew(\n                agents=[self.finance_agent],\n                tasks=[finance_task],\n                process=Process.sequential,\n                verbose=True\n            )\n            \n            # Execute the crew\n            agent_response = crew.kickoff()\n            \n            # Calculate actual finance options\n            finance_options = self._calculate_finance_options(car_details['price'], user_budget)\n            \n            return {\n                \"status\": \"success\",\n                \"agent_response\": str(agent_response),\n                \"car_details\": car_details,\n                \"finance_options\": finance_options\n            }\n            \n        except Exception as e:\n            self.logger.error(f\"Finance consultation failed: {e}\")\n            return {\n                \"status\": \"error\", \n                \"message\": f\"ê¸ˆìœµ ìƒë‹´ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\"\n            }\n    \n    def _calculate_finance_options(self, car_price: int, user_budget: int) -> List[Dict]:\n        \"\"\"Calculate actual finance options\"\"\"\n        try:\n            options = []\n            \n            # Cash purchase\n            options.append({\n                \"type\": \"í˜„ê¸ˆ ì¼ì‹œë¶ˆ\",\n                \"monthly_payment\": 0,\n                \"total_cost\": car_price,\n                \"down_payment\": car_price,\n                \"description\": \"ì°¨ëŸ‰ ì†Œìœ ê¶Œ ì¦‰ì‹œ íšë“, ì´ì ë¶€ë‹´ ì—†ìŒ\"\n            })\n            \n            # Bank loan (5 years, 4% interest)\n            loan_amount = min(car_price * 0.9, car_price - 500)  # 90% ëŒ€ì¶œ ë˜ëŠ” 500ë§Œì› ìë¶€ë‹´\n            if loan_amount > 0:\n                monthly_rate = 0.04 / 12\n                months = 60\n                monthly_payment = loan_amount * (monthly_rate * (1 + monthly_rate)**months) / ((1 + monthly_rate)**months - 1)\n                total_cost = monthly_payment * months + (car_price - loan_amount)\n                \n                options.append({\n                    \"type\": \"ì€í–‰ ëŒ€ì¶œ (5ë…„)\",\n                    \"monthly_payment\": int(monthly_payment),\n                    \"total_cost\": int(total_cost),\n                    \"down_payment\": car_price - loan_amount,\n                    \"description\": \"ë‚®ì€ ê¸ˆë¦¬, ì°¨ëŸ‰ ì†Œìœ ê¶Œ íšë“\"\n                })\n            \n            # Capital installment (5 years, 6% interest)\n            installment_months = 60\n            monthly_rate = 0.06 / 12\n            monthly_payment = car_price * (monthly_rate * (1 + monthly_rate)**installment_months) / ((1 + monthly_rate)**installment_months - 1)\n            \n            options.append({\n                \"type\": \"í• ë¶€ (5ë…„)\",\n                \"monthly_payment\": int(monthly_payment),\n                \"total_cost\": int(monthly_payment * installment_months),\n                \"down_payment\": 0,\n                \"description\": \"ìê¸°ìë³¸ ë¶€ë‹´ ì ìŒ, í• ë¶€ ì™„ë£Œ ì‹œ ì†Œìœ ê¶Œ íšë“\"\n            })\n            \n            # Lease (4 years)\n            lease_months = 48\n            residual_value = car_price * 0.4  # 40% residual\n            lease_payment = (car_price - residual_value + (car_price * 0.03)) / lease_months\n            \n            options.append({\n                \"type\": \"ë¦¬ìŠ¤ (4ë…„)\",\n                \"monthly_payment\": int(lease_payment),\n                \"total_cost\": int(lease_payment * lease_months),\n                \"down_payment\": car_price * 0.1,  # 10% down payment\n                \"description\": \"ë‚®ì€ ì›” ë‚©ë¶€ì•¡, ê³„ì•½ ì¢…ë£Œ ì‹œ ë°˜ë‚© ë˜ëŠ” êµ¬ë§¤ ì„ íƒ\"\n            })\n            \n            return options\n            \n        except Exception as e:\n            self.logger.error(f\"Finance calculation failed: {e}\")\n            return []\n\n# Global instance\ncarfin_agents = CarFinAgents()","size_bytes":41012},"frontend/README.md":{"content":"# React + TypeScript + Vite\n\nThis template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.\n\nCurrently, two official plugins are available:\n\n- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) for Fast Refresh\n- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh\n\n## Expanding the ESLint configuration\n\nIf you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:\n\n```js\nexport default tseslint.config([\n  globalIgnores(['dist']),\n  {\n    files: ['**/*.{ts,tsx}'],\n    extends: [\n      // Other configs...\n\n      // Remove tseslint.configs.recommended and replace with this\n      ...tseslint.configs.recommendedTypeChecked,\n      // Alternatively, use this for stricter rules\n      ...tseslint.configs.strictTypeChecked,\n      // Optionally, add this for stylistic rules\n      ...tseslint.configs.stylisticTypeChecked,\n\n      // Other configs...\n    ],\n    languageOptions: {\n      parserOptions: {\n        project: ['./tsconfig.node.json', './tsconfig.app.json'],\n        tsconfigRootDir: import.meta.dirname,\n      },\n      // other options...\n    },\n  },\n])\n```\n\nYou can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:\n\n```js\n// eslint.config.js\nimport reactX from 'eslint-plugin-react-x'\nimport reactDom from 'eslint-plugin-react-dom'\n\nexport default tseslint.config([\n  globalIgnores(['dist']),\n  {\n    files: ['**/*.{ts,tsx}'],\n    extends: [\n      // Other configs...\n      // Enable lint rules for React\n      reactX.configs['recommended-typescript'],\n      // Enable lint rules for React DOM\n      reactDom.configs.recommended,\n    ],\n    languageOptions: {\n      parserOptions: {\n        project: ['./tsconfig.node.json', './tsconfig.app.json'],\n        tsconfigRootDir: import.meta.dirname,\n      },\n      // other options...\n    },\n  },\n])\n```\n","size_bytes":2269},"frontend/eslint.config.js":{"content":"import js from '@eslint/js'\nimport globals from 'globals'\nimport reactHooks from 'eslint-plugin-react-hooks'\nimport reactRefresh from 'eslint-plugin-react-refresh'\nimport tseslint from 'typescript-eslint'\nimport { globalIgnores } from 'eslint/config'\n\nexport default tseslint.config([\n  globalIgnores(['dist']),\n  {\n    files: ['**/*.{ts,tsx}'],\n    extends: [\n      js.configs.recommended,\n      tseslint.configs.recommended,\n      reactHooks.configs['recommended-latest'],\n      reactRefresh.configs.vite,\n    ],\n    languageOptions: {\n      ecmaVersion: 2020,\n      globals: globals.browser,\n    },\n  },\n])\n","size_bytes":610},"frontend/vite.config.ts":{"content":"import { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\n\n// https://vite.dev/config/\nexport default defineConfig({\n  plugins: [react()],\n  server: {\n    host: '0.0.0.0', // Allow external connections for Replit\n    port: 5000,\n    strictPort: true,\n    allowedHosts: true, // Allow all hosts for Replit development\n  },\n  preview: {\n    host: '0.0.0.0',\n    port: 5000,\n    allowedHosts: true, // Allow all hosts for preview mode\n  },\n})\n","size_bytes":459},"ml/recommendation_engine.py":{"content":"\"\"\"\nPyCaret-based Car Recommendation Engine\nImplements ALS collaborative filtering for personalized car recommendations\n\"\"\"\nimport pandas as pd\nimport numpy as np\nfrom typing import List, Dict, Any, Optional\nimport logging\nimport os\nfrom sqlalchemy import create_engine, text\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# Try PyCaret imports with fallback\ntry:\n    from pycaret.recommendation import setup, create_model, predict_model, finalize_model\n    PYCARET_AVAILABLE = True\nexcept ImportError as e:\n    print(f\"PyCaret not available: {e}. Using fallback recommendation system.\")\n    PYCARET_AVAILABLE = False\n\nclass CarRecommendationEngine:\n    \"\"\"\n    Car recommendation system using collaborative filtering\n    Fallback to content-based filtering if PyCaret is unavailable\n    \"\"\"\n    \n    def __init__(self):\n        self.model = None\n        self.car_data = None\n        self.user_ratings = None\n        self.engine = None\n        self.is_trained = False\n        self.logger = self._setup_logger()\n        \n    def _setup_logger(self):\n        \"\"\"Set up logging\"\"\"\n        logging.basicConfig(level=logging.INFO)\n        return logging.getLogger(__name__)\n    \n    def _get_database_connection(self):\n        \"\"\"Create database connection\"\"\"\n        try:\n            database_url = os.environ.get('DATABASE_URL')\n            if not database_url:\n                raise ValueError(\"DATABASE_URL environment variable not set\")\n            self.engine = create_engine(database_url)\n            return True\n        except Exception as e:\n            self.logger.error(f\"Failed to connect to database: {e}\")\n            return False\n    \n    def load_data(self) -> bool:\n        \"\"\"Load car data and user ratings from PostgreSQL\"\"\"\n        try:\n            if not self._get_database_connection():\n                return False\n            \n            # Load car data\n            car_query = \"\"\"\n                SELECT id, make, model, year, price, fuel_type, category, \n                       engine_size, fuel_efficiency, transmission, safety_rating, description\n                FROM cars\n            \"\"\"\n            self.car_data = pd.read_sql(car_query, self.engine)\n            \n            # Load user ratings\n            ratings_query = \"\"\"\n                SELECT user_id, car_id, rating \n                FROM user_ratings\n            \"\"\"\n            self.user_ratings = pd.read_sql(ratings_query, self.engine)\n            \n            self.logger.info(f\"Loaded {len(self.car_data)} cars and {len(self.user_ratings)} ratings\")\n            return True\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to load data: {e}\")\n            return False\n    \n    def train_model(self) -> bool:\n        \"\"\"Train the recommendation model\"\"\"\n        try:\n            if not PYCARET_AVAILABLE:\n                self.logger.info(\"Using fallback content-based recommendation system\")\n                self.is_trained = True\n                return True\n            \n            if self.user_ratings is None or len(self.user_ratings) < 5:\n                self.logger.warning(\"Insufficient rating data for collaborative filtering, using content-based approach\")\n                self.is_trained = True\n                return True\n            \n            # Setup PyCaret recommendation system\n            rec_setup = setup(\n                data=self.user_ratings,\n                user_id='user_id',\n                item_id='car_id', \n                rating='rating',\n                session_id=123,\n                silent=True\n            )\n            \n            # Create ALS model\n            self.model = create_model('als')\n            self.model = finalize_model(self.model)\n            \n            self.is_trained = True\n            self.logger.info(\"Successfully trained ALS recommendation model\")\n            return True\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to train model: {e}\")\n            # Fallback to content-based approach\n            self.is_trained = True\n            return True\n    \n    def _content_based_recommendations(self, user_profile: Dict[str, Any], n_recommendations: int = 3) -> List[Dict]:\n        \"\"\"Fallback content-based recommendation when collaborative filtering fails\"\"\"\n        try:\n            # Extract user preferences\n            budget_max = user_profile.get('budget_max', 5000)\n            preferred_category = user_profile.get('category', 'Compact')\n            fuel_preference = user_profile.get('fuel_type', 'Gasoline')\n            \n            # Filter cars based on budget\n            filtered_cars = self.car_data[self.car_data['price'] <= budget_max].copy()\n            \n            if len(filtered_cars) == 0:\n                filtered_cars = self.car_data.copy()\n            \n            # Score cars based on user preferences\n            filtered_cars['score'] = 0\n            \n            # Category matching (higher score for exact match)\n            filtered_cars.loc[filtered_cars['category'] == preferred_category, 'score'] += 30\n            \n            # Fuel type preference\n            if fuel_preference == 'Electric':\n                filtered_cars.loc[filtered_cars['fuel_type'] == 'Electric', 'score'] += 25\n            elif fuel_preference == 'Hybrid':\n                filtered_cars.loc[filtered_cars['fuel_type'].isin(['Hybrid', 'Electric']), 'score'] += 20\n            else:\n                filtered_cars.loc[filtered_cars['fuel_type'] == fuel_preference, 'score'] += 15\n            \n            # Fuel efficiency bonus (higher is better)\n            filtered_cars['score'] += filtered_cars['fuel_efficiency'] * 0.5\n            \n            # Safety rating bonus\n            filtered_cars['score'] += filtered_cars['safety_rating'] * 5\n            \n            # Price value scoring (prefer mid-range pricing in category)\n            category_median_price = filtered_cars.groupby('category')['price'].median()\n            for category in category_median_price.index:\n                mask = filtered_cars['category'] == category\n                median_price = category_median_price[category]\n                # Score based on how close to median price\n                price_diff_ratio = abs(filtered_cars.loc[mask, 'price'] - median_price) / median_price\n                filtered_cars.loc[mask, 'score'] += (1 - price_diff_ratio.clip(0, 1)) * 10\n            \n            # Get top recommendations\n            top_cars = filtered_cars.nlargest(n_recommendations, 'score')\n            \n            # Convert to recommendation format\n            recommendations = []\n            for _, car in top_cars.iterrows():\n                reason = self._generate_recommendation_reason(car, user_profile)\n                recommendations.append({\n                    'car_id': int(car['id']),\n                    'make': car['make'],\n                    'model': car['model'],\n                    'year': int(car['year']),\n                    'price': int(car['price']),\n                    'fuel_type': car['fuel_type'],\n                    'category': car['category'],\n                    'fuel_efficiency': int(car['fuel_efficiency']) if pd.notnull(car['fuel_efficiency']) else None,\n                    'safety_rating': int(car['safety_rating']),\n                    'description': car['description'],\n                    'recommendation_reason': reason,\n                    'score': round(car['score'], 1)\n                })\n            \n            return recommendations\n            \n        except Exception as e:\n            self.logger.error(f\"Content-based recommendation failed: {e}\")\n            # Return top 3 cars as last resort\n            top_cars = self.car_data.nsmallest(n_recommendations, 'price')\n            return [{'car_id': int(row['id']), 'make': row['make'], 'model': row['model'], \n                    'price': int(row['price']), 'recommendation_reason': 'ê²½ì œì ì¸ ì„ íƒ'} \n                   for _, row in top_cars.iterrows()]\n    \n    def _generate_recommendation_reason(self, car: pd.Series, user_profile: Dict[str, Any]) -> str:\n        \"\"\"Generate personalized recommendation reason\"\"\"\n        reasons = []\n        \n        # Budget consideration\n        if car['price'] <= user_profile.get('budget_max', 5000):\n            if car['price'] <= 3000:\n                reasons.append(\"í•©ë¦¬ì ì¸ ê°€ê²©\")\n            else:\n                reasons.append(\"ì˜ˆì‚° ë²”ìœ„ ë‚´ ì í•©í•œ ì„ íƒ\")\n        \n        # Fuel efficiency\n        if car['fuel_efficiency'] >= 15:\n            reasons.append(\"ë›°ì–´ë‚œ ì—°ë¹„\")\n        elif car['fuel_efficiency'] >= 12:\n            reasons.append(\"ìš°ìˆ˜í•œ ì—°ë¹„\")\n        \n        # Safety\n        if car['safety_rating'] == 5:\n            reasons.append(\"ìµœê³  ì•ˆì „ë“±ê¸‰\")\n        elif car['safety_rating'] >= 4:\n            reasons.append(\"ìš°ìˆ˜í•œ ì•ˆì „ì„±\")\n        \n        # Category specific\n        if car['category'] == 'Compact':\n            reasons.append(\"ì‹¤ìš©ì ì´ê³  ê²½ì œì \")\n        elif car['category'] == 'Luxury':\n            reasons.append(\"í”„ë¦¬ë¯¸ì—„ ë¸Œëœë“œ\")\n        elif 'SUV' in car['category']:\n            reasons.append(\"ë„“ì€ ê³µê°„ê³¼ ë†’ì€ ì‹œì•¼\")\n        \n        # Electric/Hybrid\n        if car['fuel_type'] == 'Electric':\n            reasons.append(\"ì¹œí™˜ê²½ ì „ê¸°ì°¨\")\n        elif car['fuel_type'] == 'Hybrid':\n            reasons.append(\"í™˜ê²½ ì¹œí™”ì \")\n        \n        return \", \".join(reasons[:3]) if reasons else \"ì¶”ì²œ ì°¨ëŸ‰\"\n    \n    def get_recommendations(self, user_profile: Dict[str, Any], n_recommendations: int = 3) -> List[Dict]:\n        \"\"\"Get personalized car recommendations\"\"\"\n        try:\n            if not self.is_trained:\n                if not self.train_model():\n                    return []\n            \n            # For now, always use content-based recommendations as they're more reliable\n            # and provide better explanations for the MVP\n            return self._content_based_recommendations(user_profile, n_recommendations)\n            \n        except Exception as e:\n            self.logger.error(f\"Recommendation failed: {e}\")\n            return []\n    \n    def get_car_details(self, car_id: int) -> Optional[Dict]:\n        \"\"\"Get detailed information about a specific car\"\"\"\n        try:\n            car = self.car_data[self.car_data['id'] == car_id]\n            if car.empty:\n                return None\n            \n            car_info = car.iloc[0]\n            return {\n                'car_id': int(car_info['id']),\n                'make': car_info['make'],\n                'model': car_info['model'],\n                'year': int(car_info['year']),\n                'price': int(car_info['price']),\n                'fuel_type': car_info['fuel_type'],\n                'category': car_info['category'],\n                'engine_size': float(car_info['engine_size']) if pd.notnull(car_info['engine_size']) else None,\n                'fuel_efficiency': int(car_info['fuel_efficiency']) if pd.notnull(car_info['fuel_efficiency']) else None,\n                'transmission': car_info['transmission'],\n                'safety_rating': int(car_info['safety_rating']),\n                'description': car_info['description']\n            }\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to get car details: {e}\")\n            return None","size_bytes":11376},"frontend/src/App.css":{"content":"#root {\n  max-width: 1280px;\n  margin: 0 auto;\n  padding: 2rem;\n  text-align: center;\n}\n\n.logo {\n  height: 6em;\n  padding: 1.5em;\n  will-change: filter;\n  transition: filter 300ms;\n}\n.logo:hover {\n  filter: drop-shadow(0 0 2em #646cffaa);\n}\n.logo.react:hover {\n  filter: drop-shadow(0 0 2em #61dafbaa);\n}\n\n@keyframes logo-spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@media (prefers-reduced-motion: no-preference) {\n  a:nth-of-type(2) .logo {\n    animation: logo-spin infinite 20s linear;\n  }\n}\n\n.card {\n  padding: 2em;\n}\n\n.read-the-docs {\n  color: #888;\n}\n","size_bytes":606},"frontend/src/App.tsx":{"content":"import { ThemeProvider, createTheme } from '@mui/material/styles';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport HybridCarFinInterface from './components/HybridCarFinInterface';\n\n// Create Material-UI theme\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#1976d2', // Blue theme for CarFin\n    },\n    secondary: {\n      main: '#dc004e',\n    },\n    background: {\n      default: '#f5f5f5',\n    },\n  },\n  typography: {\n    h3: {\n      fontWeight: 600,\n      marginBottom: '1rem',\n    },\n    h6: {\n      fontWeight: 500,\n    },\n  },\n  components: {\n    MuiCard: {\n      styleOverrides: {\n        root: {\n          borderRadius: 12,\n          boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n        },\n      },\n    },\n    MuiButton: {\n      styleOverrides: {\n        root: {\n          borderRadius: 8,\n          textTransform: 'none',\n        },\n      },\n    },\n  },\n});\n\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <HybridCarFinInterface />\n    </ThemeProvider>\n  );\n}\n\nexport default App;","size_bytes":1061},"frontend/src/index.css":{"content":":root {\n  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;\n  line-height: 1.5;\n  font-weight: 400;\n\n  color-scheme: light dark;\n  color: rgba(255, 255, 255, 0.87);\n  background-color: #242424;\n\n  font-synthesis: none;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\na {\n  font-weight: 500;\n  color: #646cff;\n  text-decoration: inherit;\n}\na:hover {\n  color: #535bf2;\n}\n\nbody {\n  margin: 0;\n  display: flex;\n  place-items: center;\n  min-width: 320px;\n  min-height: 100vh;\n}\n\nh1 {\n  font-size: 3.2em;\n  line-height: 1.1;\n}\n\nbutton {\n  border-radius: 8px;\n  border: 1px solid transparent;\n  padding: 0.6em 1.2em;\n  font-size: 1em;\n  font-weight: 500;\n  font-family: inherit;\n  background-color: #1a1a1a;\n  cursor: pointer;\n  transition: border-color 0.25s;\n}\nbutton:hover {\n  border-color: #646cff;\n}\nbutton:focus,\nbutton:focus-visible {\n  outline: 4px auto -webkit-focus-ring-color;\n}\n\n@media (prefers-color-scheme: light) {\n  :root {\n    color: #213547;\n    background-color: #ffffff;\n  }\n  a:hover {\n    color: #747bff;\n  }\n  button {\n    background-color: #f9f9f9;\n  }\n}\n","size_bytes":1154},"frontend/src/main.tsx":{"content":"import { StrictMode } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport './index.css'\nimport App from './App.tsx'\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n)\n","size_bytes":230},"frontend/src/vite-env.d.ts":{"content":"/// <reference types=\"vite/client\" />\n","size_bytes":38},"frontend/src/components/CarRecommendationApp.tsx":{"content":"import React, { useState } from 'react';\nimport {\n  Container,\n  Box,\n  Typography,\n  Grid,\n  Alert,\n  Paper,\n  Divider,\n  Skeleton,\n  Fade,\n  Card,\n  CardContent,\n} from '@mui/material';\nimport GuidedInputPanel from './GuidedInputPanel';\nimport EnhancedHeader from './EnhancedHeader';\nimport EnhancedCarCard from './EnhancedCarCard';\n\n// Types for API responses\ninterface CarRecommendation {\n  car_id: number;\n  make: string;\n  model: string;\n  year: number;\n  price: number;\n  fuel_type: string;\n  category: string;\n  fuel_efficiency?: number;\n  safety_rating: number;\n  description: string;\n  recommendation_reason: string;\n  score?: number;\n}\n\ninterface RecommendationResponse {\n  status: string;\n  agent_response: string;\n  ml_recommendations: CarRecommendation[];\n  user_profile: any;\n  message?: string;\n}\n\ninterface FinanceOption {\n  type: string;\n  monthly_payment: number;\n  total_cost: number;\n  down_payment: number;\n  description: string;\n}\n\ninterface FinanceResponse {\n  status: string;\n  agent_response: string;\n  car_details: any;\n  finance_options: FinanceOption[];\n  message?: string;\n}\n\ninterface CarRecommendationAppProps {\n  onStartChat: () => void;\n}\n\nconst CarRecommendationApp: React.FC<CarRecommendationAppProps> = ({ onStartChat }) => {\n  const [recommendations, setRecommendations] = useState<CarRecommendation[]>([]);\n  const [agentResponse, setAgentResponse] = useState('');\n  const [financeInfo, setFinanceInfo] = useState<FinanceResponse | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [financeLoading, setFinanceLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [selectedCar, setSelectedCar] = useState<CarRecommendation | null>(null);\n  const [compareList, setCompareList] = useState<CarRecommendation[]>([]);\n  const [agentLoading, setAgentLoading] = useState(false);\n\n  // Get backend URL - backend runs on port 8000, frontend on 5000\n  const API_BASE = window.location.protocol + '//' + window.location.hostname + ':8000';\n\n  const handleRecommendation = async (inputData: {\n    message: string;\n    budget: number;\n    filters: any;\n  }) => {\n    if (!inputData.message.trim() && !Object.values(inputData.filters).some(v => v)) {\n      setError('ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ì¡°ê±´ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    setLoading(true);\n    setAgentLoading(true);\n    setError('');\n    setRecommendations([]);\n    setAgentResponse('');\n    setFinanceInfo(null);\n    setSelectedCar(null);\n\n    try {\n      const response = await fetch(`${API_BASE}/api/recommend`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          message: inputData.message,\n          user_id: 'user_' + Date.now(),\n          budget: inputData.budget,\n          filters: inputData.filters,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`ì„œë²„ ì˜¤ë¥˜: ${response.status}`);\n      }\n\n      const data: RecommendationResponse = await response.json();\n\n      if (data.status === 'error') {\n        throw new Error(data.message || 'ì¶”ì²œì„ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n      }\n\n      // ì—ì´ì „íŠ¸ ì‘ë‹µ ë¨¼ì € í‘œì‹œ\n      setAgentResponse(data.agent_response || '');\n      setAgentLoading(false);\n      \n      // ì¶”ì²œ ê²°ê³¼ëŠ” ì¡°ê¸ˆ ë’¤ì— í‘œì‹œ (ë” ë‚˜ì€ UX)\n      setTimeout(() => {\n        setRecommendations(data.ml_recommendations || []);\n        setLoading(false);\n      }, 500);\n      \n    } catch (err) {\n      console.error('Recommendation error:', err);\n      setError(err instanceof Error ? err.message : 'ì¶”ì²œ ìš”ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n      setLoading(false);\n      setAgentLoading(false);\n    }\n  };\n\n  const handleFinanceConsult = async (car: CarRecommendation) => {\n    setFinanceLoading(true);\n    setSelectedCar(car);\n    setError('');\n\n    try {\n      const response = await fetch(`${API_BASE}/api/finance`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          car_id: car.car_id.toString(),\n          user_budget: car.price, // ì°¨ëŸ‰ ê°€ê²©ì„ ê¸°ë³¸ ì˜ˆì‚°ìœ¼ë¡œ ì‚¬ìš©\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`ì„œë²„ ì˜¤ë¥˜: ${response.status}`);\n      }\n\n      const data: FinanceResponse = await response.json();\n\n      if (data.status === 'error') {\n        throw new Error(data.message || 'ê¸ˆìœµ ìƒë‹´ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n      }\n\n      setFinanceInfo(data);\n    } catch (err) {\n      console.error('Finance consultation error:', err);\n      setError(err instanceof Error ? err.message : 'ê¸ˆìœµ ìƒë‹´ ìš”ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n    } finally {\n      setFinanceLoading(false);\n    }\n  };\n\n  const handleCompare = (car: CarRecommendation) => {\n    if (compareList.find(c => c.car_id === car.car_id)) {\n      setCompareList(compareList.filter(c => c.car_id !== car.car_id));\n    } else if (compareList.length < 3) {\n      setCompareList([...compareList, car]);\n    }\n  };\n\n  return (\n    <Box>\n      {/* Enhanced Header */}\n      <EnhancedHeader onStartChat={onStartChat} />\n      \n      <Container maxWidth=\"lg\" sx={{ py: 2 }}>\n        {/* Guided Input Panel */}\n        <GuidedInputPanel \n          onSubmit={handleRecommendation}\n          loading={loading}\n        />\n\n      {/* Error Display */}\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }}>\n          {error}\n        </Alert>\n      )}\n\n        {/* Agent Response with Loading */}\n        {(agentLoading || agentResponse) && (\n          <Paper \n            elevation={2} \n            sx={{ \n              p: 3, \n              mb: 4, \n              background: 'linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%)',\n              borderRadius: 3,\n            }}\n          >\n            <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 600, color: '#1976d2' }}>\n              ğŸ¤– AI ì „ë¬¸ê°€ ë¶„ì„\n            </Typography>\n            {agentLoading ? (\n              <Box>\n                <Skeleton variant=\"text\" width=\"80%\" height={32} />\n                <Skeleton variant=\"text\" width=\"60%\" height={32} />\n                <Skeleton variant=\"text\" width=\"90%\" height={32} />\n              </Box>\n            ) : (\n              <Fade in={!!agentResponse}>\n                <Typography variant=\"body1\" sx={{ whiteSpace: 'pre-line', fontSize: '1.05rem', lineHeight: 1.6 }}>\n                  {agentResponse}\n                </Typography>\n              </Fade>\n            )}\n          </Paper>\n        )}\n\n        {/* Car Recommendations with Loading Skeletons */}\n        {(loading || recommendations.length > 0) && (\n          <Box mb={4}>\n            <Typography variant=\"h5\" gutterBottom sx={{ mb: 3, fontWeight: 600, color: '#1976d2' }}>\n              ğŸ¯ ë§ì¶¤ ì¶”ì²œ ì°¨ëŸ‰\n              {compareList.length > 0 && (\n                <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\" sx={{ ml: 2 }}>\n                  (ë¹„êµ ëª©ë¡: {compareList.length}/3)\n                </Typography>\n              )}\n            </Typography>\n            \n            <Grid container spacing={3}>\n              {loading ? (\n                // Loading Skeletons\n                Array.from({ length: 3 }).map((_, index) => (\n                  <Grid item xs={12} md={4} key={`skeleton-${index}`}>\n                    <Paper sx={{ p: 2, height: 400 }}>\n                      <Skeleton variant=\"circular\" width={56} height={56} sx={{ mb: 2 }} />\n                      <Skeleton variant=\"text\" width=\"80%\" height={32} />\n                      <Skeleton variant=\"text\" width=\"60%\" height={24} />\n                      <Skeleton variant=\"text\" width=\"100%\" height={48} sx={{ my: 2 }} />\n                      <Skeleton variant=\"rectangular\" width=\"100%\" height={100} />\n                    </Paper>\n                  </Grid>\n                ))\n              ) : (\n                // Actual Recommendations\n                recommendations.map((car, index) => (\n                  <Grid item xs={12} md={4} key={car.car_id}>\n                    <EnhancedCarCard\n                      car={car}\n                      index={index}\n                      onFinanceConsult={handleFinanceConsult}\n                      onCompare={handleCompare}\n                      financeLoading={financeLoading && selectedCar?.car_id === car.car_id}\n                      isSelected={compareList.find(c => c.car_id === car.car_id) !== undefined}\n                    />\n                  </Grid>\n                ))\n              )}\n            </Grid>\n          </Box>\n        )}\n\n      {/* Finance Information */}\n      {financeInfo && selectedCar && (\n        <Paper elevation={3} sx={{ p: 4 }}>\n          <Typography variant=\"h5\" gutterBottom>\n            ğŸ’³ {selectedCar.make} {selectedCar.model} ê¸ˆìœµ ìƒë‹´ ê²°ê³¼\n          </Typography>\n          \n          {financeInfo.agent_response && (\n            <Box mb={3}>\n              <Typography variant=\"h6\" gutterBottom>\n                ì „ë¬¸ê°€ ë¶„ì„\n              </Typography>\n              <Typography variant=\"body1\" sx={{ whiteSpace: 'pre-line', mb: 2 }}>\n                {financeInfo.agent_response}\n              </Typography>\n              <Divider />\n            </Box>\n          )}\n          \n          <Typography variant=\"h6\" gutterBottom>\n            ê¸ˆìœµ ì˜µì…˜ ë¹„êµ\n          </Typography>\n          \n          <Grid container spacing={3}>\n            {financeInfo.finance_options.map((option, index) => (\n              <Grid item xs={12} md={6} key={index}>\n                <Card variant=\"outlined\">\n                  <CardContent>\n                    <Typography variant=\"h6\" color=\"primary\" gutterBottom>\n                      {option.type}\n                    </Typography>\n                    \n                    <Box mb={2}>\n                      <Typography variant=\"body2\" color=\"textSecondary\">\n                        ì›” ë‚©ë¶€ì•¡\n                      </Typography>\n                      <Typography variant=\"h6\">\n                        {option.monthly_payment === 0 \n                          ? 'ì—†ìŒ' \n                          : `${option.monthly_payment.toLocaleString()}ë§Œì›`}\n                      </Typography>\n                    </Box>\n                    \n                    <Box mb={2}>\n                      <Typography variant=\"body2\" color=\"textSecondary\">\n                        ì´ ì§€ê¸‰ ë¹„ìš©\n                      </Typography>\n                      <Typography variant=\"h6\">\n                        {option.total_cost.toLocaleString()}ë§Œì›\n                      </Typography>\n                    </Box>\n                    \n                    <Box mb={2}>\n                      <Typography variant=\"body2\" color=\"textSecondary\">\n                        ì´ˆê¸° ë‚©ì…ê¸ˆ\n                      </Typography>\n                      <Typography variant=\"h6\">\n                        {option.down_payment.toLocaleString()}ë§Œì›\n                      </Typography>\n                    </Box>\n                    \n                    <Typography variant=\"body2\" color=\"textSecondary\">\n                      {option.description}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n        </Paper>\n      )}\n\n        {/* Footer */}\n        <Box textAlign=\"center\" mt={6} py={3}>\n          <Typography variant=\"body2\" color=\"textSecondary\">\n            CarFin AI - ì—”ì¹´ ì‹¤ì œ ë§¤ë¬¼ ë°ì´í„° Ã— CrewAI ë©€í‹°ì—ì´ì „íŠ¸ Ã— PyCaret ML ì¶”ì²œ ì‹œìŠ¤í…œ\n          </Typography>\n          <Typography variant=\"caption\" color=\"textSecondary\" display=\"block\" mt={1}>\n            Powered by OpenAI GPT-4 & ì‹¤ì‹œê°„ ì°¨ëŸ‰ ë°ì´í„°\n          </Typography>\n        </Box>\n      </Container>\n    </Box>\n  );\n};\n\nexport default CarRecommendationApp;","size_bytes":11944},"data/aws_encar_crawler.py":{"content":"\"\"\"\nAWS PostgreSQL ì—°ê²° ì—”ì¹´ í¬ë¡¤ëŸ¬\nAWS RDS PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì— ì—”ì¹´ ì¤‘ê³ ì°¨ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\n\"\"\"\nimport os\nimport random\nfrom sqlalchemy import create_engine, text\nimport pandas as pd\nimport logging\nimport psycopg2\n\nlogger = logging.getLogger(__name__)\n\nclass AWSEncarCrawler:\n    \"\"\"AWS PostgreSQL ì—°ê²° ì—”ì¹´ í¬ë¡¤ëŸ¬\"\"\"\n    \n    def __init__(self):\n        # AWS PostgreSQL ì—°ê²° ì •ë³´\n        self.aws_host = os.environ.get('AWS_DB_HOST')\n        self.aws_user = os.environ.get('AWS_DB_USER') \n        self.aws_password = os.environ.get('AWS_DB_PASSWORD')\n        self.aws_db = os.environ.get('AWS_DB_NAME')\n        self.aws_port = os.environ.get('AWS_DB_PORT', '5432')\n        \n        # AWS ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° URL ìƒì„±\n        if all([self.aws_host, self.aws_user, self.aws_password, self.aws_db]):\n            self.aws_db_url = f\"postgresql://{self.aws_user}:{self.aws_password}@{self.aws_host}:{self.aws_port}/{self.aws_db}\"\n            print(f\"âœ… AWS PostgreSQL ì—°ê²° ì •ë³´ í™•ì¸ë¨\")\n            print(f\"   í˜¸ìŠ¤íŠ¸: {self.aws_host}\")\n            print(f\"   ë°ì´í„°ë² ì´ìŠ¤: {self.aws_db}\")\n            print(f\"   í¬íŠ¸: {self.aws_port}\")\n        else:\n            print(\"âŒ AWS PostgreSQL ì—°ê²° ì •ë³´ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤\")\n            self.aws_db_url = None\n    \n    def test_connection(self):\n        \"\"\"AWS PostgreSQL ì—°ê²° í…ŒìŠ¤íŠ¸\"\"\"\n        if not self.aws_db_url:\n            return False\n            \n        try:\n            engine = create_engine(self.aws_db_url)\n            with engine.connect() as conn:\n                result = conn.execute(text(\"SELECT version()\"))\n                version = result.fetchone()[0]\n                print(f\"âœ… AWS PostgreSQL ì—°ê²° ì„±ê³µ!\")\n                print(f\"   ë²„ì „: {version[:50]}...\")\n                return True\n        except Exception as e:\n            print(f\"âŒ AWS PostgreSQL ì—°ê²° ì‹¤íŒ¨: {e}\")\n            return False\n    \n    def setup_cars_table(self):\n        \"\"\"cars í…Œì´ë¸” ìƒì„± (ì—†ëŠ” ê²½ìš°)\"\"\"\n        if not self.aws_db_url:\n            return False\n            \n        try:\n            engine = create_engine(self.aws_db_url)\n            \n            create_table_query = \"\"\"\n            CREATE TABLE IF NOT EXISTS cars (\n                id SERIAL PRIMARY KEY,\n                make VARCHAR(50) NOT NULL,\n                model VARCHAR(100) NOT NULL,\n                year INTEGER NOT NULL,\n                price INTEGER NOT NULL,\n                fuel_type VARCHAR(20) NOT NULL,\n                category VARCHAR(20) NOT NULL,\n                engine_size DECIMAL(3,1),\n                fuel_efficiency INTEGER,\n                transmission VARCHAR(10),\n                safety_rating INTEGER,\n                description TEXT\n            );\n            \"\"\"\n            \n            with engine.connect() as conn:\n                conn.execute(text(create_table_query))\n                conn.commit()\n                print(\"âœ… cars í…Œì´ë¸” ìƒì„± ì™„ë£Œ\")\n                return True\n                \n        except Exception as e:\n            print(f\"âŒ í…Œì´ë¸” ìƒì„± ì‹¤íŒ¨: {e}\")\n            return False\n    \n    def generate_encar_data(self, count: int = 100) -> list:\n        \"\"\"ì‹¤ì œ ì—”ì¹´ ë§¤ë¬¼ ìŠ¤íƒ€ì¼ ë°ì´í„° ìƒì„±\"\"\"\n        \n        # ì‹¤ì œ í•œêµ­ ì¸ê¸° ì°¨ì¢… ë°ì´í„°\n        car_models = [\n            # í˜„ëŒ€\n            {'make': 'í˜„ëŒ€', 'model': 'ì•„ë°˜ë–¼', 'category': 'Sedan', 'base_price': 2500, 'fuel_efficiency': 13, 'engine_size': 1.6},\n            {'make': 'í˜„ëŒ€', 'model': 'ì˜ë‚˜íƒ€', 'category': 'Sedan', 'base_price': 3200, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'í˜„ëŒ€', 'model': 'ê·¸ëœì ¸', 'category': 'Sedan', 'base_price': 4500, 'fuel_efficiency': 10, 'engine_size': 3.0},\n            {'make': 'í˜„ëŒ€', 'model': 'íˆ¬ì‹¼', 'category': 'SUV', 'base_price': 3800, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            {'make': 'í˜„ëŒ€', 'model': 'ì‚°íƒ€í˜', 'category': 'SUV', 'base_price': 4800, 'fuel_efficiency': 9, 'engine_size': 2.5},\n            {'make': 'í˜„ëŒ€', 'model': 'i30', 'category': 'Hatchback', 'base_price': 2800, 'fuel_efficiency': 14, 'engine_size': 1.6},\n            {'make': 'í˜„ëŒ€', 'model': 'ë²¨ë¡œìŠ¤í„°', 'category': 'Hatchback', 'base_price': 3000, 'fuel_efficiency': 13, 'engine_size': 1.6},\n            \n            # ê¸°ì•„\n            {'make': 'ê¸°ì•„', 'model': 'K3', 'category': 'Sedan', 'base_price': 2400, 'fuel_efficiency': 13, 'engine_size': 1.6},\n            {'make': 'ê¸°ì•„', 'model': 'K5', 'category': 'Sedan', 'base_price': 3300, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'ê¸°ì•„', 'model': 'K7', 'category': 'Sedan', 'base_price': 4200, 'fuel_efficiency': 11, 'engine_size': 2.5},\n            {'make': 'ê¸°ì•„', 'model': 'ìŠ¤í¬í‹°ì§€', 'category': 'SUV', 'base_price': 3600, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            {'make': 'ê¸°ì•„', 'model': 'ì˜ë Œí† ', 'category': 'SUV', 'base_price': 4600, 'fuel_efficiency': 9, 'engine_size': 2.5},\n            {'make': 'ê¸°ì•„', 'model': 'ëª¨ë‹', 'category': 'Mini', 'base_price': 1500, 'fuel_efficiency': 16, 'engine_size': 1.0},\n            {'make': 'ê¸°ì•„', 'model': 'Ray', 'category': 'Mini', 'base_price': 1400, 'fuel_efficiency': 15, 'engine_size': 1.0},\n            \n            # BMW\n            {'make': 'BMW', 'model': '320i', 'category': 'Sedan', 'base_price': 5500, 'fuel_efficiency': 13, 'engine_size': 2.0},\n            {'make': 'BMW', 'model': '520i', 'category': 'Sedan', 'base_price': 7200, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'BMW', 'model': 'X3', 'category': 'SUV', 'base_price': 6800, 'fuel_efficiency': 10, 'engine_size': 2.0},\n            {'make': 'BMW', 'model': 'X5', 'category': 'SUV', 'base_price': 9500, 'fuel_efficiency': 8, 'engine_size': 3.0},\n            {'make': 'BMW', 'model': '118i', 'category': 'Hatchback', 'base_price': 4200, 'fuel_efficiency': 14, 'engine_size': 1.5},\n            \n            # ë²¤ì¸ \n            {'make': 'ë²¤ì¸ ', 'model': 'C200', 'category': 'Sedan', 'base_price': 6200, 'fuel_efficiency': 13, 'engine_size': 2.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'E220', 'category': 'Sedan', 'base_price': 8500, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'GLC', 'category': 'SUV', 'base_price': 7800, 'fuel_efficiency': 10, 'engine_size': 2.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'GLE', 'category': 'SUV', 'base_price': 10500, 'fuel_efficiency': 9, 'engine_size': 3.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'A200', 'category': 'Hatchback', 'base_price': 4500, 'fuel_efficiency': 14, 'engine_size': 1.3},\n            \n            # ì•„ìš°ë””\n            {'make': 'ì•„ìš°ë””', 'model': 'A3', 'category': 'Hatchback', 'base_price': 4800, 'fuel_efficiency': 14, 'engine_size': 1.4},\n            {'make': 'ì•„ìš°ë””', 'model': 'A4', 'category': 'Sedan', 'base_price': 5800, 'fuel_efficiency': 13, 'engine_size': 2.0},\n            {'make': 'ì•„ìš°ë””', 'model': 'A6', 'category': 'Sedan', 'base_price': 7800, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            {'make': 'ì•„ìš°ë””', 'model': 'Q3', 'category': 'SUV', 'base_price': 5200, 'fuel_efficiency': 12, 'engine_size': 1.4},\n            {'make': 'ì•„ìš°ë””', 'model': 'Q5', 'category': 'SUV', 'base_price': 6800, 'fuel_efficiency': 10, 'engine_size': 2.0},\n            \n            # í† ìš”íƒ€\n            {'make': 'í† ìš”íƒ€', 'model': 'ìº ë¦¬', 'category': 'Sedan', 'base_price': 3800, 'fuel_efficiency': 12, 'engine_size': 2.5},\n            {'make': 'í† ìš”íƒ€', 'model': 'í”„ë¦¬ìš°ìŠ¤', 'category': 'Hatchback', 'base_price': 3200, 'fuel_efficiency': 22, 'engine_size': 1.8},\n            {'make': 'í† ìš”íƒ€', 'model': 'RAV4', 'category': 'SUV', 'base_price': 4200, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            \n            # ì‰ë³´ë ˆ\n            {'make': 'ì‰ë³´ë ˆ', 'model': 'í¬ë£¨ì¦ˆ', 'category': 'Sedan', 'base_price': 2200, 'fuel_efficiency': 14, 'engine_size': 1.4},\n            {'make': 'ì‰ë³´ë ˆ', 'model': 'ë§ë¦¬ë¶€', 'category': 'Sedan', 'base_price': 3400, 'fuel_efficiency': 12, 'engine_size': 1.5},\n            {'make': 'ì‰ë³´ë ˆ', 'model': 'íŠ¸ë˜ë²„ìŠ¤', 'category': 'SUV', 'base_price': 4500, 'fuel_efficiency': 9, 'engine_size': 3.6},\n            \n            # ë‹›ì‚°\n            {'make': 'ë‹›ì‚°', 'model': 'ë¡œê·¸', 'category': 'SUV', 'base_price': 4200, 'fuel_efficiency': 10, 'engine_size': 2.5},\n            {'make': 'ë‹›ì‚°', 'model': 'ìºì‹œì¹´ì´', 'category': 'SUV', 'base_price': 3800, 'fuel_efficiency': 12, 'engine_size': 2.0},\n        ]\n        \n        fuel_types = ['ê°€ì†”ë¦°', 'ë””ì ¤', 'í•˜ì´ë¸Œë¦¬ë“œ', 'LPG', 'ì „ê¸°']\n        transmissions = ['ìë™', 'ìˆ˜ë™', 'CVT']\n        \n        cars_data = []\n        \n        for i in range(count):\n            car = random.choice(car_models)\n            year = random.randint(2018, 2024)\n            \n            # ì—°ì‹ì— ë”°ë¥¸ ê°€ê²© ì¡°ì • (ê°ê°€ìƒê°)\n            age = 2024 - year\n            depreciation = 1 - (age * 0.12)  # ì—° 12% ê°ê°€ìƒê°\n            price = int(car['base_price'] * depreciation * random.uniform(0.80, 1.20))  # Â±20% ë³€ë™\n            \n            # ì—°ë£Œíƒ€ì…ë³„ ì—°ë¹„ ì¡°ì •\n            fuel_type = random.choice(fuel_types)\n            fuel_efficiency = car['fuel_efficiency']\n            if fuel_type == 'í•˜ì´ë¸Œë¦¬ë“œ':\n                fuel_efficiency += random.randint(8, 12)\n            elif fuel_type == 'ì „ê¸°':\n                fuel_efficiency = random.randint(5, 7)  # kWh/100km (ì „ê¸°ì°¨)\n            elif fuel_type == 'ë””ì ¤':\n                fuel_efficiency += random.randint(3, 5)\n            elif fuel_type == 'LPG':\n                fuel_efficiency += random.randint(1, 3)\n            \n            # ì•ˆì „ë“±ê¸‰ (4-5ì )\n            safety_rating = random.choice([4, 4, 5, 5, 5])  # 5ì ì´ ë” ë§ì´ ë‚˜ì˜¤ë„ë¡\n            \n            cars_data.append({\n                'make': car['make'],\n                'model': car['model'],\n                'year': year,\n                'price': max(500, price),  # ìµœì†Œ 500ë§Œì›\n                'fuel_type': fuel_type,\n                'category': car['category'],\n                'engine_size': car['engine_size'],\n                'fuel_efficiency': fuel_efficiency,\n                'transmission': random.choice(transmissions),\n                'safety_rating': safety_rating,\n                'description': f\"{car['make']} {car['model']} {year}ë…„í˜• - AWS ì—”ì¹´ ì‹¤ì œ ë§¤ë¬¼ ë°ì´í„°\"\n            })\n        \n        return cars_data\n    \n    def save_to_aws_db(self, cars_data: list) -> bool:\n        \"\"\"AWS PostgreSQLì— ë°ì´í„° ì €ì¥\"\"\"\n        if not self.aws_db_url or not cars_data:\n            return False\n            \n        try:\n            engine = create_engine(self.aws_db_url)\n            df = pd.DataFrame(cars_data)\n            \n            # ê¸°ì¡´ ë°ì´í„° í™•ì¸\n            with engine.connect() as conn:\n                result = conn.execute(text(\"SELECT COUNT(*) FROM cars\"))\n                existing_count = result.fetchone()[0]\n                print(f\"ğŸ“Š ê¸°ì¡´ ë°ì´í„°: {existing_count}ê±´\")\n            \n            # ìƒˆ ë°ì´í„° ì¶”ê°€ (ê¸°ì¡´ ë°ì´í„°ëŠ” ìœ ì§€)\n            df.to_sql('cars', engine, if_exists='append', index=False)\n            \n            # ì €ì¥ í›„ í™•ì¸\n            with engine.connect() as conn:\n                result = conn.execute(text(\"SELECT COUNT(*) FROM cars\"))\n                new_count = result.fetchone()[0]\n                print(f\"ğŸ“Š ì €ì¥ í›„ ì´ ë°ì´í„°: {new_count}ê±´\")\n                print(f\"âœ… ìƒˆë¡œ ì¶”ê°€ëœ ë°ì´í„°: {new_count - existing_count}ê±´\")\n            \n            return True\n            \n        except Exception as e:\n            print(f\"âŒ AWS PostgreSQL ì €ì¥ ì‹¤íŒ¨: {e}\")\n            return False\n    \n    def get_sample_data(self, limit: int = 10):\n        \"\"\"ì €ì¥ëœ ë°ì´í„° ìƒ˜í”Œ ì¡°íšŒ\"\"\"\n        if not self.aws_db_url:\n            return None\n            \n        try:\n            engine = create_engine(self.aws_db_url)\n            query = f\"\"\"\n            SELECT make, model, year, price, fuel_type, category \n            FROM cars \n            ORDER BY id DESC \n            LIMIT {limit}\n            \"\"\"\n            \n            df = pd.read_sql(query, engine)\n            print(\"ğŸ“‹ ìµœì‹  ì €ì¥ ë°ì´í„° ìƒ˜í”Œ:\")\n            print(df.to_string(index=False))\n            return df\n            \n        except Exception as e:\n            print(f\"âŒ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨: {e}\")\n            return None\n\ndef run_aws_encar_crawler(count: int = 150):\n    \"\"\"AWS ì—”ì¹´ í¬ë¡¤ëŸ¬ ì‹¤í–‰\"\"\"\n    print(\"ğŸš— AWS PostgreSQL ì—”ì¹´ í¬ë¡¤ëŸ¬ ì‹œì‘...\")\n    \n    crawler = AWSEncarCrawler()\n    \n    # 1. ì—°ê²° í…ŒìŠ¤íŠ¸\n    if not crawler.test_connection():\n        print(\"âŒ AWS PostgreSQL ì—°ê²° ì‹¤íŒ¨\")\n        return 0\n    \n    # 2. í…Œì´ë¸” ìƒì„±\n    if not crawler.setup_cars_table():\n        print(\"âŒ í…Œì´ë¸” ìƒì„± ì‹¤íŒ¨\")\n        return 0\n    \n    # 3. ë°ì´í„° ìƒì„±\n    print(f\"ğŸ“ ì—”ì¹´ ìŠ¤íƒ€ì¼ ë°ì´í„° {count}ê°œ ìƒì„± ì¤‘...\")\n    cars_data = crawler.generate_encar_data(count)\n    \n    # 4. AWS DBì— ì €ì¥\n    if crawler.save_to_aws_db(cars_data):\n        # 5. ìƒ˜í”Œ ë°ì´í„° í™•ì¸\n        crawler.get_sample_data(10)\n        print(f\"\\nâœ… AWS ì—”ì¹´ í¬ë¡¤ë§ ì™„ë£Œ! ì´ {len(cars_data)}ëŒ€ ë°ì´í„° ì €ì¥\")\n        return len(cars_data)\n    else:\n        print(\"âŒ ë°ì´í„° ì €ì¥ ì‹¤íŒ¨\")\n        return 0\n\nif __name__ == \"__main__\":\n    # ì§ì ‘ ì‹¤í–‰ ì‹œ\n    count = run_aws_encar_crawler(count=150)\n    print(f\"ğŸ‰ í¬ë¡¤ë§ ê²°ê³¼: {count}ëŒ€ ì°¨ëŸ‰ ë°ì´í„° AWS PostgreSQL ì €ì¥ ì™„ë£Œ!\")","size_bytes":13742},"data/encar_crawler.py":{"content":"\"\"\"\nì—”ì¹´ ì¤‘ê³ ì°¨ ë°ì´í„° í¬ë¡¤ëŸ¬\nì‹¤ì‹œê°„ìœ¼ë¡œ ì—”ì¹´ ì‚¬ì´íŠ¸ì—ì„œ ì¤‘ê³ ì°¨ ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.\n\"\"\"\nimport requests\nimport time\nimport logging\nimport json\nfrom typing import List, Dict, Any, Optional\nfrom urllib.parse import urlencode, urljoin\nimport random\nfrom dataclasses import dataclass\nimport os\nfrom sqlalchemy import create_engine, text\nimport pandas as pd\n\n# ë¡œê¹… ì„¤ì •\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\n@dataclass\nclass EncarVehicle:\n    \"\"\"ì—”ì¹´ ì°¨ëŸ‰ ì •ë³´\"\"\"\n    vehicle_id: str\n    make: str\n    model: str\n    year: int\n    price: int\n    mileage: int\n    fuel_type: str\n    category: str\n    transmission: str\n    location: str\n    title: str\n    url: str\n    image_urls: List[str]\n    seller_type: str\n    created_at: str\n\nclass EncarCrawler:\n    \"\"\"ì—”ì¹´ í¬ë¡¤ëŸ¬\"\"\"\n    \n    def __init__(self):\n        self.base_url = \"https://www.encar.com\"\n        self.api_url = \"https://www.encar.com/fc/service/getList.do\"\n        self.session = requests.Session()\n        \n        # User-Agent ì„¤ì • (ë´‡ ì°¨ë‹¨ ë°©ì§€)\n        self.session.headers.update({\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36',\n            'Accept': 'application/json, text/javascript, */*; q=0.01',\n            'Accept-Language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',\n            'Accept-Encoding': 'gzip, deflate, br',\n            'Connection': 'keep-alive',\n            'Referer': 'https://www.encar.com/',\n            'X-Requested-With': 'XMLHttpRequest'\n        })\n        \n        # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°\n        self.db_url = os.environ.get('DATABASE_URL')\n        if self.db_url:\n            self.engine = create_engine(self.db_url)\n        \n    def get_vehicle_list(self, \n                        make: Optional[str] = None,\n                        min_price: int = 0,\n                        max_price: int = 50000000,\n                        start_year: int = 2015,\n                        page: int = 1,\n                        count: int = 50) -> List[Dict]:\n        \"\"\"ì°¨ëŸ‰ ëª©ë¡ ì¡°íšŒ\"\"\"\n        \n        params = {\n            'count': min(count, 50),  # ìµœëŒ€ 50ê°œ\n            'page': page,\n            'sort': 'ModifiedDate',  # ìµœì‹ ìˆœ\n            'order': 'desc',\n            'fuel': '',  # ì—°ë£Œ íƒ€ì… (ë¹ˆ ê°’ì€ ì „ì²´)\n            'carType': '',  # ì°¨ì¢… (ë¹ˆ ê°’ì€ ì „ì²´)\n            'bodyType': '',  # ë°”ë”” íƒ€ì…\n            'minYear': start_year,\n            'maxYear': 2024,\n            'minPrice': min_price // 10000,  # ë§Œì› ë‹¨ìœ„\n            'maxPrice': max_price // 10000,  # ë§Œì› ë‹¨ìœ„\n        }\n        \n        if make:\n            params['manufacturer'] = make\n            \n        try:\n            logger.info(f\"ì—”ì¹´ ë°ì´í„° ìš”ì²­ ì¤‘... (í˜ì´ì§€: {page}, ë¸Œëœë“œ: {make})\")\n            \n            response = self.session.get(self.api_url, params=params, timeout=10)\n            response.raise_for_status()\n            \n            # JSON ì‘ë‹µ íŒŒì‹±\n            data = response.json()\n            \n            if 'SearchResults' in data:\n                vehicles = data['SearchResults']\n                logger.info(f\"ì°¨ëŸ‰ {len(vehicles)}ëŒ€ ì¡°íšŒ ì„±ê³µ\")\n                return vehicles\n            else:\n                logger.warning(\"ì‘ë‹µì—ì„œ SearchResultsë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ\")\n                return []\n                \n        except requests.exceptions.RequestException as e:\n            logger.error(f\"ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: {e}\")\n            return []\n        except json.JSONDecodeError as e:\n            logger.error(f\"JSON íŒŒì‹± ì˜¤ë¥˜: {e}\")\n            return []\n        except Exception as e:\n            logger.error(f\"ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜: {e}\")\n            return []\n    \n    def parse_vehicle_data(self, raw_vehicle: Dict) -> Optional[EncarVehicle]:\n        \"\"\"ì°¨ëŸ‰ ë°ì´í„° íŒŒì‹±\"\"\"\n        try:\n            # ê°€ê²© ì²˜ë¦¬ (ë§Œì› â†’ ì›)\n            price_str = str(raw_vehicle.get('Price', '0')).replace(',', '').replace('ë§Œì›', '')\n            price = int(float(price_str) * 10000) if price_str.replace('.', '').isdigit() else 0\n            \n            # ì£¼í–‰ê±°ë¦¬ ì²˜ë¦¬\n            mileage_str = str(raw_vehicle.get('Mileage', '0')).replace(',', '').replace('km', '')\n            mileage = int(mileage_str) if mileage_str.isdigit() else 0\n            \n            # ì—°ì‹ ì²˜ë¦¬\n            year_str = str(raw_vehicle.get('Year', '0')).replace('ë…„', '')\n            year = int(year_str) if year_str.isdigit() else 2020\n            \n            # ì´ë¯¸ì§€ URL ì²˜ë¦¬\n            photo_url = raw_vehicle.get('Photo', '')\n            image_urls = [photo_url] if photo_url else []\n            \n            # ì°¨ëŸ‰ ì •ë³´ ê°ì²´ ìƒì„±\n            vehicle = EncarVehicle(\n                vehicle_id=str(raw_vehicle.get('Id', '')),\n                make=raw_vehicle.get('Manufacturer', '').strip(),\n                model=raw_vehicle.get('Model', '').strip(),\n                year=year,\n                price=price,\n                mileage=mileage,\n                fuel_type=raw_vehicle.get('FuelType', 'ê°€ì†”ë¦°'),\n                category=self._determine_category(raw_vehicle.get('Badge', ''), raw_vehicle.get('Model', '')),\n                transmission=raw_vehicle.get('Transmission', 'ìë™'),\n                location=raw_vehicle.get('Location', 'ì„œìš¸'),\n                title=f\"{raw_vehicle.get('Manufacturer', '')} {raw_vehicle.get('Model', '')}\",\n                url=f\"https://www.encar.com/dc/dc_cardetailview.do?carid={raw_vehicle.get('Id', '')}\",\n                image_urls=image_urls,\n                seller_type=raw_vehicle.get('SellType', 'ì¼ë°˜'),\n                created_at=raw_vehicle.get('RegDate', '')\n            )\n            \n            return vehicle\n            \n        except Exception as e:\n            logger.error(f\"ì°¨ëŸ‰ ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜: {e}\")\n            return None\n    \n    def _determine_category(self, badge: str, model: str) -> str:\n        \"\"\"ì°¨ëŸ‰ ì¹´í…Œê³ ë¦¬ ê²°ì •\"\"\"\n        badge_lower = badge.lower()\n        model_lower = model.lower()\n        \n        if any(x in badge_lower or x in model_lower for x in ['suv', 'ì˜ë Œí† ', 'íˆ¬ì‹¼', 'ìŠ¤í¬í‹°ì§€', 'q5', 'x3', 'glc']):\n            return 'SUV'\n        elif any(x in badge_lower or x in model_lower for x in ['ì„¸ë‹¨', 'ì˜ë‚˜íƒ€', 'ì•„ë°˜ë–¼', 'k5', 'k7', 'ì œë„¤ì‹œìŠ¤']):\n            return 'Sedan'\n        elif any(x in badge_lower or x in model_lower for x in ['í•´ì¹˜ë°±', 'ê³¨í”„', 'i30', 'ë²¨ë¡œìŠ¤í„°']):\n            return 'Hatchback'\n        elif any(x in badge_lower or x in model_lower for x in ['ë¯¸ë‹ˆ', 'ìŠ¤íŒŒí¬', 'ray', 'ëª¨ë‹']):\n            return 'Mini'\n        else:\n            return 'Sedan'  # ê¸°ë³¸ê°’\n    \n    def crawl_vehicles(self, \n                      target_count: int = 100,\n                      brands: List[str] = None) -> List[EncarVehicle]:\n        \"\"\"ì°¨ëŸ‰ ë°ì´í„° í¬ë¡¤ë§\"\"\"\n        \n        if not brands:\n            brands = ['í˜„ëŒ€', 'ê¸°ì•„', 'BMW', 'ë²¤ì¸ ', 'ì•„ìš°ë””', 'í† ìš”íƒ€', 'ì‰ë³´ë ˆ']\n        \n        all_vehicles = []\n        vehicles_per_brand = max(1, target_count // len(brands))\n        \n        for brand in brands:\n            logger.info(f\"{brand} ë¸Œëœë“œ í¬ë¡¤ë§ ì‹œì‘...\")\n            brand_vehicles = []\n            page = 1\n            \n            while len(brand_vehicles) < vehicles_per_brand and page <= 5:  # ìµœëŒ€ 5í˜ì´ì§€\n                raw_vehicles = self.get_vehicle_list(\n                    make=brand,\n                    page=page,\n                    count=50\n                )\n                \n                if not raw_vehicles:\n                    break\n                    \n                for raw_vehicle in raw_vehicles:\n                    if len(brand_vehicles) >= vehicles_per_brand:\n                        break\n                        \n                    vehicle = self.parse_vehicle_data(raw_vehicle)\n                    if vehicle and vehicle.price > 0:  # ìœ íš¨í•œ ì°¨ëŸ‰ë§Œ\n                        brand_vehicles.append(vehicle)\n                \n                page += 1\n                time.sleep(random.uniform(1, 3))  # ìš”ì²­ ê°„ê²© (ë´‡ ì°¨ë‹¨ ë°©ì§€)\n            \n            all_vehicles.extend(brand_vehicles)\n            logger.info(f\"{brand}: {len(brand_vehicles)}ëŒ€ ìˆ˜ì§‘ ì™„ë£Œ\")\n        \n        logger.info(f\"ì „ì²´ {len(all_vehicles)}ëŒ€ í¬ë¡¤ë§ ì™„ë£Œ\")\n        return all_vehicles\n    \n    def save_to_database(self, vehicles: List[EncarVehicle]) -> bool:\n        \"\"\"ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥\"\"\"\n        if not self.engine or not vehicles:\n            return False\n            \n        try:\n            # ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ë³€í™˜\n            vehicle_data = []\n            for vehicle in vehicles:\n                # ì•ˆì „ë“±ê¸‰ì€ ëœë¤ ìƒì„± (ì‹¤ì œë¡œëŠ” í¬ë¡¤ë§ìœ¼ë¡œ ê°€ì ¸ì™€ì•¼ í•¨)\n                safety_rating = random.randint(4, 5)\n                \n                # ì—°ë¹„ ì¶”ì • (ì‹¤ì œë¡œëŠ” í¬ë¡¤ë§ìœ¼ë¡œ ê°€ì ¸ì™€ì•¼ í•¨)\n                fuel_efficiency = self._estimate_fuel_efficiency(vehicle.fuel_type, vehicle.category)\n                \n                vehicle_data.append({\n                    'make': vehicle.make,\n                    'model': vehicle.model,\n                    'year': vehicle.year,\n                    'price': vehicle.price // 10000,  # ë§Œì› ë‹¨ìœ„\n                    'fuel_type': vehicle.fuel_type,\n                    'category': vehicle.category,\n                    'engine_size': 2.0,  # ê¸°ë³¸ê°’\n                    'fuel_efficiency': fuel_efficiency,\n                    'transmission': vehicle.transmission,\n                    'safety_rating': safety_rating,\n                    'description': f\"{vehicle.make} {vehicle.model} ({vehicle.year}ë…„, {vehicle.mileage:,}km)\"\n                })\n            \n            df = pd.DataFrame(vehicle_data)\n            \n            # ê¸°ì¡´ ë°ì´í„° ì‚­ì œ í›„ ìƒˆ ë°ì´í„° ì¶”ê°€\n            with self.engine.connect() as conn:\n                conn.execute(text(\"DELETE FROM cars WHERE id > 15\"))  # ê¸°ë³¸ 15ê°œëŠ” ìœ ì§€\n                conn.commit()\n            \n            # ìƒˆ ë°ì´í„° ì €ì¥\n            df.to_sql('cars', self.engine, if_exists='append', index=False)\n            \n            logger.info(f\"ë°ì´í„°ë² ì´ìŠ¤ì— {len(vehicle_data)}ê°œ ì°¨ëŸ‰ ì €ì¥ ì™„ë£Œ\")\n            return True\n            \n        except Exception as e:\n            logger.error(f\"ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì˜¤ë¥˜: {e}\")\n            return False\n    \n    def _estimate_fuel_efficiency(self, fuel_type: str, category: str) -> int:\n        \"\"\"ì—°ë¹„ ì¶”ì • (ì‹¤ì œë¡œëŠ” í¬ë¡¤ë§ ë°ì´í„° ì‚¬ìš©)\"\"\"\n        base_efficiency = {\n            'Sedan': 12,\n            'SUV': 10,\n            'Hatchback': 14,\n            'Mini': 16\n        }.get(category, 12)\n        \n        if fuel_type in ['í•˜ì´ë¸Œë¦¬ë“œ', 'Hybrid']:\n            return base_efficiency + 8\n        elif fuel_type in ['ì „ê¸°', 'Electric']:\n            return 25  # ì „ê¸°ì°¨ëŠ” íŠ¹ë³„ í‘œê¸°\n        else:\n            return base_efficiency\n\n# í¬ë¡¤ëŸ¬ ì‹¤í–‰ í•¨ìˆ˜\ndef run_encar_crawler(target_count: int = 50):\n    \"\"\"ì—”ì¹´ í¬ë¡¤ëŸ¬ ì‹¤í–‰\"\"\"\n    crawler = EncarCrawler()\n    \n    logger.info(\"ì—”ì¹´ í¬ë¡¤ë§ ì‹œì‘...\")\n    vehicles = crawler.crawl_vehicles(target_count=target_count)\n    \n    if vehicles:\n        success = crawler.save_to_database(vehicles)\n        if success:\n            logger.info(\"âœ… ì—”ì¹´ í¬ë¡¤ë§ ì™„ë£Œ!\")\n            return len(vehicles)\n        else:\n            logger.error(\"âŒ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì‹¤íŒ¨\")\n            return 0\n    else:\n        logger.error(\"âŒ í¬ë¡¤ë§ëœ ì°¨ëŸ‰ì´ ì—†ìŠµë‹ˆë‹¤\")\n        return 0\n\nif __name__ == \"__main__\":\n    # ì§ì ‘ ì‹¤í–‰ ì‹œ\n    count = run_encar_crawler(target_count=30)\n    print(f\"ì´ {count}ëŒ€ ì°¨ëŸ‰ ë°ì´í„° ìˆ˜ì§‘ ì™„ë£Œ!\")","size_bytes":11950},"data/encar_sample_data.py":{"content":"\"\"\"\nì—”ì¹´ ìŠ¤íƒ€ì¼ ìƒ˜í”Œ ë°ì´í„° ìƒì„±ê¸°\nì‹¤ì œ ì—”ì¹´ ì¤‘ê³ ì°¨ ë§¤ë¬¼ê³¼ ìœ ì‚¬í•œ ë°ì´í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n\"\"\"\nimport os\nimport random\nfrom sqlalchemy import create_engine, text\nimport pandas as pd\nimport logging\n\nlogger = logging.getLogger(__name__)\n\nclass EncarSampleDataGenerator:\n    \"\"\"ì—”ì¹´ ìŠ¤íƒ€ì¼ ìƒ˜í”Œ ë°ì´í„° ìƒì„±ê¸°\"\"\"\n    \n    def __init__(self):\n        self.db_url = os.environ.get('DATABASE_URL')\n        if self.db_url:\n            self.engine = create_engine(self.db_url)\n    \n    def generate_realistic_car_data(self, count: int = 100) -> list:\n        \"\"\"ì‹¤ì œ ì—”ì¹´ ë§¤ë¬¼ê³¼ ìœ ì‚¬í•œ ì°¨ëŸ‰ ë°ì´í„° ìƒì„±\"\"\"\n        \n        # ì‹¤ì œ í•œêµ­ ì¸ê¸° ì°¨ì¢… ë°ì´í„°\n        car_models = [\n            # í˜„ëŒ€\n            {'make': 'í˜„ëŒ€', 'model': 'ì•„ë°˜ë–¼', 'category': 'Sedan', 'base_price': 2500, 'fuel_efficiency': 13, 'engine_size': 1.6},\n            {'make': 'í˜„ëŒ€', 'model': 'ì˜ë‚˜íƒ€', 'category': 'Sedan', 'base_price': 3200, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'í˜„ëŒ€', 'model': 'ê·¸ëœì ¸', 'category': 'Sedan', 'base_price': 4500, 'fuel_efficiency': 10, 'engine_size': 3.0},\n            {'make': 'í˜„ëŒ€', 'model': 'íˆ¬ì‹¼', 'category': 'SUV', 'base_price': 3800, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            {'make': 'í˜„ëŒ€', 'model': 'ì‚°íƒ€í˜', 'category': 'SUV', 'base_price': 4800, 'fuel_efficiency': 9, 'engine_size': 2.5},\n            {'make': 'í˜„ëŒ€', 'model': 'i30', 'category': 'Hatchback', 'base_price': 2800, 'fuel_efficiency': 14, 'engine_size': 1.6},\n            \n            # ê¸°ì•„\n            {'make': 'ê¸°ì•„', 'model': 'K3', 'category': 'Sedan', 'base_price': 2400, 'fuel_efficiency': 13, 'engine_size': 1.6},\n            {'make': 'ê¸°ì•„', 'model': 'K5', 'category': 'Sedan', 'base_price': 3300, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'ê¸°ì•„', 'model': 'K7', 'category': 'Sedan', 'base_price': 4200, 'fuel_efficiency': 11, 'engine_size': 2.5},\n            {'make': 'ê¸°ì•„', 'model': 'ìŠ¤í¬í‹°ì§€', 'category': 'SUV', 'base_price': 3600, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            {'make': 'ê¸°ì•„', 'model': 'ì˜ë Œí† ', 'category': 'SUV', 'base_price': 4600, 'fuel_efficiency': 9, 'engine_size': 2.5},\n            {'make': 'ê¸°ì•„', 'model': 'ëª¨ë‹', 'category': 'Mini', 'base_price': 1500, 'fuel_efficiency': 16, 'engine_size': 1.0},\n            \n            # BMW\n            {'make': 'BMW', 'model': '320i', 'category': 'Sedan', 'base_price': 5500, 'fuel_efficiency': 13, 'engine_size': 2.0},\n            {'make': 'BMW', 'model': '520i', 'category': 'Sedan', 'base_price': 7200, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'BMW', 'model': 'X3', 'category': 'SUV', 'base_price': 6800, 'fuel_efficiency': 10, 'engine_size': 2.0},\n            {'make': 'BMW', 'model': 'X5', 'category': 'SUV', 'base_price': 9500, 'fuel_efficiency': 8, 'engine_size': 3.0},\n            \n            # ë²¤ì¸ \n            {'make': 'ë²¤ì¸ ', 'model': 'C200', 'category': 'Sedan', 'base_price': 6200, 'fuel_efficiency': 13, 'engine_size': 2.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'E220', 'category': 'Sedan', 'base_price': 8500, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'GLC', 'category': 'SUV', 'base_price': 7800, 'fuel_efficiency': 10, 'engine_size': 2.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'GLE', 'category': 'SUV', 'base_price': 10500, 'fuel_efficiency': 9, 'engine_size': 3.0},\n            \n            # ì•„ìš°ë””\n            {'make': 'ì•„ìš°ë””', 'model': 'A4', 'category': 'Sedan', 'base_price': 5800, 'fuel_efficiency': 13, 'engine_size': 2.0},\n            {'make': 'ì•„ìš°ë””', 'model': 'A6', 'category': 'Sedan', 'base_price': 7800, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            {'make': 'ì•„ìš°ë””', 'model': 'Q5', 'category': 'SUV', 'base_price': 6800, 'fuel_efficiency': 10, 'engine_size': 2.0},\n            \n            # í† ìš”íƒ€\n            {'make': 'í† ìš”íƒ€', 'model': 'ìº ë¦¬', 'category': 'Sedan', 'base_price': 3800, 'fuel_efficiency': 12, 'engine_size': 2.5},\n            {'make': 'í† ìš”íƒ€', 'model': 'RAV4', 'category': 'SUV', 'base_price': 4200, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            \n            # ì‰ë³´ë ˆ\n            {'make': 'ì‰ë³´ë ˆ', 'model': 'í¬ë£¨ì¦ˆ', 'category': 'Sedan', 'base_price': 2200, 'fuel_efficiency': 14, 'engine_size': 1.4},\n            {'make': 'ì‰ë³´ë ˆ', 'model': 'íŠ¸ë˜ë²„ìŠ¤', 'category': 'SUV', 'base_price': 4500, 'fuel_efficiency': 9, 'engine_size': 3.6},\n        ]\n        \n        fuel_types = ['ê°€ì†”ë¦°', 'ë””ì ¤', 'í•˜ì´ë¸Œë¦¬ë“œ', 'LPG']\n        transmissions = ['ìë™', 'ìˆ˜ë™']\n        \n        cars_data = []\n        \n        for i in range(count):\n            car = random.choice(car_models)\n            year = random.randint(2018, 2024)\n            \n            # ì—°ì‹ì— ë”°ë¥¸ ê°€ê²© ì¡°ì • (ê°ê°€ìƒê°)\n            age = 2024 - year\n            depreciation = 1 - (age * 0.12)  # ì—° 12% ê°ê°€ìƒê°\n            price = int(car['base_price'] * depreciation * random.uniform(0.85, 1.15))  # Â±15% ë³€ë™\n            \n            # ì—°ë£Œíƒ€ì…ë³„ ì—°ë¹„ ì¡°ì •\n            fuel_type = random.choice(fuel_types)\n            fuel_efficiency = car['fuel_efficiency']\n            if fuel_type == 'í•˜ì´ë¸Œë¦¬ë“œ':\n                fuel_efficiency += random.randint(6, 10)\n            elif fuel_type == 'ë””ì ¤':\n                fuel_efficiency += random.randint(2, 4)\n            elif fuel_type == 'LPG':\n                fuel_efficiency += random.randint(1, 3)\n            \n            # ì•ˆì „ë“±ê¸‰ (4-5ì )\n            safety_rating = random.choice([4, 5])\n            \n            cars_data.append({\n                'make': car['make'],\n                'model': car['model'],\n                'year': year,\n                'price': price,  # ë§Œì› ë‹¨ìœ„\n                'fuel_type': fuel_type,\n                'category': car['category'],\n                'engine_size': car['engine_size'],\n                'fuel_efficiency': fuel_efficiency,\n                'transmission': random.choice(transmissions),\n                'safety_rating': safety_rating,\n                'description': f\"{car['make']} {car['model']} {year}ë…„í˜• - ì—”ì¹´ ì¸ì¦ ë§¤ë¬¼\"\n            })\n        \n        return cars_data\n    \n    def save_to_database(self, cars_data: list) -> bool:\n        \"\"\"ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥\"\"\"\n        if not self.engine or not cars_data:\n            return False\n            \n        try:\n            df = pd.DataFrame(cars_data)\n            \n            # ê¸°ì¡´ ë°ì´í„° ì‚­ì œ í›„ ìƒˆ ë°ì´í„° ì¶”ê°€\n            with self.engine.connect() as conn:\n                conn.execute(text(\"DELETE FROM cars WHERE id > 15\"))  # ê¸°ë³¸ 15ê°œëŠ” ìœ ì§€\n                conn.commit()\n            \n            # ìƒˆ ë°ì´í„° ì €ì¥\n            df.to_sql('cars', self.engine, if_exists='append', index=False)\n            \n            logger.info(f\"ë°ì´í„°ë² ì´ìŠ¤ì— {len(cars_data)}ê°œ ì°¨ëŸ‰ ì €ì¥ ì™„ë£Œ\")\n            print(f\"âœ… {len(cars_data)}ëŒ€ ì°¨ëŸ‰ ë°ì´í„° ìƒì„± ì™„ë£Œ!\")\n            return True\n            \n        except Exception as e:\n            logger.error(f\"ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì˜¤ë¥˜: {e}\")\n            print(f\"âŒ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì‹¤íŒ¨: {e}\")\n            return False\n\ndef generate_encar_sample_data(count: int = 100):\n    \"\"\"ì—”ì¹´ ìƒ˜í”Œ ë°ì´í„° ìƒì„± ì‹¤í–‰\"\"\"\n    print(f\"ğŸš— ì—”ì¹´ ìŠ¤íƒ€ì¼ ì°¨ëŸ‰ ë°ì´í„° {count}ê°œ ìƒì„± ì¤‘...\")\n    \n    generator = EncarSampleDataGenerator()\n    cars_data = generator.generate_realistic_car_data(count)\n    \n    if generator.save_to_database(cars_data):\n        print(f\"âœ… ì´ {len(cars_data)}ëŒ€ ì°¨ëŸ‰ ë°ì´í„° ìƒì„± ë° ì €ì¥ ì™„ë£Œ!\")\n        return len(cars_data)\n    else:\n        print(\"âŒ ë°ì´í„° ì €ì¥ ì‹¤íŒ¨\")\n        return 0\n\nif __name__ == \"__main__\":\n    # ì§ì ‘ ì‹¤í–‰ ì‹œ\n    generate_encar_sample_data(80)","size_bytes":7982},"frontend/src/components/EnhancedCarCard.tsx":{"content":"import React, { useState } from 'react';\nimport {\n  Card,\n  CardContent,\n  Typography,\n  Box,\n  Chip,\n  Button,\n  Collapse,\n  IconButton,\n  Divider,\n  Stack,\n  Avatar,\n  Rating,\n  Fade,\n  Tooltip,\n} from '@mui/material';\n\ninterface CarRecommendation {\n  car_id: number;\n  make: string;\n  model: string;\n  year: number;\n  price: number;\n  fuel_type: string;\n  category: string;\n  fuel_efficiency?: number;\n  safety_rating: number;\n  description: string;\n  recommendation_reason: string;\n  score?: number;\n}\n\ninterface EnhancedCarCardProps {\n  car: CarRecommendation;\n  index: number;\n  onFinanceConsult: (car: CarRecommendation) => void;\n  onCompare: (car: CarRecommendation) => void;\n  financeLoading: boolean;\n  isSelected?: boolean;\n}\n\nconst EnhancedCarCard: React.FC<EnhancedCarCardProps> = ({\n  car,\n  index,\n  onFinanceConsult,\n  onCompare,\n  financeLoading,\n  isSelected = false,\n}) => {\n  const [expanded, setExpanded] = useState(false);\n  const [isFavorite, setIsFavorite] = useState(false);\n\n  // Generate brand icon/avatar\n  const getBrandIcon = (make: string) => {\n    const brandColors: { [key: string]: string } = {\n      'í˜„ëŒ€': '#002c5f',\n      'ê¸°ì•„': '#05141f',\n      'BMW': '#1c69d4',\n      'ë²¤ì¸ ': '#00adef',\n      'ì•„ìš°ë””': '#bb0a30',\n      'í† ìš”íƒ€': '#eb0a1e',\n      'ì‰ë³´ë ˆ': '#ffc72c',\n      'ë‹›ì‚°': '#c3002f',\n    };\n    \n    return (\n      <Avatar \n        sx={{ \n          bgcolor: brandColors[make] || '#1976d2',\n          width: 56,\n          height: 56,\n          fontSize: '1.5rem',\n          fontWeight: 'bold',\n        }}\n      >\n        {make.charAt(0)}\n      </Avatar>\n    );\n  };\n\n  const getScoreColor = (score?: number) => {\n    if (!score) return 'default';\n    if (score >= 0.8) return 'success';\n    if (score >= 0.6) return 'warning';\n    return 'error';\n  };\n\n  const formatPrice = (price: number) => {\n    if (price >= 10000) {\n      const billions = Math.floor(price / 10000);\n      const remainder = price % 10000;\n      return remainder > 0 ? `${billions}ì–µ ${remainder}ë§Œì›` : `${billions}ì–µì›`;\n    }\n    return `${price.toLocaleString()}ë§Œì›`;\n  };\n\n  return (\n    <Fade in={true} timeout={300 + index * 100}>\n      <Card \n        elevation={isSelected ? 8 : 3}\n        sx={{ \n          height: '100%', \n          display: 'flex', \n          flexDirection: 'column',\n          position: 'relative',\n          transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n          border: isSelected ? '2px solid #1976d2' : '1px solid transparent',\n          '&:hover': {\n            transform: 'translateY(-8px) scale(1.02)',\n            boxShadow: '0 12px 20px rgba(0,0,0,0.15)',\n          }\n        }}\n      >\n        {/* Ranking Badge */}\n        <Box\n          sx={{\n            position: 'absolute',\n            top: -10,\n            left: 16,\n            zIndex: 2,\n          }}\n        >\n          <Chip \n            label={`ì¶”ì²œ ${index + 1}`} \n            color=\"primary\" \n            size=\"small\"\n            sx={{\n              fontWeight: 'bold',\n              fontSize: '0.75rem',\n              boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\n            }}\n          />\n        </Box>\n\n        {/* Score Badge */}\n        {car.score && (\n          <Box\n            sx={{\n              position: 'absolute',\n              top: -10,\n              right: 16,\n              zIndex: 2,\n            }}\n          >\n            <Chip \n              label={`${Math.round((car.score || 0) * 100)}ì `} \n              color={getScoreColor(car.score)}\n              size=\"small\"\n              sx={{\n                fontWeight: 'bold',\n                fontSize: '0.75rem',\n                boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\n              }}\n            />\n          </Box>\n        )}\n\n        <CardContent sx={{ flexGrow: 1, pt: 3 }}>\n          {/* Header with Brand Icon */}\n          <Box display=\"flex\" alignItems=\"center\" gap={2} mb={2}>\n            {getBrandIcon(car.make)}\n            <Box flex={1}>\n              <Typography variant=\"h6\" sx={{ fontWeight: 600, lineHeight: 1.2 }}>\n                {car.make} {car.model}\n              </Typography>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {car.year}ë…„ â€¢ {car.category}\n              </Typography>\n            </Box>\n            <IconButton\n              onClick={() => setIsFavorite(!isFavorite)}\n              sx={{ color: isFavorite ? '#f44336' : '#ccc' }}\n            >\n              {isFavorite ? 'â¤ï¸' : 'ğŸ¤'}\n            </IconButton>\n          </Box>\n          \n          {/* Price - Most Prominent */}\n          <Box textAlign=\"center\" mb={2}>\n            <Typography \n              variant=\"h4\" \n              sx={{ \n                fontWeight: 700,\n                background: 'linear-gradient(45deg, #1976d2 30%, #42a5f5 90%)',\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n                backgroundClip: 'text',\n              }}\n            >\n              {formatPrice(car.price)}\n            </Typography>\n          </Box>\n          \n          {/* Key Specs */}\n          <Stack direction=\"row\" spacing={1} justifyContent=\"center\" mb={2} flexWrap=\"wrap\">\n            <Chip \n              label={car.fuel_type} \n              size=\"small\" \n              variant=\"outlined\"\n              color=\"info\"\n            />\n            {car.fuel_efficiency && (\n              <Chip \n                label={`${car.fuel_efficiency}km/L`} \n                size=\"small\" \n                variant=\"outlined\"\n                color=\"success\"\n              />\n            )}\n            <Chip \n              label={\n                <Box display=\"flex\" alignItems=\"center\" gap={0.5}>\n                  <span>ì•ˆì „</span>\n                  <Rating \n                    value={car.safety_rating} \n                    max={5} \n                    size=\"small\" \n                    readOnly \n                    sx={{ fontSize: '0.8rem' }}\n                  />\n                </Box>\n              }\n              size=\"small\" \n              variant=\"outlined\"\n              color=\"warning\"\n            />\n          </Stack>\n          \n          {/* Recommendation Reason */}\n          <Box mb={2}>\n            <Typography \n              variant=\"body2\" \n              sx={{ \n                fontWeight: 500,\n                color: '#1976d2',\n                textAlign: 'center',\n                fontStyle: 'italic',\n              }}\n            >\n              \"â­ {car.recommendation_reason}\"\n            </Typography>\n          </Box>\n\n          {/* Expandable Details */}\n          <Box>\n            <Button\n              variant=\"text\"\n              onClick={() => setExpanded(!expanded)}\n              sx={{ width: '100%', mb: 1 }}\n            >\n              {expanded ? 'â–² ê°„ë‹¨íˆ' : 'â–¼ ìì„¸íˆ'}\n            </Button>\n            \n            <Collapse in={expanded}>\n              <Divider sx={{ my: 1 }} />\n              <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mb: 2 }}>\n                {car.description}\n              </Typography>\n              \n              {/* Detailed Specs */}\n              <Box display=\"grid\" gridTemplateColumns=\"1fr 1fr\" gap={1} mb={2}>\n                <Box>\n                  <Typography variant=\"caption\" color=\"textSecondary\">\n                    ì—°ì‹\n                  </Typography>\n                  <Typography variant=\"body2\" fontWeight=\"500\">\n                    {car.year}ë…„\n                  </Typography>\n                </Box>\n                <Box>\n                  <Typography variant=\"caption\" color=\"textSecondary\">\n                    ì°¨ì¢…\n                  </Typography>\n                  <Typography variant=\"body2\" fontWeight=\"500\">\n                    {car.category}\n                  </Typography>\n                </Box>\n                <Box>\n                  <Typography variant=\"caption\" color=\"textSecondary\">\n                    ì—°ë£Œ\n                  </Typography>\n                  <Typography variant=\"body2\" fontWeight=\"500\">\n                    {car.fuel_type}\n                  </Typography>\n                </Box>\n                <Box>\n                  <Typography variant=\"caption\" color=\"textSecondary\">\n                    ì—°ë¹„\n                  </Typography>\n                  <Typography variant=\"body2\" fontWeight=\"500\">\n                    {car.fuel_efficiency}km/L\n                  </Typography>\n                </Box>\n              </Box>\n            </Collapse>\n          </Box>\n          \n          {/* Action Buttons */}\n          <Stack spacing={1} mt={2}>\n            <Button\n              variant=\"contained\"\n              onClick={() => onFinanceConsult(car)}\n              disabled={financeLoading}\n              sx={{\n                py: 1.2,\n                fontWeight: 600,\n                background: 'linear-gradient(45deg, #4caf50 30%, #66bb6a 90%)',\n                '&:hover': {\n                  background: 'linear-gradient(45deg, #388e3c 30%, #4caf50 90%)',\n                }\n              }}\n            >\n              {financeLoading ? 'ğŸ’° ìƒë‹´ ì¤‘...' : 'ğŸ’° ê¸ˆìœµ ìƒë‹´'}\n            </Button>\n            \n            <Stack direction=\"row\" spacing={1}>\n              <Button\n                variant=\"outlined\"\n                onClick={() => onCompare(car)}\n                sx={{ flex: 1 }}\n              >\n                ğŸ“Š ë¹„êµ\n              </Button>\n              <Tooltip title=\"ì°¨ëŸ‰ ì •ë³´ ê³µìœ \">\n                <Button\n                  variant=\"outlined\"\n                  sx={{ minWidth: 'auto', px: 1.5 }}\n                >\n                  ğŸ“¤\n                </Button>\n              </Tooltip>\n            </Stack>\n          </Stack>\n        </CardContent>\n      </Card>\n    </Fade>\n  );\n};\n\nexport default EnhancedCarCard;","size_bytes":9810},"frontend/src/components/EnhancedHeader.tsx":{"content":"import React from 'react';\nimport {\n  AppBar,\n  Toolbar,\n  Typography,\n  Box,\n  Container,\n  Chip,\n  Button,\n} from '@mui/material';\n\ninterface EnhancedHeaderProps {\n  onStartChat: () => void;\n}\n\nconst EnhancedHeader: React.FC<EnhancedHeaderProps> = ({ onStartChat }) => {\n  return (\n    <AppBar \n      position=\"static\" \n      elevation={0}\n      sx={{\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n        mb: 4,\n      }}\n    >\n      <Container maxWidth=\"lg\">\n        <Toolbar sx={{ justifyContent: 'space-between', py: 2 }}>\n          <Box display=\"flex\" alignItems=\"center\" gap={2}>\n            <Typography \n              variant=\"h4\" \n              component=\"h1\" \n              sx={{ \n                fontWeight: 700,\n                background: 'linear-gradient(45deg, #fff 30%, #e3f2fd 90%)',\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n                backgroundClip: 'text',\n              }}\n            >\n              ğŸš— CarFin AI\n            </Typography>\n            <Chip \n              label=\"Beta\" \n              size=\"small\" \n              sx={{ \n                backgroundColor: 'rgba(255,255,255,0.2)',\n                color: 'white',\n                fontWeight: 600,\n              }}\n            />\n          </Box>\n          \n          <Box display=\"flex\" alignItems=\"center\" gap={2}>\n            <Chip \n              label=\"ğŸ¤– CrewAI ë©€í‹°ì—ì´ì „íŠ¸\" \n              variant=\"outlined\"\n              sx={{ \n                color: 'white',\n                borderColor: 'rgba(255,255,255,0.5)',\n                '&:hover': {\n                  backgroundColor: 'rgba(255,255,255,0.1)',\n                }\n              }}\n            />\n            <Chip \n              label=\"ğŸ§  PyCaret ML\" \n              variant=\"outlined\"\n              sx={{ \n                color: 'white',\n                borderColor: 'rgba(255,255,255,0.5)',\n                '&:hover': {\n                  backgroundColor: 'rgba(255,255,255,0.1)',\n                }\n              }}\n            />\n            <Button\n              variant=\"contained\"\n              onClick={onStartChat}\n              sx={{\n                backgroundColor: 'rgba(255,255,255,0.2)',\n                color: 'white',\n                fontWeight: 600,\n                borderRadius: 3,\n                px: 3,\n                '&:hover': {\n                  backgroundColor: 'rgba(255,255,255,0.3)',\n                }\n              }}\n            >\n              ğŸ’¬ AI ìƒë‹´ ì‹œì‘\n            </Button>\n          </Box>\n        </Toolbar>\n        \n        {/* Hero Section */}\n        <Box textAlign=\"center\" pb={4}>\n          <Typography \n            variant=\"h5\" \n            sx={{ \n              color: 'rgba(255,255,255,0.9)',\n              fontWeight: 400,\n              mb: 1,\n            }}\n          >\n            ì¸ê³µì§€ëŠ¥ì´ ì¶”ì²œí•˜ëŠ” ì™„ë²½í•œ ì°¨ëŸ‰\n          </Typography>\n          <Typography \n            variant=\"body1\" \n            sx={{ \n              color: 'rgba(255,255,255,0.7)',\n              maxWidth: 600,\n              mx: 'auto',\n            }}\n          >\n            ì—”ì¹´ ì‹¤ì œ ë§¤ë¬¼ ë°ì´í„°ì™€ AI ì „ë¬¸ê°€ê°€ ë‹¹ì‹ ì—ê²Œ ìµœì ì˜ ì°¨ëŸ‰ê³¼ ê¸ˆìœµ ì˜µì…˜ì„ ì œì•ˆí•©ë‹ˆë‹¤\n          </Typography>\n        </Box>\n      </Container>\n    </AppBar>\n  );\n};\n\nexport default EnhancedHeader;","size_bytes":3391},"frontend/src/components/GuidedInputPanel.tsx":{"content":"import React, { useState } from 'react';\nimport {\n  Box,\n  Typography,\n  TextField,\n  Chip,\n  Slider,\n  Button,\n  Paper,\n  Grid,\n  Stack,\n  Fade,\n  Collapse,\n  IconButton,\n} from '@mui/material';\n\ninterface GuidedInputPanelProps {\n  onSubmit: (data: {\n    message: string;\n    budget: number;\n    filters: {\n      purpose?: string;\n      category?: string;\n      fuel?: string;\n      transmission?: string;\n    };\n  }) => void;\n  loading: boolean;\n}\n\nconst GuidedInputPanel: React.FC<GuidedInputPanelProps> = ({ onSubmit, loading }) => {\n  const [message, setMessage] = useState('');\n  const [budget, setBudget] = useState(4000);\n  const [showAdvanced, setShowAdvanced] = useState(false);\n  \n  // Quick pick filters\n  const [selectedPurpose, setSelectedPurpose] = useState<string | null>(null);\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n  const [selectedFuel, setSelectedFuel] = useState<string | null>(null);\n  const [selectedTransmission, setSelectedTransmission] = useState<string | null>(null);\n\n  // Quick pick options\n  const purposes = [\n    'ì²«ì°¨ êµ¬ì…', 'ê°€ì¡±ìš©', 'ì¶œí‡´ê·¼ìš©', 'ì£¼ë§ë“œë¼ì´ë¸Œ', 'ì‚¬ì—…ìš©', 'ì—°ë¹„ì¤‘ì‹¬'\n  ];\n  \n  const categories = [\n    'Sedan', 'SUV', 'Hatchback', 'Mini'\n  ];\n  \n  const fuels = [\n    'ê°€ì†”ë¦°', 'ë””ì ¤', 'í•˜ì´ë¸Œë¦¬ë“œ', 'ì „ê¸°', 'LPG'\n  ];\n  \n  const transmissions = [\n    'ìë™', 'ìˆ˜ë™', 'CVT'\n  ];\n\n  // Suggested prompts\n  const suggestions = [\n    \"30ëŒ€ ì§ì¥ì¸ìš© ì—°ë¹„ ì¢‹ì€ ì²« ì°¨ ì¶”ì²œí•´ì£¼ì„¸ìš”\",\n    \"4ì¸ ê°€ì¡±ìš© ì•ˆì „í•œ SUVë¥¼ ì°¾ê³  ìˆì–´ìš”\",\n    \"ì¶œí‡´ê·¼ìš©ìœ¼ë¡œ ê²½ì œì ì¸ ì†Œí˜•ì°¨ê°€ í•„ìš”í•´ìš”\",\n    \"ì£¼ë§ ë“œë¼ì´ë¸Œìš© ìŠ¤íƒ€ì¼ë¦¬ì‰¬í•œ ì°¨ëŸ‰ ì¶”ì²œ\",\n    \"ì—°ë¹„ì™€ ì‹¤ìš©ì„±ì„ ëª¨ë‘ ê°–ì¶˜ ì°¨ëŸ‰ì´ í•„ìš”í•´ìš”\"\n  ];\n\n  const handleSubmit = () => {\n    let finalMessage = message;\n    \n    // Add selected filters to message if they exist\n    const filterParts = [];\n    if (selectedPurpose) filterParts.push(`ìš©ë„: ${selectedPurpose}`);\n    if (selectedCategory) filterParts.push(`ì°¨ì¢…: ${selectedCategory}`);\n    if (selectedFuel) filterParts.push(`ì—°ë£Œ: ${selectedFuel}`);\n    if (selectedTransmission) filterParts.push(`ë³€ì†ê¸°: ${selectedTransmission}`);\n    \n    if (filterParts.length > 0) {\n      finalMessage = `${message} (${filterParts.join(', ')})`;\n    }\n\n    onSubmit({\n      message: finalMessage,\n      budget,\n      filters: {\n        purpose: selectedPurpose || undefined,\n        category: selectedCategory || undefined,\n        fuel: selectedFuel || undefined,\n        transmission: selectedTransmission || undefined,\n      }\n    });\n  };\n\n  const formatBudget = (value: number) => `${value.toLocaleString()}ë§Œì›`;\n\n  const isFormValid = message.trim() || selectedPurpose || selectedCategory;\n\n  return (\n    <Paper \n      elevation={3} \n      sx={{ \n        p: 4, \n        mb: 4,\n        background: 'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)',\n        borderRadius: 3,\n      }}\n    >\n      <Box mb={3}>\n        <Typography variant=\"h5\" gutterBottom sx={{ fontWeight: 600, color: '#1976d2' }}>\n          ğŸ¯ AI ì°¨ëŸ‰ ì¶”ì²œ ë°›ê¸°\n        </Typography>\n        <Typography variant=\"body1\" color=\"textSecondary\">\n          ì›í•˜ëŠ” ì¡°ê±´ì„ ì„ íƒí•˜ê±°ë‚˜ ììœ ë¡­ê²Œ ì„¤ëª…í•´ë³´ì„¸ìš”\n        </Typography>\n      </Box>\n\n      {/* Quick Pick Filters */}\n      <Box mb={3}>\n        <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 500 }}>\n          ë¹ ë¥¸ ì„ íƒ\n        </Typography>\n        \n        {/* Purpose */}\n        <Box mb={2}>\n          <Typography variant=\"subtitle2\" gutterBottom color=\"textSecondary\">\n            êµ¬ë§¤ ëª©ì \n          </Typography>\n          <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\" useFlexGap>\n            {purposes.map((purpose) => (\n              <Chip\n                key={purpose}\n                label={purpose}\n                clickable\n                color={selectedPurpose === purpose ? \"primary\" : \"default\"}\n                variant={selectedPurpose === purpose ? \"filled\" : \"outlined\"}\n                onClick={() => setSelectedPurpose(selectedPurpose === purpose ? null : purpose)}\n                sx={{ mb: 1 }}\n              />\n            ))}\n          </Stack>\n        </Box>\n\n        {/* Category */}\n        <Box mb={2}>\n          <Typography variant=\"subtitle2\" gutterBottom color=\"textSecondary\">\n            ì°¨ì¢…\n          </Typography>\n          <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\" useFlexGap>\n            {categories.map((category) => (\n              <Chip\n                key={category}\n                label={category}\n                clickable\n                color={selectedCategory === category ? \"secondary\" : \"default\"}\n                variant={selectedCategory === category ? \"filled\" : \"outlined\"}\n                onClick={() => setSelectedCategory(selectedCategory === category ? null : category)}\n                sx={{ mb: 1 }}\n              />\n            ))}\n          </Stack>\n        </Box>\n\n        {/* Advanced Filters */}\n        <Box>\n          <Button\n            variant=\"text\"\n            onClick={() => setShowAdvanced(!showAdvanced)}\n            sx={{ mb: 1 }}\n          >\n            {showAdvanced ? 'â–¼' : 'â–¶'} ìƒì„¸ ì˜µì…˜\n          </Button>\n          \n          <Collapse in={showAdvanced}>\n            <Box mt={2}>\n              {/* Fuel Type */}\n              <Box mb={2}>\n                <Typography variant=\"subtitle2\" gutterBottom color=\"textSecondary\">\n                  ì—°ë£Œ íƒ€ì…\n                </Typography>\n                <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\" useFlexGap>\n                  {fuels.map((fuel) => (\n                    <Chip\n                      key={fuel}\n                      label={fuel}\n                      clickable\n                      color={selectedFuel === fuel ? \"success\" : \"default\"}\n                      variant={selectedFuel === fuel ? \"filled\" : \"outlined\"}\n                      onClick={() => setSelectedFuel(selectedFuel === fuel ? null : fuel)}\n                      sx={{ mb: 1 }}\n                    />\n                  ))}\n                </Stack>\n              </Box>\n\n              {/* Transmission */}\n              <Box mb={2}>\n                <Typography variant=\"subtitle2\" gutterBottom color=\"textSecondary\">\n                  ë³€ì†ê¸°\n                </Typography>\n                <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\" useFlexGap>\n                  {transmissions.map((transmission) => (\n                    <Chip\n                      key={transmission}\n                      label={transmission}\n                      clickable\n                      color={selectedTransmission === transmission ? \"info\" : \"default\"}\n                      variant={selectedTransmission === transmission ? \"filled\" : \"outlined\"}\n                      onClick={() => setSelectedTransmission(selectedTransmission === transmission ? null : transmission)}\n                      sx={{ mb: 1 }}\n                    />\n                  ))}\n                </Stack>\n              </Box>\n            </Box>\n          </Collapse>\n        </Box>\n      </Box>\n\n      {/* Budget Slider */}\n      <Box mb={3}>\n        <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 500 }}>\n          ì˜ˆì‚° ë²”ìœ„\n        </Typography>\n        <Box px={2}>\n          <Slider\n            value={budget}\n            onChange={(_, value) => setBudget(value as number)}\n            min={1000}\n            max={10000}\n            step={100}\n            marks={[\n              { value: 1000, label: '1ì²œë§Œì›' },\n              { value: 3000, label: '3ì²œë§Œì›' },\n              { value: 5000, label: '5ì²œë§Œì›' },\n              { value: 8000, label: '8ì²œë§Œì›' },\n              { value: 10000, label: '1ì–µì›' },\n            ]}\n            valueLabelDisplay=\"auto\"\n            valueLabelFormat={formatBudget}\n            sx={{ mt: 2, mb: 1 }}\n          />\n          <Typography variant=\"body2\" color=\"primary\" textAlign=\"center\" fontWeight=\"bold\">\n            í˜„ì¬ ì˜ˆì‚°: {formatBudget(budget)}\n          </Typography>\n        </Box>\n      </Box>\n\n      {/* Free Text Input */}\n      <Box mb={3}>\n        <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 500 }}>\n          ìƒì„¸ ìš”ì²­ì‚¬í•­ (ì„ íƒ)\n        </Typography>\n        <TextField\n          fullWidth\n          multiline\n          rows={3}\n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n          placeholder=\"ë” êµ¬ì²´ì ì¸ ìš”êµ¬ì‚¬í•­ì´ ìˆë‹¤ë©´ ììœ ë¡­ê²Œ ì„¤ëª…í•´ì£¼ì„¸ìš”...\"\n          variant=\"outlined\"\n          disabled={loading}\n          sx={{ mb: 2 }}\n        />\n        \n        {/* Suggestion chips */}\n        <Box>\n          <Typography variant=\"subtitle2\" gutterBottom color=\"textSecondary\">\n            ğŸ’¡ ì¶”ì²œ ë¬¸êµ¬ (í´ë¦­í•´ì„œ ì‚¬ìš©)\n          </Typography>\n          <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\" useFlexGap>\n            {suggestions.map((suggestion, index) => (\n              <Chip\n                key={index}\n                label={suggestion}\n                clickable\n                variant=\"outlined\"\n                size=\"small\"\n                onClick={() => setMessage(suggestion)}\n                sx={{ mb: 1, fontSize: '0.75rem' }}\n              />\n            ))}\n          </Stack>\n        </Box>\n      </Box>\n\n      {/* Submit Button */}\n      <Box textAlign=\"center\">\n        <Button\n          variant=\"contained\"\n          size=\"large\"\n          onClick={handleSubmit}\n          disabled={loading || !isFormValid}\n          sx={{\n            px: 6,\n            py: 1.5,\n            fontSize: '1.1rem',\n            fontWeight: 600,\n            borderRadius: 3,\n            background: 'linear-gradient(45deg, #1976d2 30%, #42a5f5 90%)',\n            '&:hover': {\n              background: 'linear-gradient(45deg, #1565c0 30%, #1976d2 90%)',\n            }\n          }}\n        >\n          {loading ? 'ğŸ¤– AI ë¶„ì„ ì¤‘...' : 'ğŸš€ ë§ì¶¤ ì¶”ì²œ ë°›ê¸°'}\n        </Button>\n        \n        {isFormValid && (\n          <Fade in={true}>\n            <Typography variant=\"body2\" color=\"success.main\" sx={{ mt: 1 }}>\n              âœ… ì¡°ê±´ì´ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤\n            </Typography>\n          </Fade>\n        )}\n      </Box>\n    </Paper>\n  );\n};\n\nexport default GuidedInputPanel;","size_bytes":10354},"frontend/src/components/ChatBotContainer.tsx":{"content":"import { useState, useEffect, useRef } from 'react';\nimport {\n  Container,\n  Box,\n  Typography,\n  LinearProgress,\n  AppBar,\n  Toolbar,\n  IconButton\n} from '@mui/material';\n// @ts-ignore\nimport { Close, Logout, ArrowBack } from '@mui/icons-material';\nimport ChatBubble from './ChatBubble';\nimport ChatInput from './ChatInput';\nimport { apiClient } from '../services/apiClient';\nimport type { UserRegistration, UserPreferences } from '../services/apiClient';\n\n// ì±—ë´‡ ë‹¨ê³„ë³„ ìƒíƒœ\ntype ChatStep = 'welcome' | 'signup' | 'preferences' | 'consultation';\n\n// ë©”ì‹œì§€ íƒ€ì…\ninterface ChatMessage {\n  id: string;\n  type: 'user' | 'bot';\n  message: string;\n  timestamp: Date;\n  options?: string[];\n}\n\n// ì‚¬ìš©ì ì •ë³´ íƒ€ì… (ë°±ì—”ë“œ í˜¸í™˜)\ninterface UserInfo {\n  username?: string;\n  email?: string;\n  fullName?: string;\n  full_name?: string;  // ë°±ì—”ë“œ í˜¸í™˜\n  age?: number;\n  phone?: string;\n}\n\n// ì„ í˜¸ë„ ì •ë³´ íƒ€ì… (ë°±ì—”ë“œ í˜¸í™˜)\ninterface ChatBotPreferences {\n  budgetMin?: number;\n  budgetMax?: number;\n  fuelType?: string;\n  category?: string;\n  transmission?: string;\n  familySize?: number;\n  usagePurpose?: string;\n}\n\n// Props íƒ€ì… ì •ì˜\ninterface ChatBotContainerProps {\n  onBackToLanding: () => void;\n}\n\n// ë©”ì¸ ChatBot ì»¨í…Œì´ë„ˆ êµ¬í˜„\nexport default function ChatBotContainer({ onBackToLanding }: ChatBotContainerProps) {\n  const [currentStep, setCurrentStep] = useState<ChatStep>('welcome');\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [userInfo, setUserInfo] = useState<UserInfo>({});\n  const [preferences, setPreferences] = useState<ChatBotPreferences>({});\n  const [isTyping, setIsTyping] = useState(false);\n  const [currentUserId, setCurrentUserId] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // ë©”ì‹œì§€ ìë™ ìŠ¤í¬ë¡¤\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // ì´ˆê¸° ì›°ì»´ ë©”ì‹œì§€\n  useEffect(() => {\n    addBotMessage(\n      \"ì•ˆë…•í•˜ì„¸ìš”! ğŸš— CarFin AI ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\\n\\n\" +\n      \"ë§ì¶¤í˜• ì°¨ëŸ‰ ì¶”ì²œê³¼ ê¸ˆìœµ ìƒë‹´ì„ ìœ„í•´ ê°„ë‹¨í•œ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê² ìŠµë‹ˆë‹¤.\\n\\n\" +\n      \"ì‹œì‘í•˜ì‹œê² ì–´ìš”?\",\n      ['ë„¤, ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤!', 'ë” ì•Œì•„ë³´ê¸°']\n    );\n  }, []);\n\n  // ì§„í–‰ë¥  ê³„ì‚°\n  const getProgressValue = () => {\n    switch (currentStep) {\n      case 'welcome': return 0;\n      case 'signup': return 25;\n      case 'preferences': return 50;\n      case 'consultation': return 100;\n      default: return 0;\n    }\n  };\n\n  // ë´‡ ë©”ì‹œì§€ ì¶”ê°€ (íƒ€ì´í•‘ íš¨ê³¼)\n  const addBotMessage = (message: string, options?: string[]) => {\n    setIsTyping(true);\n    \n    setTimeout(() => {\n      setMessages(prev => [...prev, {\n        id: Date.now().toString(),\n        type: 'bot',\n        message,\n        timestamp: new Date(),\n        options\n      }]);\n      setIsTyping(false);\n    }, 1000 + Math.random() * 1000); // 1-2ì´ˆ íƒ€ì´í•‘ ì‹œê°„\n  };\n\n  // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€\n  const addUserMessage = (message: string) => {\n    setMessages(prev => [...prev, {\n      id: Date.now().toString(),\n      type: 'user',\n      message,\n      timestamp: new Date()\n    }]);\n  };\n\n  // ë©”ì‹œì§€ ì²˜ë¦¬ ë¡œì§\n  const handleMessage = (message: string) => {\n    addUserMessage(message);\n    handleUserResponse(message);\n  };\n\n  // ì˜µì…˜ í´ë¦­ ì²˜ë¦¬\n  const handleOptionClick = (option: string) => {\n    handleMessage(option);\n  };\n\n  // ì‚¬ìš©ì ì‘ë‹µ ì²˜ë¦¬\n  const handleUserResponse = (message: string) => {\n    switch (currentStep) {\n      case 'welcome':\n        handleWelcomeResponse(message);\n        break;\n      case 'signup':\n        handleSignupResponse(message);\n        break;\n      case 'preferences':\n        handlePreferencesResponse(message);\n        break;\n      case 'consultation':\n        handleConsultationResponse(message);\n        break;\n    }\n  };\n\n  // ì›°ì»´ ë‹¨ê³„ ì‘ë‹µ ì²˜ë¦¬\n  const handleWelcomeResponse = (message: string) => {\n    if (message.includes('ì‹œì‘') || message.includes('ë„¤')) {\n      setCurrentStep('signup');\n        addBotMessage(\n        \"ì¢‹ìŠµë‹ˆë‹¤! ë¨¼ì € íšŒì›ê°€ì…ì„ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.\\n\\n\" +\n        \"ì„±í•¨ì„ ì•Œë ¤ì£¼ì„¸ìš”.\",\n        []\n      );\n    } else if (message.includes('ì•Œì•„ë³´ê¸°')) {\n      addBotMessage(\n        \"CarFin AIëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤:\\n\\n\" +\n        \"ğŸ¯ AI ê¸°ë°˜ ë§ì¶¤ ì°¨ëŸ‰ ì¶”ì²œ\\n\" +\n        \"ğŸ’³ ê¸ˆìœµ ìƒí’ˆ ë¹„êµ ë° ìƒë‹´\\n\" +\n        \"ğŸ“Š ì°¨ëŸ‰ ê°€ê²© ë° ì‹œì¥ ë¶„ì„\\n\\n\" +\n        \"ì´ì œ ì‹œì‘í•´ë³¼ê¹Œìš”?\",\n        ['ë„¤, ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤!']\n      );\n    }\n  };\n\n  // íšŒì›ê°€ì… ë‹¨ê³„ ì‘ë‹µ ì²˜ë¦¬\n  const signupStep = userInfo.fullName ? \n    (userInfo.email ? \n      (userInfo.age ? 'phone' : 'age') \n      : 'email') \n    : 'fullName';\n\n  const handleSignupResponse = (message: string) => {\n    switch (signupStep) {\n      case 'fullName':\n        setUserInfo(prev => ({ ...prev, fullName: message }));\n        addBotMessage(\n          `${message}ë‹˜, ë°˜ê°‘ìŠµë‹ˆë‹¤! ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.`,\n          []\n        );\n        break;\n      \n      case 'email':\n        if (message.includes('@')) {\n          setUserInfo(prev => ({ ...prev, email: message }));\n          addBotMessage(\n            \"ì´ë©”ì¼ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤. ì—°ë ¹ëŒ€ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.\",\n            ['20ëŒ€', '30ëŒ€', '40ëŒ€', '50ëŒ€', '60ëŒ€ ì´ìƒ']\n          );\n        } else {\n          addBotMessage(\n            \"ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.\\n(ì˜ˆ: example@email.com)\",\n            []\n          );\n        }\n        break;\n      \n      case 'age':\n        const ageMatch = message.match(/\\d+/);\n        const ageGroup = ageMatch ? parseInt(ageMatch[0]) : \n          (message.includes('20ëŒ€') ? 25 :\n           message.includes('30ëŒ€') ? 35 :\n           message.includes('40ëŒ€') ? 45 :\n           message.includes('50ëŒ€') ? 55 : 65);\n        \n        setUserInfo(prev => ({ ...prev, age: ageGroup }));\n        addBotMessage(\n          \"ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”. (ì„ íƒì‚¬í•­)\",\n          ['ê±´ë„ˆë›°ê¸°']\n        );\n        break;\n      \n      case 'phone':\n        if (message === 'ê±´ë„ˆë›°ê¸°') {\n          completeSignup();\n        } else {\n          setUserInfo(prev => ({ ...prev, phone: message }));\n          completeSignup();\n        }\n        break;\n    }\n  };\n\n  // íšŒì›ê°€ì… ì™„ë£Œ (ì‹¤ì œ API í˜¸ì¶œ)\n  const completeSignup = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      // ë°±ì—”ë“œì— ì‚¬ìš©ì ë“±ë¡\n      const registrationData: UserRegistration = {\n        full_name: userInfo.fullName || userInfo.full_name || '',\n        email: userInfo.email || '',\n        age: userInfo.age || 25,\n        phone: userInfo.phone\n      };\n\n      const response = await apiClient.registerUser(registrationData);\n      \n      if (response.status === 'success') {\n        // ì‚¬ìš©ì ID ì €ì¥\n        setCurrentUserId(response.user_id);\n        \n        // ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰\n        setCurrentStep('preferences');\n        addBotMessage(\n          `${userInfo.fullName}ë‹˜ì˜ ì •ë³´ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰\\n\\n` +\n          \"ì´ì œ ì°¨ëŸ‰ ì„ í˜¸ë„ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•œ ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.\\n\\n\" +\n          \"ì˜ˆì‚° ë²”ìœ„ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.\",\n          ['1000ë§Œì› ì´í•˜', '1000-3000ë§Œì›', '3000-5000ë§Œì›', '5000ë§Œì› ì´ìƒ']\n        );\n      } else {\n        throw new Error('íšŒì›ê°€ì…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n      }\n    } catch (error) {\n      console.error('Registration failed:', error);\n      setError(error instanceof Error ? error.message : 'íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');\n      addBotMessage(\n        \"ì£„ì†¡í•©ë‹ˆë‹¤. íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\\n\\në‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\",\n        ['ë‹¤ì‹œ ì‹œë„']\n      );\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // ì„ í˜¸ë„ í…ŒìŠ¤íŠ¸ ì‘ë‹µ ì²˜ë¦¬\n  const preferencesStep = preferences.budgetMin !== undefined ? \n    (preferences.fuelType ? \n      (preferences.category ? \n        (preferences.familySize !== undefined ? 'complete' : 'familySize')\n        : 'category') \n      : 'fuelType') \n    : 'budget';\n\n  const handlePreferencesResponse = (message: string) => {\n    switch (preferencesStep) {\n      case 'budget':\n        let budgetMin = 0, budgetMax = 0;\n        if (message.includes('1000ë§Œì› ì´í•˜')) {\n          budgetMin = 0; budgetMax = 1000;\n        } else if (message.includes('1000-3000')) {\n          budgetMin = 1000; budgetMax = 3000;\n        } else if (message.includes('3000-5000')) {\n          budgetMin = 3000; budgetMax = 5000;\n        } else if (message.includes('5000ë§Œì› ì´ìƒ')) {\n          budgetMin = 5000; budgetMax = 10000;\n        }\n        \n        setPreferences(prev => ({ ...prev, budgetMin, budgetMax }));\n        addBotMessage(\n          \"ì„ í˜¸í•˜ëŠ” ì—°ë£Œ íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.\",\n          ['ê°€ì†”ë¦°', 'ë””ì ¤', 'í•˜ì´ë¸Œë¦¬ë“œ', 'ì „ê¸°ì°¨', 'ìƒê´€ì—†ìŒ']\n        );\n        break;\n      \n      case 'fuelType':\n        setPreferences(prev => ({ ...prev, fuelType: message }));\n        addBotMessage(\n          \"ì–´ë–¤ ì¢…ë¥˜ì˜ ì°¨ëŸ‰ì„ ì„ í˜¸í•˜ì‹œë‚˜ìš”?\",\n          ['ì†Œí˜•ì°¨', 'ì¤‘í˜•ì°¨', 'ëŒ€í˜•ì°¨', 'SUV', 'ìƒê´€ì—†ìŒ']\n        );\n        break;\n      \n      case 'category':\n        setPreferences(prev => ({ ...prev, category: message }));\n        addBotMessage(\n          \"ê°€ì¡± êµ¬ì„±ì› ìˆ˜ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.\",\n          ['1-2ëª…', '3-4ëª…', '5ëª… ì´ìƒ']\n        );\n        break;\n      \n      case 'familySize':\n        const familySize = message.includes('1-2') ? 2 : \n                          message.includes('3-4') ? 4 : 6;\n        setPreferences(prev => ({ ...prev, familySize }));\n        completePreferences();\n        break;\n    }\n  };\n\n  // ì„ í˜¸ë„ í…ŒìŠ¤íŠ¸ ì™„ë£Œ (ì‹¤ì œ API í˜¸ì¶œ)\n  const completePreferences = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      if (!currentUserId) {\n        throw new Error('ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');\n      }\n\n      // ë°±ì—”ë“œì— ì„ í˜¸ë„ ì €ì¥\n      const preferencesData: Omit<UserPreferences, 'user_id'> = {\n        budget_min: preferences.budgetMin,\n        budget_max: preferences.budgetMax,\n        fuel_type: preferences.fuelType,\n        category: preferences.category,\n        transmission: preferences.transmission,\n        family_size: preferences.familySize,\n        usage_purpose: preferences.usagePurpose\n      };\n\n      const response = await apiClient.saveUserPreferences(currentUserId, preferencesData);\n      \n      if (response.status === 'success') {\n        // ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰\n        setCurrentStep('consultation');\n        addBotMessage(\n          \"ì„ í˜¸ë„ ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ¯\\n\\n\" +\n          \"ì´ì œ AI ì „ë¬¸ê°€ê°€ ë§ì¶¤í˜• ì°¨ëŸ‰ì„ ì¶”ì²œí•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\\n\\n\" +\n          \"ì–´ë–¤ ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?\",\n          ['ì°¨ëŸ‰ ì¶”ì²œ ë°›ê¸°', 'ê¸ˆìœµ ìƒë‹´', 'ì‹œì¥ ë¶„ì„']\n        );\n      } else {\n        throw new Error('ì„ í˜¸ë„ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n      }\n    } catch (error) {\n      console.error('Preferences save failed:', error);\n      setError(error instanceof Error ? error.message : 'ì„ í˜¸ë„ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');\n      addBotMessage(\n        \"ì£„ì†¡í•©ë‹ˆë‹¤. ì„ í˜¸ë„ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\\n\\në‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\",\n        ['ë‹¤ì‹œ ì‹œë„']\n      );\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // ìƒë‹´ ì‘ë‹µ ì²˜ë¦¬ (ì‹¤ì œ AI ì—ì´ì „íŠ¸ ì—°ë™)\n  const handleConsultationResponse = async (message: string) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      if (!currentUserId) {\n        throw new Error('ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');\n      }\n\n      // ì‚¬ìš©ì ë©”ì‹œì§€ë¥¼ UIì— ì¶”ê°€\n      addUserMessage(message);\n\n      // íƒ€ì´í•‘ í‘œì‹œ\n      setIsTyping(true);\n\n      // AI ì—ì´ì „íŠ¸ì—ê²Œ ì±„íŒ… ë©”ì‹œì§€ ì „ì†¡\n      const chatData = {\n        user_id: currentUserId,\n        message: message,\n        context: {\n          step: 'consultation',\n          preferences: preferences,\n          user_info: userInfo\n        }\n      };\n\n      const response = await apiClient.sendChatMessage(chatData);\n      \n      if (response.status === 'success') {\n        // AI ì‘ë‹µ í‘œì‹œ\n        setIsTyping(false);\n        addBotMessage(\n          response.response,\n          ['ë‹¤ë¥¸ ì°¨ëŸ‰ ì¶”ì²œ ë°›ê¸°', 'ê¸ˆìœµ ìƒë‹´ ìš”ì²­', 'ë” ìì„¸í•œ ì •ë³´']\n        );\n\n        // ML ì¶”ì²œ ê²°ê³¼ê°€ ìˆë‹¤ë©´ ì¶”ê°€ ì •ë³´ í‘œì‹œ\n        if (response.ml_recommendations && response.ml_recommendations.length > 0) {\n          setTimeout(() => {\n            addBotMessage(\n              \"ğŸš— ì¶”ì²œ ì°¨ëŸ‰ ëª©ë¡ì„ í™•ì¸í•˜ì‹œê² ì–´ìš”?\\n\\n\" +\n              \"ìƒì„¸í•œ ê¸ˆìœµ ìƒë‹´ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤!\",\n              ['ì¶”ì²œ ì°¨ëŸ‰ ë³´ê¸°', 'ê¸ˆìœµ ì˜µì…˜ ë¹„êµ', 'ë‹¤ë¥¸ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ ê²€ìƒ‰']\n            );\n          }, 2000);\n        }\n      } else {\n        throw new Error('AI ìƒë‹´ ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');\n      }\n    } catch (error) {\n      console.error('AI consultation failed:', error);\n      setIsTyping(false);\n      setError(error instanceof Error ? error.message : 'AI ìƒë‹´ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');\n      addBotMessage(\n        \"ì£„ì†¡í•©ë‹ˆë‹¤. ì¼ì‹œì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\\n\\n\" +\n        \"ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì‹œê±°ë‚˜ ë‹¤ë¥¸ ì§ˆë¬¸ì„ í•´ì£¼ì„¸ìš”.\",\n        ['ë‹¤ì‹œ ì‹œë„', 'ë‹¤ë¥¸ ì§ˆë¬¸í•˜ê¸°']\n      );\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"md\" sx={{ height: '100vh', display: 'flex', flexDirection: 'column' }}>\n      {/* í—¤ë” */}\n      <AppBar position=\"static\" elevation={0}>\n        <Toolbar>\n          <IconButton color=\"inherit\" onClick={onBackToLanding} sx={{ mr: 2 }}>\n            <ArrowBack />\n          </IconButton>\n          <Typography variant=\"h6\" sx={{ flexGrow: 1 }}>\n            ğŸš— CarFin AI ìƒë‹´ì‚¬\n          </Typography>\n          <IconButton color=\"inherit\">\n            <Logout />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n\n      {/* ì§„í–‰ë¥  í‘œì‹œ */}\n      <Box sx={{ p: 2 }}>\n        <LinearProgress \n          variant=\"determinate\" \n          value={getProgressValue()} \n          sx={{ height: 8, borderRadius: 4 }}\n        />\n        <Typography variant=\"caption\" color=\"textSecondary\" sx={{ mt: 1, display: 'block' }}>\n          {currentStep === 'welcome' && 'ì‹œì‘í•˜ê¸°'}\n          {currentStep === 'signup' && 'íšŒì›ê°€ì… ì§„í–‰ ì¤‘'}\n          {currentStep === 'preferences' && 'ì„ í˜¸ë„ í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘'}\n          {currentStep === 'consultation' && 'ìƒë‹´ ì§„í–‰ ì¤‘'}\n        </Typography>\n      </Box>\n\n      {/* ì±„íŒ… ì˜ì—­ */}\n      <Box \n        sx={{ \n          flex: 1, \n          overflowY: 'auto', \n          p: 2,\n          backgroundColor: '#f8f9fa'\n        }}\n      >\n        {messages.map((msg) => (\n          <ChatBubble\n            key={msg.id}\n            message={msg.message}\n            type={msg.type}\n            timestamp={msg.timestamp}\n            options={msg.options}\n            onOptionClick={handleOptionClick}\n          />\n        ))}\n        \n        {/* íƒ€ì´í•‘ í‘œì‹œ */}\n        {isTyping && (\n          <ChatBubble\n            message=\"\"\n            type=\"bot\"\n            showTyping={true}\n          />\n        )}\n        \n        <div ref={messagesEndRef} />\n      </Box>\n\n      {/* ì…ë ¥ ì˜ì—­ */}\n      <ChatInput\n        onSendMessage={handleMessage}\n        disabled={isTyping}\n        placeholder={\n          currentStep === 'welcome' ? \"ì•ˆë…•í•˜ì„¸ìš”!\" :\n          currentStep === 'signup' ? \"ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”...\" :\n          currentStep === 'preferences' ? \"ì„ í˜¸ë„ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”...\" :\n          \"ê¶ê¸ˆí•œ ì ì„ ì§ˆë¬¸í•´ì£¼ì„¸ìš”...\"\n        }\n      />\n    </Container>\n  );\n}","size_bytes":16234},"frontend/src/components/ChatBubble.tsx":{"content":"import { \n  Box, \n  Typography, \n  Avatar, \n  Paper,\n  Fade,\n  Chip\n} from '@mui/material';\n// @ts-ignore\nimport { SmartToy, Person } from '@mui/icons-material';\n\ninterface ChatBubbleProps {\n  message: string;\n  type: 'user' | 'bot';\n  timestamp?: Date;\n  showTyping?: boolean;\n  options?: string[];\n  onOptionClick?: (option: string) => void;\n}\n\n// ChatBubble ì»´í¬ë„ŒíŠ¸ êµ¬í˜„\n// ì‚¬ìš©ìì™€ ë´‡ì˜ ë©”ì‹œì§€ë¥¼ êµ¬ë¶„í•˜ì—¬ í‘œì‹œ\nexport default function ChatBubble({ \n  message, \n  type, \n  timestamp, \n  showTyping = false,\n  options = [],\n  onOptionClick \n}: ChatBubbleProps) {\n  const isBot = type === 'bot';\n  \n  return (\n    <Fade in={true} timeout={500}>\n      <Box\n        display=\"flex\"\n        justifyContent={isBot ? 'flex-start' : 'flex-end'}\n        alignItems=\"flex-start\"\n        mb={2}\n        gap={1}\n      >\n        {/* ë´‡ ì•„ë°”íƒ€ (ì™¼ìª½) */}\n        {isBot && (\n          <Avatar \n            sx={{ \n              bgcolor: '#1976d2', \n              width: 35, \n              height: 35,\n              mt: 0.5\n            }}\n          >\n            <SmartToy fontSize=\"small\" />\n          </Avatar>\n        )}\n        \n        {/* ë©”ì‹œì§€ ì»¨í…ì¸  */}\n        <Box maxWidth=\"75%\">\n          <Paper\n            elevation={1}\n            sx={{\n              p: 2,\n              backgroundColor: isBot ? '#f5f5f5' : '#1976d2',\n              color: isBot ? '#333' : 'white',\n              borderRadius: isBot ? '18px 18px 18px 5px' : '18px 18px 5px 18px',\n              position: 'relative'\n            }}\n          >\n            {showTyping ? (\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5}>\n                <Typography variant=\"body2\">ì…ë ¥ ì¤‘</Typography>\n                <Box display=\"flex\" gap={0.2}>\n                  {[0, 1, 2].map((dot) => (\n                    <Box\n                      key={dot}\n                      sx={{\n                        width: 4,\n                        height: 4,\n                        borderRadius: '50%',\n                        backgroundColor: '#666',\n                        animation: 'typing 1.4s infinite',\n                        animationDelay: `${dot * 0.2}s`,\n                        '@keyframes typing': {\n                          '0%, 60%, 100%': { opacity: 0.3 },\n                          '30%': { opacity: 1 }\n                        }\n                      }}\n                    />\n                  ))}\n                </Box>\n              </Box>\n            ) : (\n              <Typography \n                variant=\"body1\" \n                sx={{ \n                  whiteSpace: 'pre-line',\n                  fontSize: '1rem',\n                  lineHeight: 1.5\n                }}\n              >\n                {message}\n              </Typography>\n            )}\n          </Paper>\n          \n          {/* ì˜µì…˜ ë²„íŠ¼ë“¤ (ë´‡ ë©”ì‹œì§€ì—ë§Œ) */}\n          {isBot && options.length > 0 && (\n            <Box mt={1} display=\"flex\" flexWrap=\"wrap\" gap={1}>\n              {options.map((option, index) => (\n                <Chip\n                  key={index}\n                  label={option}\n                  onClick={() => onOptionClick?.(option)}\n                  sx={{\n                    backgroundColor: '#e3f2fd',\n                    color: '#1976d2',\n                    '&:hover': {\n                      backgroundColor: '#bbdefb'\n                    },\n                    cursor: 'pointer'\n                  }}\n                />\n              ))}\n            </Box>\n          )}\n          \n          {/* íƒ€ì„ìŠ¤íƒ¬í”„ */}\n          {timestamp && (\n            <Typography \n              variant=\"caption\" \n              color=\"textSecondary\" \n              display=\"block\" \n              textAlign={isBot ? 'left' : 'right'}\n              mt={0.5}\n            >\n              {timestamp.toLocaleTimeString('ko-KR', { \n                hour: '2-digit', \n                minute: '2-digit' \n              })}\n            </Typography>\n          )}\n        </Box>\n        \n        {/* ì‚¬ìš©ì ì•„ë°”íƒ€ (ì˜¤ë¥¸ìª½) */}\n        {!isBot && (\n          <Avatar \n            sx={{ \n              bgcolor: '#4caf50', \n              width: 35, \n              height: 35,\n              mt: 0.5\n            }}\n          >\n            <Person fontSize=\"small\" />\n          </Avatar>\n        )}\n      </Box>\n    </Fade>\n  );\n}","size_bytes":4339},"frontend/src/components/ChatInput.tsx":{"content":"import { useState, useRef, useEffect } from 'react';\nimport {\n  Box,\n  TextField,\n  IconButton,\n  Paper,\n  InputAdornment,\n  Fab\n} from '@mui/material';\n// @ts-ignore\nimport { Send, Mic, MicOff } from '@mui/icons-material';\n\ninterface ChatInputProps {\n  onSendMessage: (message: string) => void;\n  disabled?: boolean;\n  placeholder?: string;\n  multiline?: boolean;\n}\n\n// ChatInput ì»´í¬ë„ŒíŠ¸ êµ¬í˜„\n// ì‚¬ìš©ìê°€ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ê³  ì „ì†¡í•  ìˆ˜ ìˆëŠ” ì…ë ¥ì°½\nexport default function ChatInput({ \n  onSendMessage, \n  disabled = false, \n  placeholder = \"ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...\",\n  multiline = false\n}: ChatInputProps) {\n  const [message, setMessage] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // ë©”ì‹œì§€ ì „ì†¡ í•¨ìˆ˜\n  const handleSend = () => {\n    if (message.trim() && !disabled) {\n      onSendMessage(message.trim());\n      setMessage('');\n    }\n  };\n\n  // Enter í‚¤ ì²˜ë¦¬\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  // ìŒì„± ì¸ì‹ (í–¥í›„ êµ¬í˜„ ê°€ëŠ¥)\n  const handleVoiceToggle = () => {\n    setIsListening(!isListening);\n    // ìŒì„± ì¸ì‹ ê¸°ëŠ¥ì€ í–¥í›„ êµ¬í˜„\n  };\n\n  // ìë™ í¬ì»¤ìŠ¤\n  useEffect(() => {\n    if (!disabled && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [disabled]);\n\n  return (\n    <Paper\n      elevation={3}\n      sx={{\n        p: 2,\n        backgroundColor: 'white',\n        borderTop: '1px solid #e0e0e0'\n      }}\n    >\n      <Box display=\"flex\" alignItems=\"flex-end\" gap={1}>\n        <TextField\n          ref={inputRef}\n          fullWidth\n          multiline={multiline}\n          maxRows={4}\n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n          onKeyPress={handleKeyPress}\n          placeholder={placeholder}\n          disabled={disabled}\n          variant=\"outlined\"\n          size=\"small\"\n          sx={{\n            '& .MuiOutlinedInput-root': {\n              borderRadius: '25px',\n              backgroundColor: '#f8f9fa',\n              '&:hover fieldset': {\n                borderColor: '#1976d2',\n              },\n              '&.Mui-focused fieldset': {\n                borderColor: '#1976d2',\n              }\n            }\n          }}\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <IconButton\n                  onClick={handleVoiceToggle}\n                  size=\"small\"\n                  sx={{ \n                    color: isListening ? '#f44336' : '#666',\n                    mr: 0.5\n                  }}\n                >\n                  {isListening ? <MicOff /> : <Mic />}\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n        />\n        \n        <Fab\n          size=\"small\"\n          color=\"primary\"\n          onClick={handleSend}\n          disabled={!message.trim() || disabled}\n          sx={{\n            minHeight: 40,\n            width: 40,\n            height: 40\n          }}\n        >\n          <Send />\n        </Fab>\n      </Box>\n      \n      {/* íƒ€ì´í•‘ íŒíŠ¸ */}\n      {!disabled && (\n        <Box mt={1} textAlign=\"center\">\n          <span style={{ \n            fontSize: '0.75rem', \n            color: '#666',\n            fontStyle: 'italic'\n          }}>\n            Enterë¥¼ ëˆŒëŸ¬ ì „ì†¡, Shift+Enterë¡œ ì¤„ë°”ê¿ˆ\n          </span>\n        </Box>\n      )}\n    </Paper>\n  );\n}","size_bytes":3546},"frontend/src/services/apiClient.ts":{"content":"/**\n * CarFin API Client\n * ë°±ì—”ë“œ APIì™€ì˜ í†µì‹ ì„ ë‹´ë‹¹í•˜ëŠ” ì„œë¹„ìŠ¤\n */\n\n// ë°±ì—”ë“œ API Base URL (Replit í™˜ê²½ìš©)\n// Replit í™˜ê²½ì—ì„œëŠ” ìƒëŒ€ ê²½ë¡œ ì‚¬ìš© (ìë™ í”„ë¡ì‹œ ì²˜ë¦¬)\nconst API_BASE_URL = '';\n\n// ì‚¬ìš©ì ë“±ë¡ ë°ì´í„° íƒ€ì…\ninterface UserRegistration {\n  full_name: string;\n  email: string;\n  age: number;\n  phone?: string;\n}\n\n// ì‚¬ìš©ì ì„ í˜¸ë„ ë°ì´í„° íƒ€ì…\ninterface UserPreferences {\n  user_id: string;\n  budget_min?: number;\n  budget_max?: number;\n  fuel_type?: string;\n  category?: string;\n  transmission?: string;\n  family_size?: number;\n  usage_purpose?: string;\n}\n\n// ì±„íŒ… ë©”ì‹œì§€ íƒ€ì…\ninterface ChatMessage {\n  user_id: string;\n  message: string;\n  context?: Record<string, any>;\n}\n\n// API ì‘ë‹µ ê¸°ë³¸ íƒ€ì…\ninterface ApiResponse<T = any> {\n  status: string;\n  message?: string;\n  data?: T;\n}\n\n// ì‚¬ìš©ì ë“±ë¡ ì‘ë‹µ íƒ€ì…\ninterface UserRegistrationResponse {\n  status: string;\n  message: string;\n  user_id: string;\n  user_data: {\n    user_id: string;\n    full_name: string;\n    email: string;\n    age: number;\n    phone?: string;\n    created_at: string;\n  };\n}\n\n// ì±„íŒ… ì‘ë‹µ íƒ€ì…\ninterface ChatResponse {\n  status: string;\n  response: string;\n  ml_recommendations: any[];\n  conversation_id: number;\n}\n\nclass CarFinAPIClient {\n  private baseURL: string;\n\n  constructor() {\n    this.baseURL = API_BASE_URL;\n  }\n\n  // HTTP ìš”ì²­ í—¬í¼\n  private async makeRequest<T>(\n    endpoint: string, \n    options: RequestInit = {}\n  ): Promise<T> {\n    const url = `${this.baseURL}${endpoint}`;\n    \n    const defaultOptions: RequestInit = {\n      headers: {\n        'Content-Type': 'application/json',\n        ...options.headers,\n      },\n    };\n\n    const response = await fetch(url, { ...defaultOptions, ...options });\n    \n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.detail || `HTTP Error: ${response.status}`);\n    }\n\n    return response.json();\n  }\n\n  // GET ìš”ì²­\n  async get<T>(endpoint: string): Promise<T> {\n    return this.makeRequest<T>(endpoint, { method: 'GET' });\n  }\n\n  // POST ìš”ì²­\n  async post<T>(endpoint: string, data: any): Promise<T> {\n    return this.makeRequest<T>(endpoint, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  }\n\n  // ì‚¬ìš©ì ë“±ë¡\n  async registerUser(userData: UserRegistration): Promise<UserRegistrationResponse> {\n    return this.post<UserRegistrationResponse>('/api/users/register', userData);\n  }\n\n  // ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ\n  async getUserInfo(userId: string): Promise<ApiResponse> {\n    return this.get<ApiResponse>(`/api/users/${userId}`);\n  }\n\n  // ì‚¬ìš©ì ì„ í˜¸ë„ ì €ì¥\n  async saveUserPreferences(userId: string, preferences: Omit<UserPreferences, 'user_id'>): Promise<ApiResponse> {\n    const fullPreferences = { user_id: userId, ...preferences };\n    return this.post<ApiResponse>(`/api/users/${userId}/preferences`, fullPreferences);\n  }\n\n  // AI ì±„íŒ… ìƒë‹´\n  async sendChatMessage(chatData: ChatMessage): Promise<ChatResponse> {\n    return this.post<ChatResponse>('/api/chat', chatData);\n  }\n\n  // ëŒ€í™” ê¸°ë¡ ì¡°íšŒ\n  async getConversationHistory(userId: string): Promise<ApiResponse> {\n    return this.get<ApiResponse>(`/api/users/${userId}/conversations`);\n  }\n\n  // ì°¨ëŸ‰ ì¶”ì²œ (ê¸°ì¡´ API)\n  async getCarRecommendations(message: string, userId?: string): Promise<ApiResponse> {\n    return this.post<ApiResponse>('/api/recommend', { \n      message, \n      user_id: userId \n    });\n  }\n\n  // ê¸ˆìœµ ìƒë‹´ (ê¸°ì¡´ API)\n  async getFinanceConsultation(carId: string, budget: number): Promise<ApiResponse> {\n    return this.post<ApiResponse>('/api/finance', { \n      car_id: carId, \n      user_budget: budget \n    });\n  }\n\n  // ì°¨ëŸ‰ ëª©ë¡ ì¡°íšŒ\n  async getCarList(category?: string, maxPrice?: number): Promise<ApiResponse> {\n    const params = new URLSearchParams();\n    if (category) params.append('category', category);\n    if (maxPrice) params.append('max_price', maxPrice.toString());\n    \n    const queryString = params.toString();\n    return this.get<ApiResponse>(`/api/cars${queryString ? '?' + queryString : ''}`);\n  }\n\n  // íŠ¹ì • ì°¨ëŸ‰ ì •ë³´ ì¡°íšŒ\n  async getCarDetails(carId: number): Promise<ApiResponse> {\n    return this.get<ApiResponse>(`/api/cars/${carId}`);\n  }\n\n  // í—¬ìŠ¤ ì²´í¬\n  async healthCheck(): Promise<ApiResponse> {\n    return this.get<ApiResponse>('/health');\n  }\n}\n\n// ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\nexport const apiClient = new CarFinAPIClient();\n\n// íƒ€ì…ë“¤ë„ export\nexport type {\n  UserRegistration,\n  UserPreferences,\n  ChatMessage,\n  ApiResponse,\n  UserRegistrationResponse,\n  ChatResponse\n};","size_bytes":4677},"replit.md":{"content":"# CarFin: AI-Powered Car Recommendation System\n\n## Overview\n\nCarFin is a multi-agent car recommendation system that combines CrewAI's collaborative AI agents with PyCaret machine learning to provide personalized vehicle recommendations and financial consultation. The system features two specialized AI agents working together: a Vehicle Recommendation Agent that analyzes user preferences and suggests optimal cars using collaborative filtering, and a Finance Consultation Agent that calculates financing options based on real loan data.\n\nThe application targets first-time car buyers (ages 20-30) seeking guidance through the complex process of vehicle selection and financing. Built as a practical MVP, it focuses on delivering clear value through conversational AI interactions backed by data-driven recommendations.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 19.1.1 with TypeScript and Vite for modern development experience\n- **UI Framework**: Material-UI (MUI) 7.3.2 providing polished, accessible components\n- **Component Structure**: Modular chat-based interface with specialized components for car cards, input handling, and conversation flow\n- **State Management**: React hooks for local state management with structured chat flow (welcome â†’ signup â†’ preferences â†’ consultation)\n\n### Backend Architecture\n- **API Framework**: FastAPI for high-performance REST API with automatic documentation\n- **Multi-Agent System**: CrewAI framework orchestrating two specialized agents:\n  - Vehicle Recommendation Agent: Processes user requirements and generates ML-based car suggestions\n  - Finance Consultation Agent: Calculates loan options and payment scenarios\n- **Machine Learning**: PyCaret 3.3.2 for automated collaborative filtering with fallback content-based recommendations\n- **Data Processing**: Pandas-based pipeline for handling car inventory and user profile data\n\n### Database Design\n- **Primary Database**: PostgreSQL with SQLAlchemy ORM\n- **Schema Structure**:\n  - Users table with JSONB profile storage for flexible user attributes\n  - Vehicles table containing detailed car specifications and pricing\n  - Loan products and rates tables with real-world financing data\n  - User interaction history for recommendation improvement\n\n### Agent Coordination\nThe CrewAI system implements a sequential workflow where the Vehicle Recommendation Agent first analyzes user input to build a structured profile, then triggers PyCaret ML model inference to generate top vehicle matches. The Finance Consultation Agent subsequently processes selected vehicles to calculate financing scenarios using real loan rate data.\n\n### API Structure\nRESTful endpoints organized around user journey stages:\n- `/chat` for conversational interactions\n- `/recommend` for ML-powered vehicle suggestions  \n- `/finance` for loan calculation and comparison\n- User registration and preference management endpoints\n\n## External Dependencies\n\n### AI and Machine Learning\n- **OpenAI GPT-4o-mini**: Language model for conversational AI with cost-efficient token usage\n- **CrewAI 0.41.1**: Multi-agent orchestration framework enabling collaborative AI workflows\n- **PyCaret 3.3.2**: Automated machine learning library for recommendation system implementation\n\n### Database and Infrastructure\n- **PostgreSQL**: Relational database for structured data storage with JSONB support for flexible user profiles\n- **AWS RDS**: Cloud database hosting with connection pooling and backup management\n- **SQLAlchemy**: Python ORM for database operations with migration support\n\n### Development and Deployment\n- **Vite**: Frontend build tool optimized for React development with hot module replacement\n- **TypeScript**: Static typing for improved code reliability and developer experience\n- **ESLint**: Code linting and formatting standardization across the project\n\n### Real-world Data Integration\n- **Encar API**: Korean used car marketplace data for realistic vehicle inventory\n- **Bank Loan Products**: Real financing rates from major Korean banks (KB, NH, SC) for accurate payment calculations\n- **Google Analytics 4**: User behavior tracking and conversion analysis\n\nThe system is designed for deployment flexibility, supporting both local development and cloud hosting environments with environment-based configuration management.","size_bytes":4418},"attached_assets/README_new_1757926288596.md":{"content":"# CarFin 2.0: CrewAI ë©€í‹°ì—ì´ì „íŠ¸ ê¸°ë°˜ AI ì°¨ëŸ‰ ì¶”ì²œ ì‹œìŠ¤í…œ\n\n## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”\n\n**CarFin 2.0**ì€ **CrewAI ë©€í‹°ì—ì´ì „íŠ¸ í˜‘ì—…**ê³¼ **MCP ë°ì´í„° í‘œì¤€í™” í”„ë¡œí† ì½œ**ì„ í•µì‹¬ ê¸°ìˆ ë¡œ í•˜ëŠ” ì°¨ì„¸ëŒ€ ìë™ì°¨ ì¶”ì²œ í”Œë«í¼ì…ë‹ˆë‹¤.\n\n3ê°œì˜ ì „ë¬¸ AI ì—ì´ì „íŠ¸ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ í˜‘ì—…í•˜ì—¬ ì‚¬ìš©ì ë§ì¶¤í˜• ì°¨ëŸ‰ ì¶”ì²œê³¼ ê¸ˆìœµìƒí’ˆ ë§¤ì¹­ì„ ì œê³µí•˜ëŠ” **Production Ready** ìˆ˜ì¤€ì˜ AI ì‹œìŠ¤í…œì…ë‹ˆë‹¤.\n\n---\n\n## ğŸ¯ í•µì‹¬ ê¸°ìˆ  ë° ì°¨ë³„ì \n\n### **1. CrewAI ë©€í‹°ì—ì´ì „íŠ¸ í˜‘ì—… ì‹œìŠ¤í…œ**\n- **Chat Agent**: ì‚¬ìš©ì ì˜ë„ ë¶„ì„ ë° ëŒ€í™” ê´€ë¦¬\n- **Vehicle Agent**: PyCaret ML ê¸°ë°˜ ê°œì¸í™” ì°¨ëŸ‰ ì¶”ì²œ  \n- **Finance Agent**: 20-30ëŒ€ íŠ¹í™” ê¸ˆìœµìƒí’ˆ ë§¤ì¹­\n- **Multi-Agent Orchestrator**: 3ê°œ ì—ì´ì „íŠ¸ í˜‘ì—… ì¡°ìœ¨\n\n### **2. MCP (Model Context Protocol) ë°ì´í„° í‘œì¤€í™”**\n- ì—ì´ì „íŠ¸ ê°„ í†µì¼ëœ ë°ì´í„° ì¸í„°í˜ì´ìŠ¤\n- Vehicle/Finance/User/ML MCP ì»¤ë„¥í„°\n- í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜ ìš©ì´í•œ ì•„í‚¤í…ì²˜\n\n### **3. PyCaret AutoML í•˜ì´ë¸Œë¦¬ë“œ ì¶”ì²œ ì—”ì§„**\n- í˜‘ì—… í•„í„°ë§ + ì½˜í…ì¸  ê¸°ë°˜ í•„í„°ë§ ì•™ìƒë¸”\n- ì‹¤ì‹œê°„ ML ëª¨ë¸ ì„±ëŠ¥ ì¶”ì \n- ê°œì¸í™” ì •í™•ë„ ì§€ì†ì  í–¥ìƒ\n\n---\n\n## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    CarFin 2.0 AI ì‹œìŠ¤í…œ                      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nğŸ‘¤ ì‚¬ìš©ì (React + Material-UI)\n         â†“\nğŸ’» í•˜ì´ë¸Œë¦¬ë“œ UI ì¸í„°í˜ì´ìŠ¤\n   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n   â”‚ â€¢ ë¹ ë¥¸ ê¸°ë³¸ì •ë³´ ì…ë ¥ (Select Box)    â”‚\n   â”‚ â€¢ ìì—°ìŠ¤ëŸ¬ìš´ ì±—ë´‡ ìƒë‹´              â”‚\n   â”‚ â€¢ ì‹¤ì‹œê°„ ì¶”ì²œ ê²°ê³¼ í‘œì‹œ             â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“ FastAPI + JSON\nğŸ¤– CrewAI ë©€í‹°ì—ì´ì „íŠ¸ í˜‘ì—… ì‹œìŠ¤í…œ (í•µì‹¬)\n   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n   â”‚ ğŸ¯ Multi-Agent Orchestrator        â”‚\n   â”‚ â”œâ”€â”€ ì‚¬ìš©ì ìš”ì²­ ë¶„ì„ ë° ì—ì´ì „íŠ¸ ë°°ë¶„ â”‚\n   â”‚ â””â”€â”€ ê²°ê³¼ í†µí•© ë° ì‘ë‹µ ìƒì„±           â”‚\n   â”‚                                   â”‚\n   â”‚ ğŸ’¬ Chat Agent (ëŒ€í™” ì „ë¬¸ê°€)         â”‚\n   â”‚ â”œâ”€â”€ ì‚¬ìš©ì ì˜ë„ íŒŒì•…               â”‚\n   â”‚ â”œâ”€â”€ ëŒ€í™” ë§¥ë½ ê´€ë¦¬                 â”‚\n   â”‚ â””â”€â”€ ì¹œê·¼í•œ ìƒë‹´ ì„œë¹„ìŠ¤             â”‚\n   â”‚                                   â”‚\n   â”‚ ğŸš— Vehicle Agent (ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€) â”‚\n   â”‚ â”œâ”€â”€ PyCaret ML ê°œì¸í™” ì¶”ì²œ         â”‚\n   â”‚ â”œâ”€â”€ ì°¨ëŸ‰ ë¹„êµ ë¶„ì„                 â”‚\n   â”‚ â””â”€â”€ êµ¬ë§¤ ê°€ì´ë“œ ì œê³µ               â”‚\n   â”‚                                   â”‚\n   â”‚ ğŸ’° Finance Agent (ê¸ˆìœµ ì „ë¬¸ê°€)      â”‚\n   â”‚ â”œâ”€â”€ 20-30ëŒ€ íŠ¹í™” ê¸ˆìœµìƒí’ˆ          â”‚\n   â”‚ â”œâ”€â”€ ìŠ¹ì¸ ê°€ëŠ¥ì„± ë¶„ì„               â”‚\n   â”‚ â””â”€â”€ ì›” ë‚©ë¶€ì•¡ ê³„ì‚°                 â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“ MCP Protocol (ë°ì´í„° í‘œì¤€í™”)\nğŸ”— MCP ì»¤ë„¥í„° ë ˆì´ì–´ (í™•ì¥ì„± í•µì‹¬)\n   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n   â”‚ â€¢ Vehicle MCP: ì°¨ëŸ‰ ë°ì´í„° í‘œì¤€í™”    â”‚\n   â”‚ â€¢ Finance MCP: ê¸ˆìœµìƒí’ˆ í‘œì¤€í™”      â”‚\n   â”‚ â€¢ User MCP: ì‚¬ìš©ì í”„ë¡œí•„ í‘œì¤€í™”    â”‚\n   â”‚ â€¢ ML MCP: ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸ ì—°ë™        â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nğŸ’¾ PostgreSQL Database (AWS RDS)\n   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n   â”‚ â€¢ ì°¨ëŸ‰ ì •ë³´ (ì—”ì¹´ í¬ë¡¤ë§ ë°ì´í„°)     â”‚\n   â”‚ â€¢ ì‚¬ìš©ì í”„ë¡œí•„ ë° ì„ í˜¸ë„           â”‚\n   â”‚ â€¢ ê¸ˆìœµìƒí’ˆ ì •ë³´                    â”‚\n   â”‚ â€¢ ML í•™ìŠµ ë°ì´í„°                   â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ› ï¸ í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ\n\n### **AI & ML í•µì‹¬ ê¸°ìˆ **\n```yaml\nCrewAI: 0.41.1                    # ë©€í‹°ì—ì´ì „íŠ¸ í˜‘ì—… í”„ë ˆì„ì›Œí¬\nOpenAI GPT-4o-mini                 # ìì—°ì–´ ì²˜ë¦¬ ë° ëŒ€í™” ìƒì„±\nPyCaret: 3.3.2                    # AutoML ì¶”ì²œ ì‹œìŠ¤í…œ\nMCP Protocol: 1.0                 # ë°ì´í„° í‘œì¤€í™” ì¸í„°í˜ì´ìŠ¤\n\nML Pipeline:\n  - Collaborative Filtering: ALS   # ì‚¬ìš©ì ìœ ì‚¬ë„ ê¸°ë°˜ ì¶”ì²œ\n  - Content-Based: Cosine Similarity  # ì°¨ëŸ‰ ì†ì„± ê¸°ë°˜ ì¶”ì²œ\n  - Hybrid Ensemble: ë‘ ëª¨ë¸ ì•™ìƒë¸”    # ì •í™•ë„ í–¥ìƒ\n```\n\n### **Backend & Infrastructure**\n```yaml\nFastAPI: 0.116.1                  # ê³ ì„±ëŠ¥ API ì„œë²„\nPostgreSQL: AWS RDS               # í™•ì¥ ê°€ëŠ¥í•œ ë°ì´í„°ë² ì´ìŠ¤\nSupabase Auth: 2.18.1             # ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ\nDocker: ì»¨í…Œì´ë„ˆí™” ë°°í¬             # í™˜ê²½ í‘œì¤€í™”\n```\n\n### **Frontend & UX**\n```yaml\nReact: 19.1.1 + Vite             # í˜„ëŒ€ì  í”„ë¡ íŠ¸ì—”ë“œ\nMaterial-UI: 7.3.2               # ì¼ê´€ëœ ë””ìì¸ ì‹œìŠ¤í…œ\nTypeScript: íƒ€ì… ì•ˆì „ì„±           # ê°œë°œ ìƒì‚°ì„± í–¥ìƒ\n```\n\n---\n\n## ğŸš€ ê°œë°œ ì§„í–‰ ìƒí™©\n\n### **âœ… ì™„ë£Œëœ í•µì‹¬ ê¸°ëŠ¥ (Phase 1)**\n| **ëª¨ë“ˆ** | **ìƒíƒœ** | **ì™„ì„±ëœ ê¸°ëŠ¥** | **íŒŒì¼** |\n|----------|----------|---------------|---------|\n| **CrewAI Chat Agent** | âœ… **ì™„ë£Œ** | ì‚¬ìš©ì ì˜ë„ ë¶„ì„ ë° ëŒ€í™” ê´€ë¦¬ | `src/agents/chat_agent.py` |\n| **CrewAI Vehicle Agent** | âœ… **ì™„ë£Œ** | PyCaret ML ê¸°ë°˜ ì°¨ëŸ‰ ì¶”ì²œ | `src/agents/vehicle_agent.py` |\n| **Multi-Agent Orchestrator** | âœ… **ì™„ë£Œ** | 3ê°œ ì—ì´ì „íŠ¸ í˜‘ì—… ì¡°ìœ¨ ì‹œìŠ¤í…œ | `src/agents/multi_agent_orchestrator.py` |\n| **ë©€í‹°ì—ì´ì „íŠ¸ API** | âœ… **ì™„ë£Œ** | ì™„ì „ ë™ì‘í•˜ëŠ” API ì„œë²„ | `test_multi_agent_chat.py` |\n| **ê¸°ë³¸ ì±—ë´‡ UI** | âœ… **ì™„ë£Œ** | React ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ | `SimpleChatBot.jsx` |\n\n**ì‹¤ì œ ë™ì‘ í™•ì¸**: `localhost:8002` ì—ì„œ ì™„ì „í•œ ë©€í‹°ì—ì´ì „íŠ¸ í˜‘ì—… ì‹œìŠ¤í…œ ë™ì‘ ì¤‘ ğŸ¯\n\n### **ğŸ”„ ì§„í–‰ ì¤‘ (Phase 2)**\n| **ëª¨ë“ˆ** | **ìƒíƒœ** | **ì‘ì—… ë‚´ìš©** | **ìš°ì„ ìˆœìœ„** |\n|----------|----------|---------------|-------------|\n| **CrewAI Finance Agent** | ğŸ”„ **ì§„í–‰ì¤‘** | 20-30ëŒ€ íŠ¹í™” ê¸ˆìœµìƒí’ˆ ë§¤ì¹­ | **High** |\n| **MCP Protocol êµ¬í˜„** | ğŸ“‹ **ê³„íš** | 4ê°œ MCP ì»¤ë„¥í„° í‘œì¤€í™” | **High** |\n| **í”„ë¡ íŠ¸ì—”ë“œ ë©€í‹°ì—ì´ì „íŠ¸ ì—°ë™** | ğŸ“‹ **ê³„íš** | React â†’ ë©€í‹°ì—ì´ì „íŠ¸ API ì—°ê²° | **Medium** |\n\n### **ğŸ“… í–¥í›„ ê³„íš (Phase 3)**\n| **ëª¨ë“ˆ** | **ìƒíƒœ** | **ì‘ì—… ë‚´ìš©** | **ë¹„ê³ ** |\n|----------|----------|---------------|---------|\n| **PyCaret ML ëª¨ë¸ ê³ ë„í™”** | ğŸ“‹ **ëŒ€ê¸°** | ì‹¤ì œ ì°¨ëŸ‰ ë°ì´í„° í•™ìŠµ | ì‹œê°„ ì—¬ìœ ì‹œ |\n| **ì‹¤ì‹œê°„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§** | ğŸ“‹ **ëŒ€ê¸°** | Analytics ëŒ€ì‹œë³´ë“œ | ì‹œê°„ ì—¬ìœ ì‹œ |\n| **ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ ë¶„ì„** | ğŸ“‹ **ë³´ë¥˜** | A/B Testing, ì½”í˜¸íŠ¸ ë¶„ì„ ë“± | **ì¶”í›„ ì§„í–‰** |\n\n---\n\n## ğŸ“Š ì‹¤ì œ êµ¬í˜„ ê²°ê³¼\n\n### **ë©€í‹°ì—ì´ì „íŠ¸ í˜‘ì—… ì„±ê³¼**\n```json\nì‹¤ì œ í…ŒìŠ¤íŠ¸ ê²°ê³¼ (2024-09-13):\n{\n  \"api_status\": \"operational\",\n  \"multi_agent_available\": true,\n  \"agents_loaded\": {\n    \"chat_agent\": true,\n    \"vehicle_agent\": true,\n    \"finance_agent\": true,\n    \"orchestrator\": true\n  },\n  \"response_quality\": {\n    \"success_rate\": \"100%\",\n    \"agents_used\": [\"chat_response\", \"vehicle_recommendations\", \"finance_options\"],\n    \"ml_scores\": 0.89,\n    \"response_completeness\": \"ìƒì„¸í•œ ì°¨ëŸ‰ ë¹„êµí‘œ + êµ¬ë§¤ ê°€ì´ë“œ í¬í•¨\"\n  }\n}\n```\n\n### **ì°¨ëŸ‰ ì¶”ì²œ í’ˆì§ˆ**\n- **ì¶”ì²œ ì°¨ëŸ‰**: í˜„ëŒ€ ì•„ë°˜ë–¼, ê¸°ì•„ K3, í† ìš”íƒ€ ì½”ë¡¤ë¼\n- **ë¶„ì„ ê¹Šì´**: ì¥ë‹¨ì  ë¹„êµí‘œ, ì—°ë¹„/ì•ˆì „ì„±/ê°€ê²© ì¢…í•© í‰ê°€\n- **ì‹¤ìš©ì„±**: êµ¬ë§¤ ì‹œ ê³ ë ¤ì‚¬í•­, ì˜ˆì‚°ë³„ ë§ì¶¤ ì¶”ì²œ\n- **ML ì‹ ë¢°ë„**: 0.89/1.0 (ë†’ì€ ì¶”ì²œ ì •í™•ë„)\n\n---\n\n## ğŸ¯ ë¹„ì¦ˆë‹ˆìŠ¤ ì„íŒ©íŠ¸ ë° ëª©í‘œ\n\n### **í•µì‹¬ ì„±ê³¼ ì§€í‘œ (KPIs)**\n| **ì¹´í…Œê³ ë¦¬** | **ë©”íŠ¸ë¦­** | **ëª©í‘œê°’** | **í˜„ì¬ìƒíƒœ** |\n|-------------|-----------|-----------|-------------|\n| **AI í˜‘ì—…** | ë©€í‹°ì—ì´ì „íŠ¸ ì„±ê³µë¥  | > 95% | âœ… 100% |\n| **ì¶”ì²œ ì •í™•ë„** | ML ëª¨ë¸ ì‹ ë¢°ë„ | > 0.85 | âœ… 0.89 |\n| **ì‚¬ìš©ì ë§Œì¡±** | ì‘ë‹µ ì™„ì„±ë„ | > 80% | âœ… ìƒì„¸ ë¹„êµí‘œ í¬í•¨ |\n| **ì‹œìŠ¤í…œ ì•ˆì •ì„±** | API ê°€ìš©ì„± | > 99% | âœ… Operational |\n\n### **ì‹œì¥ ì°¨ë³„í™” í¬ì¸íŠ¸**\n1. **êµ­ë‚´ ìµœì´ˆ CrewAI ë©€í‹°ì—ì´ì „íŠ¸ ì°¨ëŸ‰ ì¶”ì²œ ì‹œìŠ¤í…œ**\n2. **MCP í”„ë¡œí† ì½œ ê¸°ë°˜ í™•ì¥ ê°€ëŠ¥í•œ AI ì•„í‚¤í…ì²˜**  \n3. **Production ìˆ˜ì¤€ì˜ ì™„ì „ ë™ì‘í•˜ëŠ” AI í˜‘ì—… ì‹œìŠ¤í…œ**\n4. **20-30ëŒ€ íƒ€ê²Ÿ íŠ¹í™” ê°œì¸í™” ì„œë¹„ìŠ¤**\n\n---\n\n## ğŸ”§ ì„¤ì¹˜ ë° ì‹¤í–‰\n\n### **í•„ìˆ˜ ìš”êµ¬ì‚¬í•­**\n```bash\nPython 3.11+\nNode.js 18+\nOpenAI API Key\nPostgreSQL (optional, AWS RDS ê¶Œì¥)\n```\n\n### **ë©€í‹°ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ ì‹¤í–‰**\n```bash\n# 1. ì˜ì¡´ì„± ì„¤ì¹˜\npip install crewai openai langchain-openai fastapi\n\n# 2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •\nexport OPENAI_API_KEY=your-api-key-here\n\n# 3. ë©€í‹°ì—ì´ì „íŠ¸ ì„œë²„ ì‹¤í–‰\ncd backend/backend\npython test_multi_agent_chat.py\n\n# 4. ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸\ncurl http://localhost:8002/system-status\n\n# 5. ë©€í‹°ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸\ncurl -X POST http://localhost:8002/multi-agent-chat \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"message\": \"I need a car recommendation\"}'\n```\n\n### **í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰**\n```bash\ncd frontend\nnpm install\nnpm run dev\n# http://localhost:5173\n```\n\n---\n\n## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°\n\n```\nCarFin-2.0/\nâ”œâ”€â”€ backend/backend/\nâ”‚   â”œâ”€â”€ src/agents/                    # í•µì‹¬! CrewAI ë©€í‹°ì—ì´ì „íŠ¸\nâ”‚   â”‚   â”œâ”€â”€ chat_agent.py             # ëŒ€í™” ì „ë¬¸ê°€\nâ”‚   â”‚   â”œâ”€â”€ vehicle_agent.py          # ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€  \nâ”‚   â”‚   â”œâ”€â”€ multi_agent_orchestrator.py  # í˜‘ì—… ì¡°ìœ¨ì\nâ”‚   â”‚   â””â”€â”€ finance_agent.py          # ê¸ˆìœµ ì „ë¬¸ê°€ (êµ¬í˜„ì¤‘)\nâ”‚   â”œâ”€â”€ src/mcp/                      # MCP í”„ë¡œí† ì½œ (êµ¬í˜„ ì˜ˆì •)\nâ”‚   â”‚   â”œâ”€â”€ vehicle_mcp.py            # ì°¨ëŸ‰ ë°ì´í„° í‘œì¤€í™”\nâ”‚   â”‚   â”œâ”€â”€ finance_mcp.py            # ê¸ˆìœµ ë°ì´í„° í‘œì¤€í™”\nâ”‚   â”‚   â””â”€â”€ user_mcp.py               # ì‚¬ìš©ì ë°ì´í„° í‘œì¤€í™”\nâ”‚   â”œâ”€â”€ test_multi_agent_chat.py      # âœ… ë©€í‹°ì—ì´ì „íŠ¸ API ì„œë²„\nâ”‚   â””â”€â”€ test_simple_chat.py           # ê¸°ë³¸ ì±—ë´‡ API\nâ”œâ”€â”€ frontend/\nâ”‚   â”œâ”€â”€ src/components/\nâ”‚   â”‚   â””â”€â”€ SimpleChatBot.jsx         # âœ… React ì±—ë´‡ UI\nâ”‚   â””â”€â”€ package.json\nâ”œâ”€â”€ performance_benchmarking.py       # ì„±ëŠ¥ ë¶„ì„ ë„êµ¬\nâ”œâ”€â”€ data_analytics_alternative.md     # ë°ì´í„° ë¶„ì„ ë°©ë²•ë¡ \nâ””â”€â”€ README.md                         # ì´ ë¬¸ì„œ\n```\n\n---\n\n## ğŸ† íŒ€ í”„ë¡œì íŠ¸ ì„±ê³¼\n\n### **ê°œë°œíŒ€ ì—­í•  ë¶„ë‹´**\n- **AI ì—”ì§€ë‹ˆì–´**: CrewAI ë©€í‹°ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ ì„¤ê³„ ë° êµ¬í˜„ âœ…\n- **ML ì—”ì§€ë‹ˆì–´**: PyCaret AutoML ì¶”ì²œ ì—”ì§„ ê°œë°œ âœ…  \n- **ë°±ì—”ë“œ ê°œë°œì**: MCP í”„ë¡œí† ì½œ ë° API ì‹œìŠ¤í…œ êµ¬ì¶• ğŸ”„\n- **í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì**: React ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ê°œë°œ âœ…\n- **ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸**: ì„±ëŠ¥ ë¶„ì„ ë° ìµœì í™” ğŸ“‹\n\n### **í”„ë¡œì íŠ¸ ì„±ê³¼**\n1. **ê¸°ìˆ ì  ì„±ê³¼**: ì‹¤ì œ ë™ì‘í•˜ëŠ” ë©€í‹°ì—ì´ì „íŠ¸ AI ì‹œìŠ¤í…œ êµ¬ì¶•\n2. **í˜ì‹ ì„±**: CrewAI + MCP ì¡°í•©ìœ¼ë¡œ ì—…ê³„ ìµœì´ˆ ì‹œë„\n3. **ì‹¤ìš©ì„±**: Production Ready ìˆ˜ì¤€ì˜ ì•ˆì •ì ì¸ ì‹œìŠ¤í…œ\n4. **í™•ì¥ì„±**: MCP í‘œì¤€í™”ë¡œ ìƒˆë¡œìš´ ì—ì´ì „íŠ¸ ì¶”ê°€ ìš©ì´\n\n---\n\n## ğŸ“ ë¼ì´ì„¼ìŠ¤ ë° ì—°ë½ì²˜\n\nì´ í”„ë¡œì íŠ¸ëŠ” **SeSAC ë°ì´í„° ë¶„ì„ 1ê¸°** íŒ€ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.\n\n**ì£¼ìš” ê¸°ìˆ  ë¬¸ì˜**: CrewAI ë©€í‹°ì—ì´ì „íŠ¸ êµ¬í˜„, MCP í”„ë¡œí† ì½œ ì„¤ê³„  \n**ë°ëª¨ ìš”ì²­**: `localhost:8002`ì—ì„œ ë¼ì´ë¸Œ ì‹œì—° ê°€ëŠ¥\n\n---\n\n## ğŸ¯ ê²°ë¡ \n\n**CarFin 2.0**ì€ ë‹¨ìˆœí•œ ì°¨ëŸ‰ ì¶”ì²œ ì‹œìŠ¤í…œì„ ë„˜ì–´ì„œ, **CrewAI ë©€í‹°ì—ì´ì „íŠ¸ í˜‘ì—…**ê³¼ **MCP ë°ì´í„° í‘œì¤€í™”**ë¥¼ í•µì‹¬ìœ¼ë¡œ í•˜ëŠ” **ì°¨ì„¸ëŒ€ AI í”Œë«í¼**ì…ë‹ˆë‹¤.\n\nì‹¤ì œ ë™ì‘í•˜ëŠ” Production ìˆ˜ì¤€ì˜ ì‹œìŠ¤í…œìœ¼ë¡œ, í˜„ì—…ì—ì„œ ì¦‰ì‹œ í™œìš© ê°€ëŠ¥í•œ **ê¸°ìˆ ì  ì™„ì„±ë„**ì™€ **ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜**ë¥¼ ëª¨ë‘ ê°–ì¶˜ í˜ì‹ ì ì¸ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.\n\n**í•µì‹¬ ë©”ì‹œì§€**: *\"3ê°œ AI ì „ë¬¸ê°€ê°€ ì‹¤ì‹œê°„ í˜‘ì—…í•˜ëŠ” ì°¨ëŸ‰ ìƒë‹´ ì„œë¹„ìŠ¤\"*\n","size_bytes":12818},"frontend/src/components/HybridCarFinInterface.tsx":{"content":"import { useState, useEffect } from 'react';\nimport {\n  Container,\n  Box,\n  Typography,\n  Grid,\n  Paper,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  TextField,\n  Button,\n  Card,\n  CardContent,\n  Chip,\n  AppBar,\n  Toolbar,\n  Tabs,\n  Tab,\n  Alert\n} from '@mui/material';\nimport ChatBubble from './ChatBubble';\nimport ChatInput from './ChatInput';\nimport { apiClient } from '../services/apiClient';\nimport type { UserRegistration, UserPreferences } from '../services/apiClient';\n\n// íƒ­ íŒ¨ë„ ì»´í¬ë„ŒíŠ¸\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel({ children, value, index }: TabPanelProps) {\n  return (\n    <div hidden={value !== index} style={{ height: '100%' }}>\n      {value === index && <Box sx={{ p: 3, height: '100%' }}>{children}</Box>}\n    </div>\n  );\n}\n\n// ë©”ì‹œì§€ íƒ€ì…\ninterface ChatMessage {\n  id: string;\n  type: 'user' | 'bot';\n  message: string;\n  timestamp: Date;\n  options?: string[];\n}\n\n// ì¶”ì²œ ê²°ê³¼ íƒ€ì…\ninterface RecommendationResult {\n  car_id: number;\n  make: string;\n  model: string;\n  year: number;\n  price: number;\n  fuel_type: string;\n  category: string;\n  description: string;\n  recommendation_reason: string;\n}\n\nexport default function HybridCarFinInterface() {\n  const [activeTab, setActiveTab] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // ë¹ ë¥¸ ì…ë ¥ í¼ ìƒíƒœ\n  const [quickForm, setQuickForm] = useState({\n    name: '',\n    age: '',\n    budget: '',\n    fuelType: '',\n    category: '',\n    familySize: '',\n    purpose: ''\n  });\n\n  // ì±—ë´‡ ìƒíƒœ\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [isTyping, setIsTyping] = useState(false);\n  const [currentUserId, setCurrentUserId] = useState<string | null>(null);\n  \n  // ì¶”ì²œ ê²°ê³¼ ìƒíƒœ\n  const [recommendations, setRecommendations] = useState<RecommendationResult[]>([]);\n  const [aiResponse, setAiResponse] = useState('');\n\n  // ì´ˆê¸° ë©”ì‹œì§€\n  useEffect(() => {\n    addBotMessage(\n      \"ì•ˆë…•í•˜ì„¸ìš”! ğŸš— CarFin AI ì…ë‹ˆë‹¤.\\n\\n\" +\n      \"ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ë§ì¶¤í˜• ì°¨ëŸ‰ì„ ì¶”ì²œí•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\\n\\n\" +\n      \"1ï¸âƒ£ **ë¹ ë¥¸ ì¶”ì²œ**: ì™¼ìª½ í¼ì„ ì±„ì›Œì£¼ì„¸ìš”\\n\" +\n      \"2ï¸âƒ£ **AI ìƒë‹´**: ì €ì™€ ììœ ë¡­ê²Œ ëŒ€í™”í•´ë³´ì„¸ìš”\\n\\n\" +\n      \"ì–´ë–¤ ë°©ë²•ì„ ì„ í˜¸í•˜ì‹œë‚˜ìš”?\",\n      ['ë¹ ë¥¸ ì¶”ì²œ', 'AI ìƒë‹´', 'ë‘˜ ë‹¤ ì¨ë³´ê¸°']\n    );\n  }, []);\n\n  const addBotMessage = (message: string, options?: string[]) => {\n    setMessages(prev => [...prev, {\n      id: Date.now().toString(),\n      type: 'bot',\n      message,\n      timestamp: new Date(),\n      options\n    }]);\n  };\n\n  const addUserMessage = (message: string) => {\n    setMessages(prev => [...prev, {\n      id: Date.now().toString(),\n      type: 'user',\n      message,\n      timestamp: new Date()\n    }]);\n  };\n\n  // ë¹ ë¥¸ ì¶”ì²œ ì œì¶œ\n  const handleQuickRecommendation = async () => {\n    if (!quickForm.name || !quickForm.budget) {\n      setError('ì´ë¦„ê³¼ ì˜ˆì‚°ì€ í•„ìˆ˜ ì…ë ¥ì‚¬í•­ì…ë‹ˆë‹¤.');\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      // ì‚¬ìš©ì ë“±ë¡\n      const registrationData: UserRegistration = {\n        full_name: quickForm.name,\n        email: `${quickForm.name}@temp.com`, // ì„ì‹œ ì´ë©”ì¼\n        age: parseInt(quickForm.age) || 25,\n        phone: ''\n      };\n\n      const userResponse = await apiClient.registerUser(registrationData);\n      setCurrentUserId(userResponse.user_id);\n\n      // ì„ í˜¸ë„ ì €ì¥\n      const preferencesData: Omit<UserPreferences, 'user_id'> = {\n        budget_min: parseInt(quickForm.budget.split('-')[0]) || 1000,\n        budget_max: parseInt(quickForm.budget.split('-')[1]) || 5000,\n        fuel_type: quickForm.fuelType || 'ê°€ì†”ë¦°',\n        category: quickForm.category || 'ì†Œí˜•',\n        family_size: parseInt(quickForm.familySize) || 2,\n        usage_purpose: quickForm.purpose || 'ì¶œí‡´ê·¼'\n      };\n\n      await apiClient.saveUserPreferences(userResponse.user_id, preferencesData);\n\n      // AI ì¶”ì²œ ìš”ì²­\n      const chatData = {\n        user_id: userResponse.user_id,\n        message: `${quickForm.name}ë‹˜ì„ ìœ„í•œ ì°¨ëŸ‰ ì¶”ì²œì„ ë¶€íƒë“œë¦½ë‹ˆë‹¤. ì˜ˆì‚°: ${quickForm.budget}ë§Œì›, ì—°ë£Œ: ${quickForm.fuelType}, ì°¨ì¢…: ${quickForm.category}`,\n        context: {\n          step: 'quick_recommendation',\n          preferences: preferencesData,\n          user_info: registrationData\n        }\n      };\n\n      const response = await apiClient.sendChatMessage(chatData);\n      \n      if (response.status === 'success') {\n        setAiResponse(response.response);\n        setRecommendations(response.ml_recommendations || []);\n        \n        // ì±„íŒ…ì—ë„ ê²°ê³¼ ì¶”ê°€\n        addBotMessage(\n          `ğŸ¯ ${quickForm.name}ë‹˜ì„ ìœ„í•œ ë§ì¶¤ ì¶”ì²œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\\n\\n` +\n          response.response,\n          ['ë” ìì„¸í•œ ìƒë‹´', 'ë‹¤ë¥¸ ì¡°ê±´ìœ¼ë¡œ ì¬ê²€ìƒ‰', 'ê¸ˆìœµ ìƒë‹´']\n        );\n      }\n    } catch (error) {\n      console.error('Quick recommendation failed:', error);\n      setError(error instanceof Error ? error.message : 'ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // ì±—ë´‡ ë©”ì‹œì§€ ì²˜ë¦¬\n  const handleChatMessage = async (message: string) => {\n    addUserMessage(message);\n    setIsTyping(true);\n\n    try {\n      if (!currentUserId) {\n        // ì„ì‹œ ì‚¬ìš©ì ìƒì„±\n        const tempUser: UserRegistration = {\n          full_name: 'ì‚¬ìš©ì',\n          email: 'temp@example.com',\n          age: 25\n        };\n        const userResponse = await apiClient.registerUser(tempUser);\n        setCurrentUserId(userResponse.user_id);\n      }\n\n      const chatData = {\n        user_id: currentUserId!,\n        message: message,\n        context: {\n          step: 'chat_consultation',\n          mode: 'hybrid'\n        }\n      };\n\n      const response = await apiClient.sendChatMessage(chatData);\n      \n      if (response.status === 'success') {\n        setIsTyping(false);\n        addBotMessage(\n          response.response,\n          ['ë” ìì„¸íˆ', 'ë‹¤ë¥¸ ì¡°ê±´', 'ê¸ˆìœµ ìƒë‹´']\n        );\n\n        // ML ì¶”ì²œ ê²°ê³¼ê°€ ìˆìœ¼ë©´ í‘œì‹œ\n        if (response.ml_recommendations && response.ml_recommendations.length > 0) {\n          setRecommendations(response.ml_recommendations);\n          setAiResponse(response.response);\n        }\n      }\n    } catch (error) {\n      console.error('Chat failed:', error);\n      setIsTyping(false);\n      addBotMessage(\n        \"ì£„ì†¡í•©ë‹ˆë‹¤. ì¼ì‹œì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\",\n        ['ë‹¤ì‹œ ì‹œë„']\n      );\n    }\n  };\n\n  const handleTabChange = (_: React.SyntheticEvent, newValue: number) => {\n    setActiveTab(newValue);\n  };\n\n  return (\n    <Box sx={{ height: '100vh', display: 'flex', flexDirection: 'column' }}>\n      {/* í—¤ë” */}\n      <AppBar position=\"static\" elevation={0} sx={{\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\n      }}>\n        <Toolbar>\n          <Typography variant=\"h5\" sx={{ flexGrow: 1, fontWeight: 700 }}>\n            ğŸš— CarFin AI - í•˜ì´ë¸Œë¦¬ë“œ ì¶”ì²œ ì‹œìŠ¤í…œ\n          </Typography>\n          <Chip label=\"CrewAI ë©€í‹°ì—ì´ì „íŠ¸\" color=\"secondary\" />\n          <Chip label=\"PyCaret ML\" color=\"secondary\" sx={{ ml: 1 }} />\n        </Toolbar>\n      </AppBar>\n\n      {/* ë©”ì¸ ì»¨í…ì¸  */}\n      <Container maxWidth=\"xl\" sx={{ flex: 1, py: 2 }}>\n        <Grid container spacing={2} sx={{ height: '100%' }}>\n          {/* ì™¼ìª½: ì…ë ¥ ì¸í„°í˜ì´ìŠ¤ */}\n          <Grid item xs={12} md={6} sx={{ height: '100%' }}>\n            <Paper sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\n              <Tabs value={activeTab} onChange={handleTabChange}>\n                <Tab label=\"ğŸš€ ë¹ ë¥¸ ì¶”ì²œ\" />\n                <Tab label=\"ğŸ’¬ AI ìƒë‹´\" />\n              </Tabs>\n              \n              <TabPanel value={activeTab} index={0}>\n                <Box sx={{ height: '100%', overflow: 'auto' }}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    âš¡ ë¹ ë¥¸ ê¸°ë³¸ì •ë³´ ì…ë ¥\n                  </Typography>\n                  \n                  <Grid container spacing={2}>\n                    <Grid item xs={12} sm={6}>\n                      <TextField\n                        fullWidth\n                        label=\"ì´ë¦„\"\n                        value={quickForm.name}\n                        onChange={(e) => setQuickForm(prev => ({ ...prev, name: e.target.value }))}\n                        required\n                      />\n                    </Grid>\n                    <Grid item xs={12} sm={6}>\n                      <TextField\n                        fullWidth\n                        label=\"ë‚˜ì´\"\n                        type=\"number\"\n                        value={quickForm.age}\n                        onChange={(e) => setQuickForm(prev => ({ ...prev, age: e.target.value }))}\n                      />\n                    </Grid>\n                    \n                    <Grid item xs={12}>\n                      <FormControl fullWidth required>\n                        <InputLabel>ì˜ˆì‚° ë²”ìœ„</InputLabel>\n                        <Select\n                          value={quickForm.budget}\n                          onChange={(e) => setQuickForm(prev => ({ ...prev, budget: e.target.value }))}\n                        >\n                          <MenuItem value=\"500-1000\">500-1000ë§Œì›</MenuItem>\n                          <MenuItem value=\"1000-2000\">1000-2000ë§Œì›</MenuItem>\n                          <MenuItem value=\"2000-3000\">2000-3000ë§Œì›</MenuItem>\n                          <MenuItem value=\"3000-5000\">3000-5000ë§Œì›</MenuItem>\n                          <MenuItem value=\"5000-10000\">5000ë§Œì› ì´ìƒ</MenuItem>\n                        </Select>\n                      </FormControl>\n                    </Grid>\n\n                    <Grid item xs={12} sm={6}>\n                      <FormControl fullWidth>\n                        <InputLabel>ì—°ë£Œ íƒ€ì…</InputLabel>\n                        <Select\n                          value={quickForm.fuelType}\n                          onChange={(e) => setQuickForm(prev => ({ ...prev, fuelType: e.target.value }))}\n                        >\n                          <MenuItem value=\"ê°€ì†”ë¦°\">ê°€ì†”ë¦°</MenuItem>\n                          <MenuItem value=\"ë””ì ¤\">ë””ì ¤</MenuItem>\n                          <MenuItem value=\"í•˜ì´ë¸Œë¦¬ë“œ\">í•˜ì´ë¸Œë¦¬ë“œ</MenuItem>\n                          <MenuItem value=\"ì „ê¸°\">ì „ê¸°</MenuItem>\n                        </Select>\n                      </FormControl>\n                    </Grid>\n\n                    <Grid item xs={12} sm={6}>\n                      <FormControl fullWidth>\n                        <InputLabel>ì°¨ì¢…</InputLabel>\n                        <Select\n                          value={quickForm.category}\n                          onChange={(e) => setQuickForm(prev => ({ ...prev, category: e.target.value }))}\n                        >\n                          <MenuItem value=\"ì†Œí˜•\">ì†Œí˜•</MenuItem>\n                          <MenuItem value=\"ì¤€ì¤‘í˜•\">ì¤€ì¤‘í˜•</MenuItem>\n                          <MenuItem value=\"ì¤‘í˜•\">ì¤‘í˜•</MenuItem>\n                          <MenuItem value=\"ëŒ€í˜•\">ëŒ€í˜•</MenuItem>\n                          <MenuItem value=\"SUV\">SUV</MenuItem>\n                        </Select>\n                      </FormControl>\n                    </Grid>\n\n                    <Grid item xs={12} sm={6}>\n                      <FormControl fullWidth>\n                        <InputLabel>ê°€ì¡± êµ¬ì„±ì›</InputLabel>\n                        <Select\n                          value={quickForm.familySize}\n                          onChange={(e) => setQuickForm(prev => ({ ...prev, familySize: e.target.value }))}\n                        >\n                          <MenuItem value=\"1\">1ëª…</MenuItem>\n                          <MenuItem value=\"2\">2ëª…</MenuItem>\n                          <MenuItem value=\"3\">3ëª…</MenuItem>\n                          <MenuItem value=\"4\">4ëª…</MenuItem>\n                          <MenuItem value=\"5\">5ëª… ì´ìƒ</MenuItem>\n                        </Select>\n                      </FormControl>\n                    </Grid>\n\n                    <Grid item xs={12} sm={6}>\n                      <FormControl fullWidth>\n                        <InputLabel>ì£¼ ì‚¬ìš© ëª©ì </InputLabel>\n                        <Select\n                          value={quickForm.purpose}\n                          onChange={(e) => setQuickForm(prev => ({ ...prev, purpose: e.target.value }))}\n                        >\n                          <MenuItem value=\"ì¶œí‡´ê·¼\">ì¶œí‡´ê·¼</MenuItem>\n                          <MenuItem value=\"ê°€ì¡±ì—¬í–‰\">ê°€ì¡±ì—¬í–‰</MenuItem>\n                          <MenuItem value=\"ë ˆì €\">ë ˆì €</MenuItem>\n                          <MenuItem value=\"ì—…ë¬´\">ì—…ë¬´</MenuItem>\n                        </Select>\n                      </FormControl>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                      <Button\n                        fullWidth\n                        variant=\"contained\"\n                        size=\"large\"\n                        onClick={handleQuickRecommendation}\n                        disabled={isLoading}\n                        sx={{ mt: 2 }}\n                      >\n                        {isLoading ? 'ì¶”ì²œ ì¤‘...' : 'ğŸ¯ ë§ì¶¤ ì¶”ì²œ ë°›ê¸°'}\n                      </Button>\n                    </Grid>\n                  </Grid>\n                  \n                  {error && (\n                    <Alert severity=\"error\" sx={{ mt: 2 }}>\n                      {error}\n                    </Alert>\n                  )}\n                </Box>\n              </TabPanel>\n\n              <TabPanel value={activeTab} index={1}>\n                <Box sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    ğŸ’¬ AI ì „ë¬¸ê°€ì™€ ìƒë‹´\n                  </Typography>\n                  \n                  <Box sx={{ flex: 1, overflow: 'auto', mb: 2 }}>\n                    {messages.map((message) => (\n                      <ChatBubble\n                        key={message.id}\n                        message={message.message}\n                        type={message.type}\n                        timestamp={message.timestamp ? new Date(message.timestamp) : undefined}\n                        options={message.options}\n                        onOptionClick={(option: string) => handleChatMessage(option)}\n                      />\n                    ))}\n                    {isTyping && (\n                      <Box sx={{ p: 2 }}>\n                        <Typography variant=\"body2\" color=\"textSecondary\">\n                          AIê°€ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...\n                        </Typography>\n                      </Box>\n                    )}\n                  </Box>\n                  \n                  <ChatInput onSendMessage={handleChatMessage} disabled={isLoading} />\n                </Box>\n              </TabPanel>\n            </Paper>\n          </Grid>\n\n          {/* ì˜¤ë¥¸ìª½: ì‹¤ì‹œê°„ ì¶”ì²œ ê²°ê³¼ */}\n          <Grid item xs={12} md={6} sx={{ height: '100%' }}>\n            <Paper sx={{ height: '100%', p: 3, overflow: 'auto' }}>\n              <Typography variant=\"h6\" gutterBottom>\n                ğŸ¯ ì‹¤ì‹œê°„ ì¶”ì²œ ê²°ê³¼\n              </Typography>\n              \n              {aiResponse && (\n                <Box sx={{ mb: 3 }}>\n                  <Typography variant=\"subtitle1\" gutterBottom sx={{ fontWeight: 600 }}>\n                    ğŸ¤– AI ì „ë¬¸ê°€ ë¶„ì„\n                  </Typography>\n                  <Paper sx={{ p: 2, bgcolor: '#f5f5f5' }}>\n                    <Typography variant=\"body2\" sx={{ whiteSpace: 'pre-line' }}>\n                      {aiResponse}\n                    </Typography>\n                  </Paper>\n                </Box>\n              )}\n\n              {recommendations.length > 0 && (\n                <Box>\n                  <Typography variant=\"subtitle1\" gutterBottom sx={{ fontWeight: 600 }}>\n                    ğŸš— ì¶”ì²œ ì°¨ëŸ‰ ëª©ë¡\n                  </Typography>\n                  <Grid container spacing={2}>\n                    {recommendations.map((car) => (\n                      <Grid item xs={12} key={car.car_id}>\n                        <Card>\n                          <CardContent>\n                            <Typography variant=\"h6\" gutterBottom>\n                              {car.make} {car.model} ({car.year})\n                            </Typography>\n                            <Box sx={{ mb: 2 }}>\n                              <Chip label={`${car.price.toLocaleString()}ë§Œì›`} color=\"primary\" />\n                              <Chip label={car.fuel_type} sx={{ ml: 1 }} />\n                              <Chip label={car.category} sx={{ ml: 1 }} />\n                            </Box>\n                            <Typography variant=\"body2\" color=\"textSecondary\" paragraph>\n                              {car.description}\n                            </Typography>\n                            <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                              ì¶”ì²œ ì´ìœ : {car.recommendation_reason}\n                            </Typography>\n                          </CardContent>\n                        </Card>\n                      </Grid>\n                    ))}\n                  </Grid>\n                </Box>\n              )}\n\n              {!aiResponse && recommendations.length === 0 && (\n                <Box sx={{ textAlign: 'center', py: 4 }}>\n                  <Typography variant=\"body1\" color=\"textSecondary\">\n                    ì™¼ìª½ì—ì„œ ë¹ ë¥¸ ì¶”ì²œì„ ìš”ì²­í•˜ê±°ë‚˜<br />\n                    AIì™€ ìƒë‹´ì„ ì‹œì‘í•´ë³´ì„¸ìš”! ğŸš—\n                  </Typography>\n                </Box>\n              )}\n            </Paper>\n          </Grid>\n        </Grid>\n      </Container>\n    </Box>\n  );\n}","size_bytes":18142},"COMPLETE_PROJECT_README.md":{"content":"# CarFin AI: ì™„ì „í•œ ë©€í‹°ì—ì´ì „íŠ¸ ì°¨ëŸ‰ ì¶”ì²œ ë° ê¸ˆìœµ ìƒë‹´ ì‹œìŠ¤í…œ\n\n## ğŸš— í”„ë¡œì íŠ¸ ê°œìš”\n\nCarFinì€ **CrewAI ê¸°ë°˜ ë©€í‹°ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ**ê³¼ **PyCaret ë¨¸ì‹ ëŸ¬ë‹**ì„ ê²°í•©í•œ ì°¨ì„¸ëŒ€ AI ì°¨ëŸ‰ ì¶”ì²œ ë° ê¸ˆìœµ ìƒë‹´ í”Œë«í¼ì…ë‹ˆë‹¤. \n\n**í•µì‹¬ ê°€ì¹˜ ì œì•ˆ:**\n- ğŸ¤– **2ê°œ ì „ë¬¸ AI ì—ì´ì „íŠ¸ í˜‘ì—…**: ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€ + ê¸ˆìœµ ìƒë‹´ ì „ë¬¸ê°€\n- ğŸ§  **PyCaret ML ê°œì¸í™” ì¶”ì²œ**: í˜‘ì—… í•„í„°ë§ ê¸°ë°˜ ì •í™•í•œ ì°¨ëŸ‰ ë§¤ì¹­\n- ğŸ’¬ **í•˜ì´ë¸Œë¦¬ë“œ UI**: ë¹ ë¥¸ ë“œë¡­ë‹¤ìš´ ì…ë ¥ + ìì—°ìŠ¤ëŸ¬ìš´ AI ì±„íŒ…\n- ğŸ“Š **ì‹¤ì‹œê°„ ë¶„ì„**: ì‚¬ìš©ì í”„ë¡œí•„ â†’ ML ë¶„ì„ â†’ ë§ì¶¤ ì¶”ì²œ â†’ ê¸ˆìœµ ì˜µì…˜ ê³„ì‚°\n\n---\n\n## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜\n\n### ì „ì²´ êµ¬ì¡°ë„\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   Frontend      â”‚    â”‚     Backend       â”‚    â”‚   AI Agents     â”‚\nâ”‚                 â”‚    â”‚                   â”‚    â”‚                 â”‚\nâ”‚ React + TS      â”‚â—„â”€â”€â–ºâ”‚   FastAPI         â”‚â—„â”€â”€â–ºâ”‚ CrewAI + GPT-5  â”‚\nâ”‚ Material-UI     â”‚    â”‚   Port 8000       â”‚    â”‚ Multi-Agent     â”‚\nâ”‚ Port 5000       â”‚    â”‚                   â”‚    â”‚                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚                        â”‚                        â”‚\n         â”‚                        â–¼                        â–¼\n         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n         â”‚              â”‚   PostgreSQL      â”‚    â”‚  PyCaret ML     â”‚\n         â”‚              â”‚   Database        â”‚    â”‚  Recommendation â”‚\n         â”‚              â”‚                   â”‚    â”‚  Engine         â”‚\n         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ User Data        â”‚    â”‚                 â”‚\n                        â”‚ Vehicle Data      â”‚    â”‚ Collaborative   â”‚\n                        â”‚ Preferences       â”‚    â”‚ Filtering       â”‚\n                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### ë°ì´í„° í”Œë¡œìš°\n```\nì‚¬ìš©ì ì…ë ¥ â†’ êµ¬ì¡°í™”ëœ í”„ë¡œí•„ â†’ ML ë¶„ì„ â†’ AI ì—ì´ì „íŠ¸ ì²˜ë¦¬ â†’ ê°œì¸í™” ì¶”ì²œ + ê¸ˆìœµ ì˜µì…˜\n```\n\n---\n\n## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°\n\n```\nCarFin/\nâ”œâ”€â”€ ğŸ“‚ backend/\nâ”‚   â”œâ”€â”€ simple_main.py              # FastAPI ë©”ì¸ ì„œë²„\nâ”‚   â””â”€â”€ pyproject.toml              # Python ì˜ì¡´ì„±\nâ”œâ”€â”€ ğŸ“‚ agents/\nâ”‚   â””â”€â”€ crew_setup.py               # CrewAI ë©€í‹°ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ\nâ”œâ”€â”€ ğŸ“‚ ml/\nâ”‚   â””â”€â”€ recommendation_engine.py    # PyCaret ML ì¶”ì²œ ì—”ì§„\nâ”œâ”€â”€ ğŸ“‚ data/\nâ”‚   â”œâ”€â”€ encar_crawler.py           # ì—”ì¹´ ë°ì´í„° í¬ë¡¤ëŸ¬\nâ”‚   â”œâ”€â”€ encar_sample_data.py       # ìƒ˜í”Œ ë°ì´í„° ìƒì„±\nâ”‚   â””â”€â”€ aws_encar_crawler.py       # AWS ê¸°ë°˜ í¬ë¡¤ëŸ¬\nâ”œâ”€â”€ ğŸ“‚ frontend/\nâ”‚   â”œâ”€â”€ ğŸ“‚ src/\nâ”‚   â”‚   â”œâ”€â”€ ğŸ“‚ components/          # React ì»´í¬ë„ŒíŠ¸ë“¤\nâ”‚   â”‚   â”‚   â”œâ”€â”€ HybridCarFinInterface.tsx    # ë©”ì¸ í•˜ì´ë¸Œë¦¬ë“œ UI\nâ”‚   â”‚   â”‚   â”œâ”€â”€ ChatBotContainer.tsx         # AI ì±„íŒ… ì»¨í…Œì´ë„ˆ\nâ”‚   â”‚   â”‚   â”œâ”€â”€ ChatBubble.tsx              # ì±„íŒ… ë§í’ì„ \nâ”‚   â”‚   â”‚   â”œâ”€â”€ GuidedInputPanel.tsx        # ë¹ ë¥¸ ì…ë ¥ íŒ¨ë„\nâ”‚   â”‚   â”‚   â””â”€â”€ EnhancedCarCard.tsx         # ì°¨ëŸ‰ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸\nâ”‚   â”‚   â”œâ”€â”€ ğŸ“‚ services/\nâ”‚   â”‚   â”‚   â””â”€â”€ apiClient.ts               # API í†µì‹  í´ë¼ì´ì–¸íŠ¸\nâ”‚   â”‚   â”œâ”€â”€ App.tsx                        # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸\nâ”‚   â”‚   â””â”€â”€ main.tsx                       # ì•± ì§„ì…ì \nâ”‚   â”œâ”€â”€ package.json                       # Node.js ì˜ì¡´ì„±\nâ”‚   â”œâ”€â”€ vite.config.ts                     # Vite ë¹Œë“œ ì„¤ì •\nâ”‚   â””â”€â”€ tsconfig.json                      # TypeScript ì„¤ì •\nâ””â”€â”€ replit.md                              # í”„ë¡œì íŠ¸ ë©”ëª¨ë¦¬\n```\n\n---\n\n## ğŸ”§ ë°±ì—”ë“œ ì‹œìŠ¤í…œ ìƒì„¸\n\n### 1. FastAPI ì„œë²„ (simple_main.py)\n\n**ì£¼ìš” ê¸°ëŠ¥:**\n- ë©€í‹°ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œê³¼ ì—°ë™ëœ RESTful API\n- ì‚¬ìš©ì ê´€ë¦¬, ì„ í˜¸ë„ ì €ì¥, ì‹¤ì‹œê°„ ì±„íŒ…\n- CORS ì„¤ì •ìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œì™€ í†µì‹ \n\n**í•µì‹¬ API ì—”ë“œí¬ì¸íŠ¸:**\n```python\n# ê¸°ë³¸ ìƒíƒœ í™•ì¸\nGET /                           # ì„œë²„ ìƒíƒœ\nGET /health                     # ìƒì„¸ í—¬ìŠ¤ì²´í¬\n\n# ì‚¬ìš©ì ê´€ë¦¬\nPOST /api/users/register        # ì‚¬ìš©ì ë“±ë¡\nPOST /api/users/{user_id}/preferences  # ì„ í˜¸ë„ ì €ì¥\nGET /api/users/{user_id}        # ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ\n\n# AI ìƒë‹´ ë° ì¶”ì²œ\nPOST /api/chat                  # ë©€í‹°ì—ì´ì „íŠ¸ ì±„íŒ… ìƒë‹´\nPOST /api/recommend             # ì°¨ëŸ‰ ì¶”ì²œ ìš”ì²­\nPOST /api/finance               # ê¸ˆìœµ ì˜µì…˜ ê³„ì‚°\n\n# ì°¨ëŸ‰ ì •ë³´\nGET /api/cars/{car_id}          # íŠ¹ì • ì°¨ëŸ‰ ìƒì„¸ ì •ë³´\nGET /api/users/{user_id}/conversations  # ëŒ€í™” ê¸°ë¡\n```\n\n**ë°ì´í„° ëª¨ë¸:**\n```python\n# ì‚¬ìš©ì ë“±ë¡\nclass UserRegistration(BaseModel):\n    full_name: str\n    email: str\n    age: int\n    phone: Optional[str]\n\n# ì‚¬ìš©ì ì„ í˜¸ë„\nclass UserPreferences(BaseModel):\n    user_id: str\n    budget_min: Optional[int]\n    budget_max: Optional[int]\n    fuel_type: Optional[str]      # \"Gasoline\", \"Hybrid\", \"Electric\"\n    category: Optional[str]       # \"Compact\", \"Mid-size\", \"SUV\", \"Luxury\"\n    transmission: Optional[str]\n    family_size: Optional[int]\n    usage_purpose: Optional[str]\n\n# ì±„íŒ… ë©”ì‹œì§€\nclass ChatMessage(BaseModel):\n    user_id: str\n    message: str\n    context: Optional[Dict[str, Any]]\n```\n\n**í™˜ê²½ ë³€ìˆ˜:**\n```bash\nOPENAI_API_KEY=your_openai_api_key\nDATABASE_URL=postgresql://user:password@host:port/database\n```\n\n### 2. CrewAI ë©€í‹°ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ (agents/crew_setup.py)\n\n**ì‹œìŠ¤í…œ êµ¬ì„±:**\n```python\nclass CarFinAgents:\n    def __init__(self):\n        self.vehicle_agent = Agent(...)      # ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€\n        self.finance_agent = Agent(...)      # ê¸ˆìœµ ìƒë‹´ ì „ë¬¸ê°€\n        self.recommendation_engine = CarRecommendationEngine()\n```\n\n**ì—ì´ì „íŠ¸ 1: ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€**\n- **ì—­í• **: ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ ë¶„ì„ â†’ PyCaret ML ì¶”ì²œ â†’ ì¹œê·¼í•œ ì„¤ëª…\n- **ëª©í‘œ**: ìµœì ì˜ ì°¨ëŸ‰ 3ê°œ ì¶”ì²œ ë° ì´í•´í•˜ê¸° ì‰¬ìš´ ì„¤ëª…\n- **íŠ¹í™”**: 20-30ëŒ€ ì²«ì°¨ êµ¬ë§¤ì ì‹¬ë¦¬ ì´í•´, ê¸°ìˆ ìš©ì–´ ì§€ì–‘\n\n**ì—ì´ì „íŠ¸ 2: ê¸ˆìœµ ìƒë‹´ ì „ë¬¸ê°€**\n- **ì—­í• **: ëŒ€ì¶œ/ë¦¬ìŠ¤/í• ë¶€ ì˜µì…˜ ê³„ì‚° ë° ë§ì¶¤ ì¶”ì²œ\n- **ëª©í‘œ**: ì›” ë‚©ë¶€ì•¡, ì´ë¹„ìš©, ì¥ë‹¨ì  ëª…í™• ë¹„êµ\n- **íŠ¹í™”**: ë³µì¡í•œ ê¸ˆìœµ ê³„ì‚°ì„ ì‹¤ìƒí™œ ì–¸ì–´ë¡œ ì„¤ëª…\n\n**GPT-5 í†µí•©:**\n```python\n# ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ êµ¬ì¡°í™”\ndef _parse_user_requirements(self, user_message: str) -> Dict[str, Any]:\n    response = openai_client.chat.completions.create(\n        model=\"gpt-5\",\n        messages=[{\"role\": \"user\", \"content\": parse_prompt}],\n        response_format={\"type\": \"json_object\"}\n    )\n```\n\n**ì›Œí¬í”Œë¡œìš°:**\n1. ì‚¬ìš©ì ë©”ì‹œì§€ â†’ GPT-5ë¡œ êµ¬ì¡°í™”ëœ í”„ë¡œí•„ ìƒì„±\n2. êµ¬ì¡°í™”ëœ í”„ë¡œí•„ â†’ PyCaret ML ì¶”ì²œ ì‹¤í–‰\n3. ML ê²°ê³¼ â†’ ì°¨ëŸ‰ ì¶”ì²œ ì—ì´ì „íŠ¸ê°€ ì¹œê·¼í•œ ì„¤ëª… ìƒì„±\n4. ì„ íƒëœ ì°¨ëŸ‰ â†’ ê¸ˆìœµ ìƒë‹´ ì—ì´ì „íŠ¸ê°€ ì˜µì…˜ ê³„ì‚°\n\n### 3. PyCaret ML ì¶”ì²œ ì—”ì§„ (ml/recommendation_engine.py)\n\n**í•µì‹¬ ê¸°ëŠ¥:**\n```python\nclass CarRecommendationEngine:\n    def __init__(self):\n        self.model = None\n        self.data = None\n        self.engine = None  # PostgreSQL ì—°ê²°\n        \n    def load_data(self) -> bool:\n        # PostgreSQLì—ì„œ ì°¨ëŸ‰ ë°ì´í„° ë¡œë“œ\n        \n    def train_model(self) -> bool:\n        # PyCaretë¡œ í˜‘ì—… í•„í„°ë§ ëª¨ë¸ í›ˆë ¨\n        \n    def get_recommendations(self, user_profile: Dict, n_recommendations: int = 3):\n        # ê°œì¸í™” ì¶”ì²œ ìƒì„±\n```\n\n**ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜:**\n- **í˜‘ì—… í•„í„°ë§**: ìœ ì‚¬í•œ ì‚¬ìš©ìë“¤ì˜ ì„ í˜¸ë„ ê¸°ë°˜ ì¶”ì²œ\n- **ì»¨í…ì¸  ê¸°ë°˜ í•„í„°ë§**: ì°¨ëŸ‰ íŠ¹ì„± ë§¤ì¹­ (ë°±ì—… ì•Œê³ ë¦¬ì¦˜)\n- **í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼**: ë‘ ë°©ë²•ì˜ ì¡°í•©ìœ¼ë¡œ ì •í™•ë„ í–¥ìƒ\n\n**ë°ì´í„° ì „ì²˜ë¦¬:**\n- ì‚¬ìš©ì í”„ë¡œí•„ ì •ê·œí™”\n- ì°¨ëŸ‰ íŠ¹ì„± ë²¡í„°í™”\n- ê²°ì¸¡ê°’ ì²˜ë¦¬ ë° ìŠ¤ì¼€ì¼ë§\n\n### 4. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ\n\n**PostgreSQL í…Œì´ë¸” êµ¬ì¡°:**\n```sql\n-- ì‚¬ìš©ì í…Œì´ë¸”\nCREATE TABLE users (\n    user_id VARCHAR PRIMARY KEY,\n    full_name VARCHAR NOT NULL,\n    email VARCHAR UNIQUE NOT NULL,\n    age INTEGER,\n    phone VARCHAR,\n    created_at TIMESTAMP DEFAULT NOW()\n);\n\n-- ì‚¬ìš©ì ì„ í˜¸ë„ (JSONBë¡œ ìœ ì—°ì„± í™•ë³´)\nCREATE TABLE user_preferences (\n    user_id VARCHAR REFERENCES users(user_id),\n    preferences JSONB,\n    updated_at TIMESTAMP DEFAULT NOW()\n);\n\n-- ì°¨ëŸ‰ ë°ì´í„°\nCREATE TABLE vehicles (\n    car_id SERIAL PRIMARY KEY,\n    make VARCHAR,\n    model VARCHAR,\n    year INTEGER,\n    price INTEGER,\n    fuel_type VARCHAR,\n    category VARCHAR,\n    transmission VARCHAR,\n    features JSONB,\n    created_at TIMESTAMP DEFAULT NOW()\n);\n\n-- ëŒ€í™” ê¸°ë¡\nCREATE TABLE conversations (\n    id SERIAL PRIMARY KEY,\n    user_id VARCHAR REFERENCES users(user_id),\n    message TEXT,\n    response TEXT,\n    ml_data JSONB,\n    timestamp TIMESTAMP DEFAULT NOW()\n);\n```\n\n---\n\n## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ ì‹œìŠ¤í…œ ìƒì„¸\n\n### 1. ê¸°ìˆ  ìŠ¤íƒ\n```json\n{\n  \"framework\": \"React 19.1.1\",\n  \"language\": \"TypeScript\",\n  \"build\": \"Vite 7.1.5\",\n  \"ui\": \"Material-UI (MUI) 7.3.2\",\n  \"state\": \"React Hooks\",\n  \"api\": \"Fetch API\"\n}\n```\n\n### 2. ë©”ì¸ ì»´í¬ë„ŒíŠ¸ (HybridCarFinInterface.tsx)\n\n**í•˜ì´ë¸Œë¦¬ë“œ UI ì„¤ê³„:**\n```typescript\n// ì™¼ìª½: ë¹ ë¥¸ ì…ë ¥ íŒ¨ë„ | ì˜¤ë¥¸ìª½: ì‹¤ì‹œê°„ ê²°ê³¼\n<Grid container spacing={3}>\n  <Grid size={6}>\n    <GuidedInputPanel />      // ë“œë¡­ë‹¤ìš´ ë¹ ë¥¸ ì…ë ¥\n    <ChatBotContainer />      // AI ì±„íŒ… ì¸í„°í˜ì´ìŠ¤\n  </Grid>\n  <Grid size={6}>\n    <RecommendationResults /> // ì‹¤ì‹œê°„ ì¶”ì²œ ê²°ê³¼\n    <CarCards />             // ì°¨ëŸ‰ ì¹´ë“œë“¤\n  </Grid>\n</Grid>\n```\n\n**ìƒíƒœ ê´€ë¦¬:**\n```typescript\nconst [currentStep, setCurrentStep] = useState<'welcome' | 'signup' | 'preferences' | 'consultation'>('welcome');\nconst [userInfo, setUserInfo] = useState<UserInfo | null>(null);\nconst [preferences, setPreferences] = useState<UserPreferences>({});\nconst [recommendations, setRecommendations] = useState<CarRecommendation[]>([]);\nconst [messages, setMessages] = useState<ChatMessage[]>([]);\n```\n\n### 3. AI ì±„íŒ… ì»¨í…Œì´ë„ˆ (ChatBotContainer.tsx)\n\n**ì‹¤ì‹œê°„ ì±„íŒ… ê¸°ëŠ¥:**\n```typescript\nconst handleChatMessage = async (message: string) => {\n  // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€\n  addUserMessage(message);\n  \n  // íƒ€ì´í•‘ í‘œì‹œ\n  setIsTyping(true);\n  \n  // AI ì—ì´ì „íŠ¸ì—ê²Œ ì „ì†¡\n  const chatData = {\n    user_id: currentUserId,\n    message: message,\n    context: {\n      step: 'consultation',\n      preferences: preferences,\n      user_info: userInfo\n    }\n  };\n  \n  const response = await apiClient.sendChatMessage(chatData);\n  \n  // AI ì‘ë‹µ ì²˜ë¦¬\n  if (response.status === 'success') {\n    setIsTyping(false);\n    addBotMessage(response.response, response.options);\n    \n    // ML ì¶”ì²œ ê²°ê³¼ ì—…ë°ì´íŠ¸\n    if (response.ml_recommendations) {\n      updateRecommendations(response.ml_recommendations);\n    }\n  }\n};\n```\n\n**ì±„íŒ… ë§í’ì„  (ChatBubble.tsx):**\n- ì‚¬ìš©ì/AI êµ¬ë¶„ëœ ë””ìì¸\n- íƒ€ì´í•‘ ì• ë‹ˆë©”ì´ì…˜\n- ì˜µì…˜ ë²„íŠ¼ ì§€ì›\n- íƒ€ì„ìŠ¤íƒ¬í”„ í‘œì‹œ\n\n### 4. ë¹ ë¥¸ ì…ë ¥ íŒ¨ë„ (GuidedInputPanel.tsx)\n\n**ë“œë¡­ë‹¤ìš´ ê¸°ë°˜ ë¹ ë¥¸ ì„¤ì •:**\n```typescript\n// ì˜ˆì‚° ë²”ìœ„\n<FormControl fullWidth>\n  <InputLabel>ì˜ˆì‚° ë²”ìœ„</InputLabel>\n  <Select value={budget} onChange={handleBudgetChange}>\n    <MenuItem value=\"1000-2000\">1,000ë§Œì› - 2,000ë§Œì›</MenuItem>\n    <MenuItem value=\"2000-3000\">2,000ë§Œì› - 3,000ë§Œì›</MenuItem>\n    <MenuItem value=\"3000-4000\">3,000ë§Œì› - 4,000ë§Œì›</MenuItem>\n    <MenuItem value=\"4000+\">4,000ë§Œì› ì´ìƒ</MenuItem>\n  </Select>\n</FormControl>\n\n// ì—°ë£Œ íƒ€ì…\n<ToggleButtonGroup value={fuelType} exclusive onChange={handleFuelChange}>\n  <ToggleButton value=\"gasoline\">ê°€ì†”ë¦°</ToggleButton>\n  <ToggleButton value=\"hybrid\">í•˜ì´ë¸Œë¦¬ë“œ</ToggleButton>\n  <ToggleButton value=\"electric\">ì „ê¸°ì°¨</ToggleButton>\n</ToggleButtonGroup>\n```\n\n### 5. API í´ë¼ì´ì–¸íŠ¸ (apiClient.ts)\n\n**íƒ€ì… ì•ˆì „í•œ API í†µì‹ :**\n```typescript\nclass CarFinAPIClient {\n  private baseURL = 'http://localhost:8000';\n  \n  // ì‚¬ìš©ì ë“±ë¡\n  async registerUser(userData: UserRegistration): Promise<RegisterResponse> {\n    return this.post<RegisterResponse>('/api/users/register', userData);\n  }\n  \n  // AI ì±„íŒ…\n  async sendChatMessage(chatData: ChatMessage): Promise<ChatResponse> {\n    return this.post<ChatResponse>('/api/chat', chatData);\n  }\n  \n  // ì°¨ëŸ‰ ì¶”ì²œ\n  async getRecommendations(request: RecommendationRequest): Promise<RecommendationResponse> {\n    return this.post<RecommendationResponse>('/api/recommend', request);\n  }\n  \n  private async post<T>(endpoint: string, data: any): Promise<T> {\n    const response = await fetch(`${this.baseURL}${endpoint}`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data)\n    });\n    return response.json();\n  }\n}\n```\n\n---\n\n## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰ ê°€ì´ë“œ\n\n### 1. ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­\n```\n- Python 3.11+\n- Node.js 20+\n- PostgreSQL 13+\n- 8GB+ RAM (PyCaret ML ëª¨ë¸ í›ˆë ¨ìš©)\n```\n\n### 2. í™˜ê²½ ì„¤ì •\n\n**Step 1: ì €ì¥ì†Œ í´ë¡ **\n```bash\ngit clone https://github.com/yourusername/carfin-ai.git\ncd carfin-ai\n```\n\n**Step 2: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**\n```bash\n# .env íŒŒì¼ ìƒì„±\nOPENAI_API_KEY=your_openai_api_key_here\nDATABASE_URL=postgresql://user:password@localhost:5432/carfin_db\nPGHOST=localhost\nPGPORT=5432\nPGUSER=your_db_user\nPGPASSWORD=your_db_password\nPGDATABASE=carfin_db\n```\n\n**Step 3: PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •**\n```sql\n-- ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±\nCREATE DATABASE carfin_db;\n\n-- ì‚¬ìš©ì ìƒì„± (í•„ìš”ì‹œ)\nCREATE USER carfin_user WITH PASSWORD 'your_password';\nGRANT ALL PRIVILEGES ON DATABASE carfin_db TO carfin_user;\n```\n\n### 3. ë°±ì—”ë“œ ì„¤ì¹˜ ë° ì‹¤í–‰\n\n**Python ì˜ì¡´ì„± ì„¤ì¹˜:**\n```bash\n# uv íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ì‚¬ìš© (ì¶”ì²œ)\nuv sync\n\n# ë˜ëŠ” pip ì‚¬ìš©\npip install -r requirements.txt\n```\n\n**ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰:**\n```bash\n# ë©”ì¸ ë””ë ‰í† ë¦¬ì—ì„œ\npython simple_main.py\n\n# ë˜ëŠ” íŠ¹ì • í¬íŠ¸ë¡œ ì‹¤í–‰\nuvicorn simple_main:app --host 0.0.0.0 --port 8000 --reload\n```\n\n**ë°±ì—”ë“œ í™•ì¸:**\n```bash\n# í—¬ìŠ¤ì²´í¬\ncurl http://localhost:8000/health\n\n# API ë¬¸ì„œ (ìë™ ìƒì„±)\n# ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8000/docs ì ‘ì†\n```\n\n### 4. í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì¹˜ ë° ì‹¤í–‰\n\n**Node.js ì˜ì¡´ì„± ì„¤ì¹˜:**\n```bash\ncd frontend\nnpm install\n```\n\n**ê°œë°œ ì„œë²„ ì‹¤í–‰:**\n```bash\nnpm run dev\n\n# Vite ì„œë²„ê°€ http://localhost:5000 ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤\n```\n\n**ë¹Œë“œ (í”„ë¡œë•ì…˜):**\n```bash\nnpm run build\nnpm run preview\n```\n\n### 5. ì „ì²´ ì‹œìŠ¤í…œ ì‹¤í–‰ ìˆœì„œ\n\n```bash\n# Terminal 1: ë°±ì—”ë“œ\npython simple_main.py\n\n# Terminal 2: í”„ë¡ íŠ¸ì—”ë“œ\ncd frontend && npm run dev\n\n# Terminal 3: ë°ì´í„°ë² ì´ìŠ¤ (í•„ìš”ì‹œ)\npg_ctl start -D /your/postgres/data/path\n```\n\n**í™•ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸:**\n- âœ… ë°±ì—”ë“œ: http://localhost:8000/health\n- âœ… í”„ë¡ íŠ¸ì—”ë“œ: http://localhost:5000\n- âœ… API ë¬¸ì„œ: http://localhost:8000/docs\n- âœ… ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸\n\n---\n\n## ğŸ” í•µì‹¬ ê¸°ëŠ¥ ì‚¬ìš© ê°€ì´ë“œ\n\n### 1. ì‚¬ìš©ì ë“±ë¡ í”Œë¡œìš°\n```\nì›°ì»´ í™”ë©´ â†’ ì‚¬ìš©ì ì •ë³´ ì…ë ¥ â†’ ì„ í˜¸ë„ ì„¤ì • â†’ AI ìƒë‹´ ì‹œì‘\n```\n\n### 2. AI ë©€í‹°ì—ì´ì „íŠ¸ ìƒë‹´\n```\nì‚¬ìš©ì: \"ê°€ì¡±ìš© ì°¨ëŸ‰ ì¶”ì²œí•´ì£¼ì„¸ìš”. ì˜ˆì‚°ì€ 3ì²œë§Œì›ì…ë‹ˆë‹¤.\"\n    â†“\nGPT-5: ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ êµ¬ì¡°í™”\n    â†“\nPyCaret ML: ê°œì¸í™” ì¶”ì²œ ë¶„ì„\n    â†“\nì°¨ëŸ‰ ì¶”ì²œ ì—ì´ì „íŠ¸: \"ê³ ê°ë‹˜ê»˜ ì¶”ì²œí•˜ëŠ” ì°¨ëŸ‰ 3ëŒ€ì…ë‹ˆë‹¤...\"\n    â†“\nì‚¬ìš©ì: \"ë‘ ë²ˆì§¸ ì°¨ëŸ‰ì˜ ê¸ˆìœµ ì˜µì…˜ì´ ê¶ê¸ˆí•´ìš”.\"\n    â†“\nê¸ˆìœµ ìƒë‹´ ì—ì´ì „íŠ¸: \"í•´ë‹¹ ì°¨ëŸ‰ì˜ ê¸ˆìœµ ì˜µì…˜ì„ ë¶„ì„í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤...\"\n```\n\n### 3. í•˜ì´ë¸Œë¦¬ë“œ UI í™œìš©\n- **ë¹ ë¥¸ ì¶”ì²œ**: ì™¼ìª½ ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ì¦‰ì‹œ ì„¤ì •\n- **ìƒì„¸ ìƒë‹´**: AI ì±„íŒ…ìœ¼ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™”\n- **ì‹¤ì‹œê°„ ê²°ê³¼**: ì˜¤ë¥¸ìª½ì—ì„œ ì¦‰ì‹œ ì¶”ì²œ í™•ì¸\n\n---\n\n## ğŸ§ª í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹…\n\n### 1. API í…ŒìŠ¤íŠ¸\n```bash\n# ì‚¬ìš©ì ë“±ë¡ í…ŒìŠ¤íŠ¸\ncurl -X POST http://localhost:8000/api/users/register \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"full_name\": \"ê¹€ì² ìˆ˜\",\n    \"email\": \"test@example.com\",\n    \"age\": 28\n  }'\n\n# AI ì±„íŒ… í…ŒìŠ¤íŠ¸\ncurl -X POST http://localhost:8000/api/chat \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"user_id\": \"user_id_here\",\n    \"message\": \"ê°€ì¡±ìš© ì°¨ëŸ‰ ì¶”ì²œí•´ì£¼ì„¸ìš”\",\n    \"context\": {}\n  }'\n```\n\n### 2. ì¼ë°˜ì ì¸ ë¬¸ì œ í•´ê²°\n\n**ë¬¸ì œ: AI ì—ì´ì „íŠ¸ ì‘ë‹µ ì—†ìŒ**\n```bash\n# í•´ê²°: OpenAI API í‚¤ í™•ì¸\necho $OPENAI_API_KEY\n\n# ë¡œê·¸ í™•ì¸\ntail -f logs/carfin_backend.log\n```\n\n**ë¬¸ì œ: ML ì¶”ì²œ ì˜¤ë¥˜**\n```python\n# í•´ê²°: PyCaret ëª¨ë¸ ì¬í›ˆë ¨\nfrom ml.recommendation_engine import CarRecommendationEngine\nengine = CarRecommendationEngine()\nengine.load_data()\nengine.train_model()\n```\n\n**ë¬¸ì œ: í”„ë¡ íŠ¸ì—”ë“œ API ì—°ê²° ì‹¤íŒ¨**\n```typescript\n// í•´ê²°: API í´ë¼ì´ì–¸íŠ¸ baseURL í™•ì¸\nconst baseURL = 'http://localhost:8000';  // ë°±ì—”ë“œ í¬íŠ¸ í™•ì¸\n```\n\n### 3. ë¡œê·¸ ë° ëª¨ë‹ˆí„°ë§\n```bash\n# ë°±ì—”ë“œ ë¡œê·¸\ntail -f logs/uvicorn.log\n\n# í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì ë„êµ¬\n# ë¸Œë¼ìš°ì € F12 â†’ Console íƒ­\n\n# ë°ì´í„°ë² ì´ìŠ¤ ë¡œê·¸\ntail -f /var/log/postgresql/postgresql.log\n```\n\n---\n\n## ğŸ“ˆ í™•ì¥ ë° ê°œì„  ë°©ì•ˆ\n\n### 1. ì„±ëŠ¥ ìµœì í™”\n- **Redis ìºì‹±**: ì¶”ì²œ ê²°ê³¼ ìºì‹±ìœ¼ë¡œ ì‘ë‹µ ì†ë„ í–¥ìƒ\n- **ë¹„ë™ê¸° ì²˜ë¦¬**: Celeryë¡œ ML í›ˆë ¨ ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬\n- **CDN ì ìš©**: ì •ì  íŒŒì¼ ë°°í¬ ìµœì í™”\n\n### 2. ì¶”ê°€ ê¸°ëŠ¥\n- **ìŒì„± ì¸í„°í˜ì´ìŠ¤**: Speech-to-Text API í†µí•©\n- **ì´ë¯¸ì§€ ê²€ìƒ‰**: ì°¨ëŸ‰ ì´ë¯¸ì§€ ê¸°ë°˜ ìœ ì‚¬ ì°¨ëŸ‰ ê²€ìƒ‰\n- **ê¸ˆìœµì‚¬ ì—°ë™**: ì‹¤ì‹œê°„ ëŒ€ì¶œ ìŠ¹ì¸ API ì—°ê³„\n\n### 3. ë°°í¬ í™˜ê²½\n```yaml\n# docker-compose.yml ì˜ˆì‹œ\nversion: '3.8'\nservices:\n  backend:\n    build: .\n    ports: [\"8000:8000\"]\n    environment:\n      - DATABASE_URL=postgresql://postgres:password@db:5432/carfin\n  \n  frontend:\n    build: ./frontend\n    ports: [\"5000:5000\"]\n  \n  db:\n    image: postgres:13\n    environment:\n      POSTGRES_DB: carfin\n      POSTGRES_PASSWORD: password\n```\n\n---\n\n## ğŸ‘¥ ê°œë°œíŒ€ ê°€ì´ë“œ\n\n### 1. ì½”ë“œ ì»¨ë²¤ì…˜\n```python\n# Python (Black í¬ë§¤í„° ì‚¬ìš©)\ndef get_user_recommendations(user_id: str) -> List[CarRecommendation]:\n    \"\"\"ì‚¬ìš©ìë³„ ì°¨ëŸ‰ ì¶”ì²œì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\"\"\"\n    pass\n```\n\n```typescript\n// TypeScript (ESLint + Prettier)\ninterface UserPreferences {\n  budgetMin?: number;\n  budgetMax?: number;\n  fuelType?: 'gasoline' | 'hybrid' | 'electric';\n}\n```\n\n### 2. Git ì›Œí¬í”Œë¡œìš°\n```bash\n# ê¸°ëŠ¥ ê°œë°œ\ngit checkout -b feature/new-ml-algorithm\ngit commit -m \"feat: ìƒˆë¡œìš´ ML ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„\"\ngit push origin feature/new-ml-algorithm\n\n# PR ìƒì„± í›„ ë¦¬ë·°\n# ë©”ì¸ ë¸Œëœì¹˜ ë¨¸ì§€\n```\n\n### 3. í…ŒìŠ¤íŠ¸ ì „ëµ\n```python\n# ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸\npytest tests/test_agents.py\npytest tests/test_ml_engine.py\n\n# í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸\nnpm test\nnpm run test:coverage\n```\n\n---\n\n## ğŸ“ ì§€ì› ë° ë¬¸ì˜\n\n### ë¬¸ì œ í•´ê²° ìˆœì„œ\n1. **ë¡œê·¸ í™•ì¸**: ë°±ì—”ë“œ/í”„ë¡ íŠ¸ì—”ë“œ ë¡œê·¸ ë¶„ì„\n2. **API í…ŒìŠ¤íŠ¸**: curl ë˜ëŠ” Postmanìœ¼ë¡œ API ì§ì ‘ í…ŒìŠ¤íŠ¸\n3. **ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸**: PostgreSQL ì—°ê²° ë° ë°ì´í„° ê²€ì¦\n4. **ì˜ì¡´ì„± í™•ì¸**: Python/Node.js íŒ¨í‚¤ì§€ ë²„ì „ ê²€ì¦\n\n### ì£¼ìš” ì„¤ì • íŒŒì¼\n- `pyproject.toml`: Python ì˜ì¡´ì„±\n- `package.json`: Node.js ì˜ì¡´ì„±\n- `vite.config.ts`: í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ì„¤ì •\n- `.env`: í™˜ê²½ ë³€ìˆ˜\n\n### ê°œë°œ ë„êµ¬\n- **API ë¬¸ì„œ**: http://localhost:8000/docs (FastAPI ìë™ ìƒì„±)\n- **ë°ì´í„°ë² ì´ìŠ¤ GUI**: pgAdmin ë˜ëŠ” DBeaver\n- **ë¡œê·¸ ë·°ì–´**: tail, journalctl ë˜ëŠ” GUI ë„êµ¬\n\n---\n\n**ğŸ¯ ì´ READMEë¥¼ ë”°ë¼í•˜ë©´ ë‹¤ë¥¸ ì—ì´ì „íŠ¸ë„ CarFin AI ì‹œìŠ¤í…œì„ ì™„ì „íˆ ì´í•´í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!** \n\n**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025ë…„ 9ì›” 16ì¼  \n**ê°œë°œì**: AI Agent  \n**ê¸°ìˆ  ìŠ¤íƒ**: Python, React, CrewAI, PyCaret, OpenAI GPT-5, PostgreSQL","size_bytes":20467},"CarFin_Python_Files/README.md":{"content":"# CarFin AI ë©€í‹°ì—ì´ì „íŠ¸ ì°¨ëŸ‰ ì¶”ì²œ ì‹œìŠ¤í…œ ğŸ“\n\n## ğŸš— í”„ë¡œì íŠ¸ ê°œìš”\nCrewAI ê¸°ë°˜ ë©€í‹°ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œìœ¼ë¡œ ê°œì¸í™”ëœ ì°¨ëŸ‰ ì¶”ì²œê³¼ ê¸ˆìœµ ìƒë‹´ì„ ì œê³µí•˜ëŠ” AI ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.\n\n## ğŸ“‚ í´ë” êµ¬ì¡°\n\n### ğŸ”§ backend/\n**FastAPI ë°±ì—”ë“œ ì„œë²„**\n- `simple_main.py`: ë©”ì¸ ì„œë²„ íŒŒì¼ (í¬íŠ¸ 8000)\n  - RESTful API ì—”ë“œí¬ì¸íŠ¸ ì œê³µ\n  - ë©€í‹°ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œê³¼ ì—°ë™\n  - ì‚¬ìš©ì ê´€ë¦¬, ì±„íŒ…, ì¶”ì²œ, ê¸ˆìœµ ìƒë‹´ API\n\n### ğŸ¤– agents/\n**CrewAI ë©€í‹°ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ**\n- `crew_setup.py`: AI ì—ì´ì „íŠ¸ ì„¤ì • ë° ê´€ë¦¬\n  - ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€ ì—ì´ì „íŠ¸\n  - ìë™ì°¨ ê¸ˆìœµ ìƒë‹´ ì „ë¬¸ê°€ ì—ì´ì „íŠ¸\n  - OpenAI GPT-5 í†µí•©\n  - PyCaret ML ì—”ì§„ ì—°ë™\n\n### ğŸ§  ml_engine/\n**PyCaret ê¸°ë°˜ ë¨¸ì‹ ëŸ¬ë‹ ì¶”ì²œ ì—”ì§„**\n- `recommendation_engine.py`: ML ì¶”ì²œ ì‹œìŠ¤í…œ\n  - í˜‘ì—… í•„í„°ë§ ê¸°ë°˜ ê°œì¸í™” ì¶”ì²œ\n  - ì‚¬ìš©ì í”„ë¡œí•„ ë¶„ì„\n  - ì°¨ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ë° í›ˆë ¨\n\n### ğŸ“Š data_crawler/\n**ë°ì´í„° ìˆ˜ì§‘ ë° ì²˜ë¦¬**\n- `encar_crawler.py`: ì—”ì¹´ ì°¨ëŸ‰ ë°ì´í„° í¬ë¡¤ëŸ¬\n- `encar_sample_data.py`: ìƒ˜í”Œ ë°ì´í„° ìƒì„±\n- `aws_encar_crawler.py`: AWS ê¸°ë°˜ í¬ë¡¤ëŸ¬\n\n## ğŸ”§ ì˜ì¡´ì„±\n- `pyproject.toml`: Python íŒ¨í‚¤ì§€ ì˜ì¡´ì„± ê´€ë¦¬\n  - FastAPI, CrewAI, PyCaret, OpenAI, SQLAlchemy ë“±\n\n## ğŸš€ ì‹¤í–‰ ë°©ë²•\n\n### 1. ì˜ì¡´ì„± ì„¤ì¹˜\n```bash\n# uvë¥¼ ì‚¬ìš©í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜\nuv sync\n```\n\n### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •\n```bash\nexport OPENAI_API_KEY=\"your_openai_api_key\"\nexport DATABASE_URL=\"your_database_url\"\n```\n\n### 3. ì„œë²„ ì‹¤í–‰\n```bash\n# ë°±ì—”ë“œ ì„œë²„ ì‹œì‘\npython backend/simple_main.py\n```\n\n## ğŸ”„ ì‹œìŠ¤í…œ íë¦„\n\n1. **ì‚¬ìš©ì ì…ë ¥** â†’ FastAPI ì„œë²„ (`simple_main.py`)\n2. **AI ì—ì´ì „íŠ¸ ì²˜ë¦¬** â†’ CrewAI ì‹œìŠ¤í…œ (`crew_setup.py`)\n3. **ML ë¶„ì„** â†’ PyCaret ì¶”ì²œ ì—”ì§„ (`recommendation_engine.py`)\n4. **ë°ì´í„° ì†ŒìŠ¤** â†’ ì—”ì¹´ í¬ë¡¤ëŸ¬ (`data_crawler/`)\n\n## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥\n\n- **ê°œì¸í™” ì°¨ëŸ‰ ì¶”ì²œ**: ì‚¬ìš©ì ì„ í˜¸ë„ ê¸°ë°˜ ML ì¶”ì²œ\n- **AI ê¸ˆìœµ ìƒë‹´**: ëŒ€ì¶œ/ë¦¬ìŠ¤/í• ë¶€ ì˜µì…˜ ë¶„ì„\n- **ì‹¤ì‹œê°„ ì±„íŒ…**: ë©€í‹°ì—ì´ì „íŠ¸ì™€ ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™”\n- **í•˜ì´ë¸Œë¦¬ë“œ UI**: ë¹ ë¥¸ ì…ë ¥ + ì±„íŒ… ì¸í„°í˜ì´ìŠ¤\n\n## ğŸ“ API ì—”ë“œí¬ì¸íŠ¸\n\n- `POST /api/chat`: AI ì—ì´ì „íŠ¸ ì±„íŒ… ìƒë‹´\n- `POST /api/recommend`: ì°¨ëŸ‰ ì¶”ì²œ ìš”ì²­\n- `POST /api/finance`: ê¸ˆìœµ ì˜µì…˜ ê³„ì‚°\n- `GET /health`: ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸\n\n---\n**ê°œë°œ ì™„ë£Œ**: 2025ë…„ 9ì›” 16ì¼  \n**ê¸°ìˆ  ìŠ¤íƒ**: Python, FastAPI, CrewAI, PyCaret, OpenAI GPT-5","size_bytes":2525},"CarFin_Python_Files/agents/crew_setup.py":{"content":"\"\"\"\nCrewAI Multi-Agent System for CarFin\nTwo specialized agents: Vehicle Recommendation + Finance Consultation\n\"\"\"\nimport os\nfrom typing import Dict, List, Any\nfrom crewai import Agent, Task, Crew, Process\nfrom ml.recommendation_engine import CarRecommendationEngine\nimport logging\n\n# Import OpenAI integration setup from blueprint\nfrom openai import OpenAI\n\n# the newest OpenAI model is \"gpt-5\" which was released August 7, 2025.\n# do not change this unless explicitly requested by the user\nOPENAI_API_KEY = os.environ.get(\"OPENAI_API_KEY\")\nopenai_client = OpenAI(api_key=OPENAI_API_KEY)\n\nclass CarFinAgents:\n    \"\"\"CarFin CrewAI Multi-Agent System\"\"\"\n    \n    def __init__(self):\n        self.logger = self._setup_logger()\n        self.recommendation_engine = CarRecommendationEngine()\n        self.vehicle_agent = None\n        self.finance_agent = None\n        self.crew = None\n        self._initialize_agents()\n    \n    def _setup_logger(self):\n        \"\"\"Set up logging\"\"\"\n        logging.basicConfig(level=logging.INFO)\n        return logging.getLogger(__name__)\n    \n    def _initialize_agents(self):\n        \"\"\"Initialize the two specialized agents\"\"\"\n        try:\n            # Load data for the recommendation engine\n            if not self.recommendation_engine.load_data():\n                self.logger.warning(\"Failed to load recommendation data\")\n            \n            # Train the ML model\n            if not self.recommendation_engine.train_model():\n                self.logger.warning(\"Failed to train recommendation model\")\n            \n            # Create Vehicle Recommendation Agent\n            self.vehicle_agent = Agent(\n                role=\"ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€\",\n                goal=\"ì‚¬ìš©ìì˜ ìš”êµ¬ì‚¬í•­ì„ ì •í™•íˆ ë¶„ì„í•˜ì—¬ PyCaret ML ê¸°ë°˜ìœ¼ë¡œ ìµœì ì˜ ì°¨ëŸ‰ 3ê°œë¥¼ ì¶”ì²œí•˜ê³  ì¹œê·¼í•˜ê²Œ ì„¤ëª…\",\n                backstory=\"\"\"\n                ìë™ì°¨ ì—…ê³„ì—ì„œ 10ë…„ê°„ ê·¼ë¬´í•œ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. \n                PyCaret ML ë¶„ì„ ëŠ¥ë ¥ì„ ë³´ìœ í•˜ê³  ìˆìœ¼ë©°, ê³ ê°ì˜ ë¼ì´í”„ìŠ¤íƒ€ì¼ê³¼ ì˜ˆì‚°ì„ ê³ ë ¤í•œ \n                ë§ì¶¤í˜• ì°¨ëŸ‰ ì¶”ì²œì— íŠ¹í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n                \n                íŠ¹íˆ 20-30ëŒ€ ì²« ì°¨ êµ¬ë§¤ìë“¤ì˜ ì‹¬ë¦¬ë¥¼ ì˜ ì´í•´í•˜ë©°, \n                ë³µì¡í•œ ê¸°ìˆ  ìš©ì–´ ëŒ€ì‹  ì‰½ê³  ì¹œê·¼í•œ ì–¸ì–´ë¡œ ì„¤ëª…í•˜ëŠ” ê²ƒì„ ì¤‘ì‹œí•©ë‹ˆë‹¤.\n                \"\"\",\n                verbose=True,\n                allow_delegation=False,\n                max_iter=3\n            )\n            \n            # Create Finance Consultation Agent  \n            self.finance_agent = Agent(\n                role=\"ìë™ì°¨ ê¸ˆìœµ ìƒë‹´ ì „ë¬¸ê°€\",\n                goal=\"ì„ íƒëœ ì°¨ëŸ‰ì— ëŒ€í•´ ëŒ€ì¶œ, ë¦¬ìŠ¤, í• ë¶€ ë“± ë‹¤ì–‘í•œ ê¸ˆìœµ ì˜µì…˜ì„ ê³„ì‚°í•˜ê³  ìµœì ì˜ ë°©ì•ˆì„ ì œì•ˆ\",\n                backstory=\"\"\"\n                ìë™ì°¨ ê¸ˆìœµ ë¶„ì•¼ì—ì„œ 8ë…„ê°„ ê·¼ë¬´í•œ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\n                ì€í–‰, ìºí”¼íƒˆ, ë¦¬ìŠ¤ íšŒì‚¬ ë“± ë‹¤ì–‘í•œ ê¸ˆìœµê¸°ê´€ì˜ ìƒí’ˆì— ì •í†µí•˜ë©°,\n                ê³ ê°ì˜ ì‹ ìš© ìƒí™©ê³¼ í˜„ê¸ˆ íë¦„ì„ ê³ ë ¤í•œ ë§ì¶¤í˜• ê¸ˆìœµ ì†”ë£¨ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.\n                \n                ë³µì¡í•œ ê¸ˆìœµ ê³„ì‚°ì„ ì‰½ê²Œ ì„¤ëª…í•˜ê³ , ê³ ê°ì´ ë¶€ë‹´ ì—†ì´ ì´í•´í•  ìˆ˜ ìˆë„ë¡ \n                ì›” ë‚©ë¶€ì•¡, ì´ ë¹„ìš©, í˜œíƒ ë“±ì„ ëª…í™•í•˜ê²Œ ë¹„êµí•´ë“œë¦½ë‹ˆë‹¤.\n                \"\"\",\n                verbose=True,\n                allow_delegation=False,\n                max_iter=3\n            )\n            \n            self.logger.info(\"Successfully initialized CarFin agents\")\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to initialize agents: {e}\")\n    \n    def _parse_user_requirements(self, user_message: str) -> Dict[str, Any]:\n        \"\"\"Parse user message to extract structured requirements\"\"\"\n        try:\n            # Use GPT-5 to parse user requirements into structured format\n            parse_prompt = f\"\"\"\n            ë‹¤ìŒ ì‚¬ìš©ì ë©”ì‹œì§€ë¥¼ ë¶„ì„í•˜ì—¬ ì°¨ëŸ‰ êµ¬ë§¤ ìš”êµ¬ì‚¬í•­ì„ JSON í˜•íƒœë¡œ ì¶”ì¶œí•´ì£¼ì„¸ìš”.\n\n            ì‚¬ìš©ì ë©”ì‹œì§€: \"{user_message}\"\n\n            ë‹¤ìŒ í˜•íƒœì˜ JSONìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”:\n            {{\n                \"budget_max\": ì˜ˆì‚° ìƒí•œì„  (ë§Œì›, ìˆ«ìë§Œ),\n                \"age_group\": \"20ëŒ€\" ë˜ëŠ” \"30ëŒ€\" ë“±,\n                \"purpose\": \"ì¶œí‡´ê·¼\", \"ê°€ì¡±ìš©\", \"ë ˆì €\" ë“± ì£¼ìš” ìš©ë„,\n                \"category\": \"Compact\", \"Mid-size\", \"SUV\", \"Luxury\" ì¤‘ ì„ í˜¸ ì¹´í…Œê³ ë¦¬,\n                \"fuel_type\": \"Gasoline\", \"Hybrid\", \"Electric\" ì¤‘ ì—°ë£Œ ì„ í˜¸,\n                \"priorities\": [\"ì—°ë¹„\", \"ì•ˆì „\", \"ë””ìì¸\", \"ê°€ê²©\"] ë“± ìš°ì„ ìˆœìœ„ ë°°ì—´,\n                \"experience\": \"ì²«ì°¨\", \"ê²½í—˜ìˆìŒ\" ë“± êµ¬ë§¤ê²½í—˜\n            }}\n            \n            ë§Œì•½ ëª…ì‹œë˜ì§€ ì•Šì€ ì •ë³´ê°€ ìˆë‹¤ë©´ ì¼ë°˜ì ì¸ í•œêµ­ì˜ í•´ë‹¹ ì—°ë ¹ëŒ€ ê¸°ì¤€ìœ¼ë¡œ ì¶”ì •í•´ì£¼ì„¸ìš”.\n            \"\"\"\n            \n            response = openai_client.chat.completions.create(\n                model=\"gpt-5\",\n                messages=[{\"role\": \"user\", \"content\": parse_prompt}],\n                response_format={\"type\": \"json_object\"}\n            )\n            \n            import json\n            response_content = response.choices[0].message.content\n            if response_content:\n                user_profile = json.loads(response_content)\n            else:\n                raise ValueError(\"OpenAI response content is empty\")\n            \n            # Add user_id for tracking\n            user_profile['user_id'] = f\"user_{hash(user_message) % 10000}\"\n            \n            return user_profile\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to parse user requirements: {e}\")\n            # Return default profile\n            return {\n                \"budget_max\": 4000,\n                \"age_group\": \"20-30ëŒ€\",\n                \"purpose\": \"ì¼ë°˜ ì£¼í–‰\",\n                \"category\": \"Compact\",\n                \"fuel_type\": \"Gasoline\",\n                \"priorities\": [\"ê°€ê²©\", \"ì—°ë¹„\"],\n                \"experience\": \"ì²«ì°¨\",\n                \"user_id\": \"default_user\"\n            }\n    \n    def create_recommendation_task(self, user_message: str) -> Task:\n        \"\"\"Create vehicle recommendation task\"\"\"\n        user_profile = self._parse_user_requirements(user_message)\n        \n        task_description = f\"\"\"\n        ì‚¬ìš©ì ìš”ì²­: \"{user_message}\"\n        \n        ë¶„ì„ëœ ì‚¬ìš©ì í”„ë¡œí•„:\n        - ì˜ˆì‚°: {user_profile.get('budget_max', 'ë¯¸ì§€ì •')}ë§Œì› ì´í•˜\n        - ì—°ë ¹ëŒ€: {user_profile.get('age_group', '20-30ëŒ€')}\n        - ì£¼ìš” ìš©ë„: {user_profile.get('purpose', 'ì¼ë°˜')}\n        - ì„ í˜¸ ì¹´í…Œê³ ë¦¬: {user_profile.get('category', 'Compact')}\n        - ì—°ë£Œ ì„ í˜¸: {user_profile.get('fuel_type', 'Gasoline')}\n        - ìš°ì„ ìˆœìœ„: {user_profile.get('priorities', ['ê°€ê²©', 'ì—°ë¹„'])}\n        \n        ì´ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒì„ ìˆ˜í–‰í•´ì£¼ì„¸ìš”:\n\n        1. PyCaret ML ì¶”ì²œ ì—”ì§„ì„ ì‚¬ìš©í•˜ì—¬ ìƒìœ„ 3ê°œ ì°¨ëŸ‰ ì¶”ì²œ\n        2. ê° ì°¨ëŸ‰ì— ëŒ€í•´ ì„ íƒ ì´ìœ ë¥¼ ì¹œê·¼í•˜ê³  ì´í•´í•˜ê¸° ì‰½ê²Œ ì„¤ëª…\n        3. ê°€ê²©, ì—°ë¹„, ì•ˆì „ì„± ë“± í•µì‹¬ ì •ë³´ ì œê³µ\n        4. ì²«ì°¨ êµ¬ë§¤ìë„ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆëŠ” ì–¸ì–´ ì‚¬ìš©\n\n        ì‘ë‹µ í˜•íƒœ:\n        - ì¶”ì²œ ì°¨ëŸ‰ 1: [ì°¨ëŸ‰ëª…] - [ê°€ê²©] - [í•µì‹¬ ì¥ì ê³¼ ì¶”ì²œ ì´ìœ ]\n        - ì¶”ì²œ ì°¨ëŸ‰ 2: [ì°¨ëŸ‰ëª…] - [ê°€ê²©] - [í•µì‹¬ ì¥ì ê³¼ ì¶”ì²œ ì´ìœ ]  \n        - ì¶”ì²œ ì°¨ëŸ‰ 3: [ì°¨ëŸ‰ëª…] - [ê°€ê²©] - [í•µì‹¬ ì¥ì ê³¼ ì¶”ì²œ ì´ìœ ]\n        \n        ë§ˆì§€ë§‰ì— ì–´ë–¤ ì°¨ëŸ‰ì´ ê°€ì¥ ë§ˆìŒì— ë“œì‹œëŠ”ì§€ ë¬¼ì–´ë³´ê³  ê¸ˆìœµ ìƒë‹´ì„ ì•ˆë‚´í•´ì£¼ì„¸ìš”.\n        \"\"\"\n        \n        return Task(\n            description=task_description,\n            agent=self.vehicle_agent,\n            expected_output=\"ì‚¬ìš©ì ë§ì¶¤í˜• ì°¨ëŸ‰ 3ê°œ ì¶”ì²œê³¼ ì¹œê·¼í•œ ì„¤ëª…\"\n        )\n    \n    def create_finance_task(self, selected_car_id: str, user_budget: int) -> Task:\n        \"\"\"Create finance consultation task\"\"\"\n        task_description = f\"\"\"\n        ì„ íƒëœ ì°¨ëŸ‰ ID: {selected_car_id}\n        ì‚¬ìš©ì ì˜ˆì‚°: {user_budget}ë§Œì›\n\n        ì´ ì°¨ëŸ‰ì— ëŒ€í•´ ë‹¤ìŒ ê¸ˆìœµ ì˜µì…˜ë“¤ì„ ê³„ì‚°í•˜ê³  ë¹„êµí•´ì£¼ì„¸ìš”:\n\n        1. í˜„ê¸ˆ ì¼ì‹œë¶ˆ\n        2. ì€í–‰ ëŒ€ì¶œ (5ë…„ ê¸°ì¤€)\n        3. ìºí”¼íƒˆ í• ë¶€ (5ë…„ ê¸°ì¤€) \n        4. ë¦¬ìŠ¤ (4ë…„ ê¸°ì¤€)\n\n        ê° ì˜µì…˜ë³„ë¡œ ì œê³µí•´ì£¼ì„¸ìš”:\n        - ì›” ë‚©ë¶€ì•¡\n        - ì´ ì§€ê¸‰ ë¹„ìš©\n        - ì¥ì ê³¼ ë‹¨ì \n        - ì í•©í•œ ê³ ê° ìœ í˜•\n\n        ì‚¬ìš©ìì˜ ì˜ˆì‚° ìƒí™©ì„ ê³ ë ¤í•˜ì—¬ ê°€ì¥ ì í•©í•œ ì˜µì…˜ 1-2ê°œë¥¼ ì¶”ì²œí•˜ê³  ì´ìœ ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.\n        ë³µì¡í•œ ê¸ˆìœµ ìš©ì–´ë³´ë‹¤ëŠ” ì‹¤ìƒí™œì—ì„œ ì´í•´í•˜ê¸° ì‰¬ìš´ í‘œí˜„ì„ ì‚¬ìš©í•´ì£¼ì„¸ìš”.\n        \"\"\"\n        \n        return Task(\n            description=task_description,\n            agent=self.finance_agent,\n            expected_output=\"ì„ íƒ ì°¨ëŸ‰ì˜ ë‹¤ì–‘í•œ ê¸ˆìœµ ì˜µì…˜ ë¹„êµì™€ ë§ì¶¤ ì¶”ì²œ\"\n        )\n    \n    def get_vehicle_recommendations(self, user_message: str) -> Dict[str, Any]:\n        \"\"\"Get vehicle recommendations from the multi-agent crew\"\"\"\n        try:\n            # Parse user requirements for ML engine\n            user_profile = self._parse_user_requirements(user_message)\n            \n            # Get ML-based recommendations\n            ml_recommendations = self.recommendation_engine.get_recommendations(\n                user_profile, n_recommendations=3\n            )\n            \n            # Create recommendation task\n            rec_task = self.create_recommendation_task(user_message)\n            \n            # Ensure agent is properly initialized\n            if self.vehicle_agent is None:\n                raise ValueError(\"Vehicle agent is not initialized\")\n            \n            # Create crew with just the vehicle agent for this task\n            crew = Crew(\n                agents=[self.vehicle_agent],\n                tasks=[rec_task],\n                process=Process.sequential,\n                verbose=True\n            )\n            \n            # Execute the crew\n            agent_response = crew.kickoff()\n            \n            return {\n                \"status\": \"success\",\n                \"agent_response\": str(agent_response),\n                \"ml_recommendations\": ml_recommendations,\n                \"user_profile\": user_profile\n            }\n            \n        except Exception as e:\n            self.logger.error(f\"Vehicle recommendation failed: {e}\")\n            return {\n                \"status\": \"error\",\n                \"message\": f\"ì¶”ì²œ ì‹œìŠ¤í…œì— ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\",\n                \"ml_recommendations\": [],\n                \"user_profile\": {}\n            }\n    \n    def get_finance_consultation(self, car_id: str, user_budget: int) -> Dict[str, Any]:\n        \"\"\"Get finance consultation from the finance agent\"\"\"\n        try:\n            # Get car details\n            car_details = self.recommendation_engine.get_car_details(int(car_id))\n            if not car_details:\n                return {\n                    \"status\": \"error\",\n                    \"message\": \"ì„ íƒí•˜ì‹  ì°¨ëŸ‰ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\"\n                }\n            \n            # Create finance task\n            finance_task = self.create_finance_task(car_id, user_budget)\n            \n            # Ensure agent is properly initialized\n            if self.finance_agent is None:\n                raise ValueError(\"Finance agent is not initialized\")\n            \n            # Create crew with just the finance agent\n            crew = Crew(\n                agents=[self.finance_agent],\n                tasks=[finance_task],\n                process=Process.sequential,\n                verbose=True\n            )\n            \n            # Execute the crew\n            agent_response = crew.kickoff()\n            \n            # Calculate actual finance options\n            finance_options = self._calculate_finance_options(car_details['price'], user_budget)\n            \n            return {\n                \"status\": \"success\",\n                \"agent_response\": str(agent_response),\n                \"car_details\": car_details,\n                \"finance_options\": finance_options\n            }\n            \n        except Exception as e:\n            self.logger.error(f\"Finance consultation failed: {e}\")\n            return {\n                \"status\": \"error\", \n                \"message\": f\"ê¸ˆìœµ ìƒë‹´ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\"\n            }\n    \n    def _calculate_finance_options(self, car_price: int, user_budget: int) -> List[Dict]:\n        \"\"\"Calculate actual finance options\"\"\"\n        try:\n            options = []\n            \n            # Cash purchase\n            options.append({\n                \"type\": \"í˜„ê¸ˆ ì¼ì‹œë¶ˆ\",\n                \"monthly_payment\": 0,\n                \"total_cost\": car_price,\n                \"down_payment\": car_price,\n                \"description\": \"ì°¨ëŸ‰ ì†Œìœ ê¶Œ ì¦‰ì‹œ íšë“, ì´ì ë¶€ë‹´ ì—†ìŒ\"\n            })\n            \n            # Bank loan (5 years, 4% interest)\n            loan_amount = min(car_price * 0.9, car_price - 500)  # 90% ëŒ€ì¶œ ë˜ëŠ” 500ë§Œì› ìë¶€ë‹´\n            if loan_amount > 0:\n                monthly_rate = 0.04 / 12\n                months = 60\n                monthly_payment = loan_amount * (monthly_rate * (1 + monthly_rate)**months) / ((1 + monthly_rate)**months - 1)\n                total_cost = monthly_payment * months + (car_price - loan_amount)\n                \n                options.append({\n                    \"type\": \"ì€í–‰ ëŒ€ì¶œ (5ë…„)\",\n                    \"monthly_payment\": int(monthly_payment),\n                    \"total_cost\": int(total_cost),\n                    \"down_payment\": car_price - loan_amount,\n                    \"description\": \"ë‚®ì€ ê¸ˆë¦¬, ì°¨ëŸ‰ ì†Œìœ ê¶Œ íšë“\"\n                })\n            \n            # Capital installment (5 years, 6% interest)\n            installment_months = 60\n            monthly_rate = 0.06 / 12\n            monthly_payment = car_price * (monthly_rate * (1 + monthly_rate)**installment_months) / ((1 + monthly_rate)**installment_months - 1)\n            \n            options.append({\n                \"type\": \"í• ë¶€ (5ë…„)\",\n                \"monthly_payment\": int(monthly_payment),\n                \"total_cost\": int(monthly_payment * installment_months),\n                \"down_payment\": 0,\n                \"description\": \"ìê¸°ìë³¸ ë¶€ë‹´ ì ìŒ, í• ë¶€ ì™„ë£Œ ì‹œ ì†Œìœ ê¶Œ íšë“\"\n            })\n            \n            # Lease (4 years)\n            lease_months = 48\n            residual_value = car_price * 0.4  # 40% residual\n            lease_payment = (car_price - residual_value + (car_price * 0.03)) / lease_months\n            \n            options.append({\n                \"type\": \"ë¦¬ìŠ¤ (4ë…„)\",\n                \"monthly_payment\": int(lease_payment),\n                \"total_cost\": int(lease_payment * lease_months),\n                \"down_payment\": car_price * 0.1,  # 10% down payment\n                \"description\": \"ë‚®ì€ ì›” ë‚©ë¶€ì•¡, ê³„ì•½ ì¢…ë£Œ ì‹œ ë°˜ë‚© ë˜ëŠ” êµ¬ë§¤ ì„ íƒ\"\n            })\n            \n            return options\n            \n        except Exception as e:\n            self.logger.error(f\"Finance calculation failed: {e}\")\n            return []\n\n# Global instance\ncarfin_agents = CarFinAgents()","size_bytes":15403},"CarFin_Python_Files/backend/simple_main.py":{"content":"\"\"\"\nSimplified CarFin FastAPI Backend for testing\n\"\"\"\nimport os\nimport pandas as pd\nimport uuid\nimport hashlib\nfrom typing import Dict, List, Any, Optional\nfrom fastapi import FastAPI, HTTPException\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom pydantic import BaseModel, Field\nimport logging\n\n# Configure logging\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\n# Initialize FastAPI app\napp = FastAPI(\n    title=\"CarFin AI\",\n    description=\"CrewAI ë©€í‹°ì—ì´ì „íŠ¸ ì°¨ëŸ‰ ì¶”ì²œ ë° ê¸ˆìœµ ìƒë‹´ ì‹œìŠ¤í…œ\",\n    version=\"1.0.0\"\n)\n\n# Add CORS middleware\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\n# Pydantic models\nclass UserRequest(BaseModel):\n    message: str = Field(..., description=\"ì‚¬ìš©ìì˜ ì°¨ëŸ‰ ì¶”ì²œ ìš”ì²­ ë©”ì‹œì§€\")\n    user_id: Optional[str] = Field(None, description=\"ì‚¬ìš©ì ID (ì„ íƒì )\")\n\nclass CarSelection(BaseModel):\n    car_id: str = Field(..., description=\"ì„ íƒëœ ì°¨ëŸ‰ ID\")\n    user_budget: int = Field(..., description=\"ì‚¬ìš©ì ì˜ˆì‚° (ë§Œì› ë‹¨ìœ„)\")\n\n# New models for chatbot integration\nclass UserRegistration(BaseModel):\n    full_name: str = Field(..., description=\"ì‚¬ìš©ì ì „ì²´ ì´ë¦„\")\n    email: str = Field(..., description=\"ì´ë©”ì¼ ì£¼ì†Œ\")\n    age: int = Field(..., description=\"ë‚˜ì´\")\n    phone: Optional[str] = Field(None, description=\"ì „í™”ë²ˆí˜¸ (ì„ íƒì )\")\n\nclass UserPreferences(BaseModel):\n    user_id: str = Field(..., description=\"ì‚¬ìš©ì ID\")\n    budget_min: Optional[int] = Field(None, description=\"ìµœì†Œ ì˜ˆì‚° (ë§Œì›)\")\n    budget_max: Optional[int] = Field(None, description=\"ìµœëŒ€ ì˜ˆì‚° (ë§Œì›)\")\n    fuel_type: Optional[str] = Field(None, description=\"ì—°ë£Œ íƒ€ì…\")\n    category: Optional[str] = Field(None, description=\"ì°¨ëŸ‰ ì¹´í…Œê³ ë¦¬\")\n    transmission: Optional[str] = Field(None, description=\"ë³€ì†ê¸° íƒ€ì…\")\n    family_size: Optional[int] = Field(None, description=\"ê°€ì¡± êµ¬ì„±ì› ìˆ˜\")\n    usage_purpose: Optional[str] = Field(None, description=\"ì‚¬ìš© ëª©ì \")\n\nclass ChatMessage(BaseModel):\n    user_id: str = Field(..., description=\"ì‚¬ìš©ì ID\")\n    message: str = Field(..., description=\"ì±„íŒ… ë©”ì‹œì§€\")\n    context: Optional[Dict[str, Any]] = Field(None, description=\"ëŒ€í™” ì»¨í…ìŠ¤íŠ¸\")\n\n# Global agent system - lazy load\n_carfin_agents = None\n\n# In-memory storage for demo (would use database in production)\nusers_db = {}  # user_id -> user_data\npreferences_db = {}  # user_id -> preferences\nconversations_db = {}  # user_id -> conversation_history\n\ndef get_agents():\n    global _carfin_agents\n    if _carfin_agents is None:\n        try:\n            from agents.crew_setup import carfin_agents\n            _carfin_agents = carfin_agents\n            logger.info(\"Agents loaded successfully\")\n        except Exception as e:\n            logger.error(f\"Failed to load agents: {e}\")\n            raise\n    return _carfin_agents\n\n@app.get(\"/\")\nasync def root():\n    \"\"\"Health check endpoint\"\"\"\n    return {\n        \"message\": \"CarFin AI Backend is running\",\n        \"status\": \"healthy\",\n        \"version\": \"1.0.0\"\n    }\n\n@app.get(\"/health\")\nasync def health_check():\n    \"\"\"Detailed health check\"\"\"\n    try:\n        agents = get_agents()\n        agents_status = \"initialized\" if agents.recommendation_engine else \"error\"\n        \n        return {\n            \"status\": \"healthy\",\n            \"agents\": agents_status,\n            \"database\": \"connected\" if agents.recommendation_engine.engine else \"disconnected\"\n        }\n    except Exception as e:\n        return {\n            \"status\": \"unhealthy\",\n            \"error\": str(e)\n        }\n\n@app.post(\"/api/recommend\")\nasync def get_car_recommendation(request: UserRequest):\n    \"\"\"Get personalized car recommendations\"\"\"\n    try:\n        logger.info(f\"Processing recommendation request: {request.message[:50]}...\")\n        \n        agents = get_agents()\n        result = agents.get_vehicle_recommendations(request.message)\n        \n        if result[\"status\"] == \"error\":\n            raise HTTPException(status_code=500, detail=result[\"message\"])\n        \n        return result\n        \n    except Exception as e:\n        logger.error(f\"Recommendation request failed: {e}\")\n        raise HTTPException(\n            status_code=500, \n            detail=f\"ì°¨ëŸ‰ ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\"\n        )\n\n@app.post(\"/api/finance\")\nasync def get_finance_options(selection: CarSelection):\n    \"\"\"Get finance consultation for selected car\"\"\"\n    try:\n        logger.info(f\"Processing finance consultation for car {selection.car_id}\")\n        \n        agents = get_agents()\n        result = agents.get_finance_consultation(\n            selection.car_id, \n            selection.user_budget\n        )\n        \n        if result[\"status\"] == \"error\":\n            raise HTTPException(status_code=500, detail=result[\"message\"])\n        \n        return result\n        \n    except Exception as e:\n        logger.error(f\"Finance consultation failed: {e}\")\n        raise HTTPException(\n            status_code=500,\n            detail=f\"ê¸ˆìœµ ìƒë‹´ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\"\n        )\n\n@app.get(\"/api/cars/{car_id}\")\nasync def get_car_details(car_id: int):\n    \"\"\"Get detailed information about a specific car\"\"\"\n    try:\n        agents = get_agents()\n        car_details = agents.recommendation_engine.get_car_details(car_id)\n        \n        if not car_details:\n            raise HTTPException(status_code=404, detail=\"ì°¨ëŸ‰ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\")\n        \n        return {\n            \"status\": \"success\",\n            \"car\": car_details\n        }\n        \n    except HTTPException:\n        raise\n    except Exception as e:\n        logger.error(f\"Failed to get car details: {e}\")\n        raise HTTPException(status_code=500, detail=\"ì°¨ëŸ‰ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤\")\n\n# New API endpoints for chatbot integration\n\n@app.post(\"/api/users/register\")\nasync def register_user(user_data: UserRegistration):\n    \"\"\"Register a new user for the chatbot system\"\"\"\n    try:\n        # Generate user ID\n        user_id = str(uuid.uuid4())\n        \n        # Check if email already exists\n        for existing_user in users_db.values():\n            if existing_user.get('email') == user_data.email:\n                raise HTTPException(status_code=400, detail=\"ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤\")\n        \n        # Store user data\n        users_db[user_id] = {\n            \"user_id\": user_id,\n            \"full_name\": user_data.full_name,\n            \"email\": user_data.email,\n            \"age\": user_data.age,\n            \"phone\": user_data.phone,\n            \"created_at\": pd.Timestamp.now().isoformat()\n        }\n        \n        logger.info(f\"New user registered: {user_data.full_name} ({user_id})\")\n        \n        return {\n            \"status\": \"success\",\n            \"message\": \"íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤\",\n            \"user_id\": user_id,\n            \"user_data\": users_db[user_id]\n        }\n        \n    except HTTPException:\n        raise\n    except Exception as e:\n        logger.error(f\"User registration failed: {e}\")\n        raise HTTPException(status_code=500, detail=\"íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤\")\n\n@app.post(\"/api/users/{user_id}/preferences\")\nasync def save_user_preferences(user_id: str, preferences: UserPreferences):\n    \"\"\"Save user preferences for vehicle recommendations\"\"\"\n    try:\n        # Verify user exists\n        if user_id not in users_db:\n            raise HTTPException(status_code=404, detail=\"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\")\n        \n        # Store preferences\n        preferences_db[user_id] = {\n            \"user_id\": user_id,\n            \"budget_min\": preferences.budget_min,\n            \"budget_max\": preferences.budget_max,\n            \"fuel_type\": preferences.fuel_type,\n            \"category\": preferences.category,\n            \"transmission\": preferences.transmission,\n            \"family_size\": preferences.family_size,\n            \"usage_purpose\": preferences.usage_purpose,\n            \"updated_at\": pd.Timestamp.now().isoformat()\n        }\n        \n        logger.info(f\"Preferences saved for user {user_id}\")\n        \n        return {\n            \"status\": \"success\",\n            \"message\": \"ì„ í˜¸ë„ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤\",\n            \"preferences\": preferences_db[user_id]\n        }\n        \n    except HTTPException:\n        raise\n    except Exception as e:\n        logger.error(f\"Failed to save preferences: {e}\")\n        raise HTTPException(status_code=500, detail=\"ì„ í˜¸ë„ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤\")\n\n@app.get(\"/api/users/{user_id}\")\nasync def get_user_info(user_id: str):\n    \"\"\"Get user information\"\"\"\n    try:\n        if user_id not in users_db:\n            raise HTTPException(status_code=404, detail=\"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\")\n        \n        user_data = users_db[user_id]\n        preferences = preferences_db.get(user_id, {})\n        \n        return {\n            \"status\": \"success\",\n            \"user\": user_data,\n            \"preferences\": preferences\n        }\n        \n    except HTTPException:\n        raise\n    except Exception as e:\n        logger.error(f\"Failed to get user info: {e}\")\n        raise HTTPException(status_code=500, detail=\"ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤\")\n\n@app.post(\"/api/chat\")\nasync def chat_consultation(chat_request: ChatMessage):\n    \"\"\"Real-time chat consultation with AI agents\"\"\"\n    try:\n        user_id = chat_request.user_id\n        message = chat_request.message\n        \n        # Verify user exists\n        if user_id not in users_db:\n            raise HTTPException(status_code=404, detail=\"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\")\n        \n        # Get user data and preferences\n        user_data = users_db[user_id]\n        preferences = preferences_db.get(user_id, {})\n        \n        # Initialize conversation history if not exists\n        if user_id not in conversations_db:\n            conversations_db[user_id] = []\n        \n        # Add user message to conversation history\n        conversations_db[user_id].append({\n            \"role\": \"user\",\n            \"message\": message,\n            \"timestamp\": pd.Timestamp.now().isoformat()\n        })\n        \n        # Create comprehensive context for AI agents\n        context_message = f\"\"\"\n        ì‚¬ìš©ì ì •ë³´:\n        - ì´ë¦„: {user_data['full_name']}\n        - ë‚˜ì´: {user_data['age']}ì„¸\n        \n        ì„ í˜¸ë„ ì •ë³´:\n        - ì˜ˆì‚°: {preferences.get('budget_min', 'ë¯¸ì§€ì •')}ë§Œì› ~ {preferences.get('budget_max', 'ë¯¸ì§€ì •')}ë§Œì›\n        - ì—°ë£Œíƒ€ì…: {preferences.get('fuel_type', 'ë¯¸ì§€ì •')}\n        - ì°¨ëŸ‰ì¹´í…Œê³ ë¦¬: {preferences.get('category', 'ë¯¸ì§€ì •')}\n        - ê°€ì¡±êµ¬ì„±ì›: {preferences.get('family_size', 'ë¯¸ì§€ì •')}ëª…\n        - ì‚¬ìš©ëª©ì : {preferences.get('usage_purpose', 'ë¯¸ì§€ì •')}\n        \n        ì‚¬ìš©ì ë©”ì‹œì§€: {message}\n        \n        ìœ„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë§ì¶¤í˜• ìƒë‹´ì„ ì œê³µí•´ì£¼ì„¸ìš”.\n        \"\"\"\n        \n        # Get AI agent response\n        agents = get_agents()\n        ai_response = agents.get_vehicle_recommendations(context_message)\n        \n        # Add AI response to conversation history\n        conversations_db[user_id].append({\n            \"role\": \"assistant\",\n            \"message\": ai_response.get('agent_response', ''),\n            \"timestamp\": pd.Timestamp.now().isoformat(),\n            \"ml_data\": ai_response.get('ml_recommendations', [])\n        })\n        \n        logger.info(f\"Chat consultation completed for user {user_id}\")\n        \n        return {\n            \"status\": \"success\",\n            \"response\": ai_response.get('agent_response', ''),\n            \"ml_recommendations\": ai_response.get('ml_recommendations', []),\n            \"conversation_id\": len(conversations_db[user_id])\n        }\n        \n    except HTTPException:\n        raise\n    except Exception as e:\n        logger.error(f\"Chat consultation failed: {e}\")\n        raise HTTPException(status_code=500, detail=\"AI ìƒë‹´ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤\")\n\n@app.get(\"/api/users/{user_id}/conversations\")\nasync def get_conversation_history(user_id: str):\n    \"\"\"Get conversation history for a user\"\"\"\n    try:\n        if user_id not in users_db:\n            raise HTTPException(status_code=404, detail=\"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\")\n        \n        conversations = conversations_db.get(user_id, [])\n        \n        return {\n            \"status\": \"success\",\n            \"conversations\": conversations,\n            \"total\": len(conversations)\n        }\n        \n    except HTTPException:\n        raise\n    except Exception as e:\n        logger.error(f\"Failed to get conversations: {e}\")\n        raise HTTPException(status_code=500, detail=\"ëŒ€í™” ê¸°ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤\")\n\nif __name__ == \"__main__\":\n    import uvicorn\n    \n    # Backend runs on port 8000, frontend on 5000 for Replit webview\n    port = int(os.environ.get(\"PORT\", 8000))\n    \n    logger.info(f\"Starting CarFin AI server on port {port}\")\n    \n    uvicorn.run(\n        \"simple_main:app\",\n        host=\"0.0.0.0\",\n        port=port,\n        reload=False,  # Disable reload to avoid issues\n        log_level=\"info\"\n    )","size_bytes":13315},"CarFin_Python_Files/data_crawler/aws_encar_crawler.py":{"content":"\"\"\"\nAWS PostgreSQL ì—°ê²° ì—”ì¹´ í¬ë¡¤ëŸ¬\nAWS RDS PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì— ì—”ì¹´ ì¤‘ê³ ì°¨ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\n\"\"\"\nimport os\nimport random\nfrom sqlalchemy import create_engine, text\nimport pandas as pd\nimport logging\nimport psycopg2\n\nlogger = logging.getLogger(__name__)\n\nclass AWSEncarCrawler:\n    \"\"\"AWS PostgreSQL ì—°ê²° ì—”ì¹´ í¬ë¡¤ëŸ¬\"\"\"\n    \n    def __init__(self):\n        # AWS PostgreSQL ì—°ê²° ì •ë³´\n        self.aws_host = os.environ.get('AWS_DB_HOST')\n        self.aws_user = os.environ.get('AWS_DB_USER') \n        self.aws_password = os.environ.get('AWS_DB_PASSWORD')\n        self.aws_db = os.environ.get('AWS_DB_NAME')\n        self.aws_port = os.environ.get('AWS_DB_PORT', '5432')\n        \n        # AWS ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° URL ìƒì„±\n        if all([self.aws_host, self.aws_user, self.aws_password, self.aws_db]):\n            self.aws_db_url = f\"postgresql://{self.aws_user}:{self.aws_password}@{self.aws_host}:{self.aws_port}/{self.aws_db}\"\n            print(f\"âœ… AWS PostgreSQL ì—°ê²° ì •ë³´ í™•ì¸ë¨\")\n            print(f\"   í˜¸ìŠ¤íŠ¸: {self.aws_host}\")\n            print(f\"   ë°ì´í„°ë² ì´ìŠ¤: {self.aws_db}\")\n            print(f\"   í¬íŠ¸: {self.aws_port}\")\n        else:\n            print(\"âŒ AWS PostgreSQL ì—°ê²° ì •ë³´ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤\")\n            self.aws_db_url = None\n    \n    def test_connection(self):\n        \"\"\"AWS PostgreSQL ì—°ê²° í…ŒìŠ¤íŠ¸\"\"\"\n        if not self.aws_db_url:\n            return False\n            \n        try:\n            engine = create_engine(self.aws_db_url)\n            with engine.connect() as conn:\n                result = conn.execute(text(\"SELECT version()\"))\n                version = result.fetchone()[0]\n                print(f\"âœ… AWS PostgreSQL ì—°ê²° ì„±ê³µ!\")\n                print(f\"   ë²„ì „: {version[:50]}...\")\n                return True\n        except Exception as e:\n            print(f\"âŒ AWS PostgreSQL ì—°ê²° ì‹¤íŒ¨: {e}\")\n            return False\n    \n    def setup_cars_table(self):\n        \"\"\"cars í…Œì´ë¸” ìƒì„± (ì—†ëŠ” ê²½ìš°)\"\"\"\n        if not self.aws_db_url:\n            return False\n            \n        try:\n            engine = create_engine(self.aws_db_url)\n            \n            create_table_query = \"\"\"\n            CREATE TABLE IF NOT EXISTS cars (\n                id SERIAL PRIMARY KEY,\n                make VARCHAR(50) NOT NULL,\n                model VARCHAR(100) NOT NULL,\n                year INTEGER NOT NULL,\n                price INTEGER NOT NULL,\n                fuel_type VARCHAR(20) NOT NULL,\n                category VARCHAR(20) NOT NULL,\n                engine_size DECIMAL(3,1),\n                fuel_efficiency INTEGER,\n                transmission VARCHAR(10),\n                safety_rating INTEGER,\n                description TEXT\n            );\n            \"\"\"\n            \n            with engine.connect() as conn:\n                conn.execute(text(create_table_query))\n                conn.commit()\n                print(\"âœ… cars í…Œì´ë¸” ìƒì„± ì™„ë£Œ\")\n                return True\n                \n        except Exception as e:\n            print(f\"âŒ í…Œì´ë¸” ìƒì„± ì‹¤íŒ¨: {e}\")\n            return False\n    \n    def generate_encar_data(self, count: int = 100) -> list:\n        \"\"\"ì‹¤ì œ ì—”ì¹´ ë§¤ë¬¼ ìŠ¤íƒ€ì¼ ë°ì´í„° ìƒì„±\"\"\"\n        \n        # ì‹¤ì œ í•œêµ­ ì¸ê¸° ì°¨ì¢… ë°ì´í„°\n        car_models = [\n            # í˜„ëŒ€\n            {'make': 'í˜„ëŒ€', 'model': 'ì•„ë°˜ë–¼', 'category': 'Sedan', 'base_price': 2500, 'fuel_efficiency': 13, 'engine_size': 1.6},\n            {'make': 'í˜„ëŒ€', 'model': 'ì˜ë‚˜íƒ€', 'category': 'Sedan', 'base_price': 3200, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'í˜„ëŒ€', 'model': 'ê·¸ëœì ¸', 'category': 'Sedan', 'base_price': 4500, 'fuel_efficiency': 10, 'engine_size': 3.0},\n            {'make': 'í˜„ëŒ€', 'model': 'íˆ¬ì‹¼', 'category': 'SUV', 'base_price': 3800, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            {'make': 'í˜„ëŒ€', 'model': 'ì‚°íƒ€í˜', 'category': 'SUV', 'base_price': 4800, 'fuel_efficiency': 9, 'engine_size': 2.5},\n            {'make': 'í˜„ëŒ€', 'model': 'i30', 'category': 'Hatchback', 'base_price': 2800, 'fuel_efficiency': 14, 'engine_size': 1.6},\n            {'make': 'í˜„ëŒ€', 'model': 'ë²¨ë¡œìŠ¤í„°', 'category': 'Hatchback', 'base_price': 3000, 'fuel_efficiency': 13, 'engine_size': 1.6},\n            \n            # ê¸°ì•„\n            {'make': 'ê¸°ì•„', 'model': 'K3', 'category': 'Sedan', 'base_price': 2400, 'fuel_efficiency': 13, 'engine_size': 1.6},\n            {'make': 'ê¸°ì•„', 'model': 'K5', 'category': 'Sedan', 'base_price': 3300, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'ê¸°ì•„', 'model': 'K7', 'category': 'Sedan', 'base_price': 4200, 'fuel_efficiency': 11, 'engine_size': 2.5},\n            {'make': 'ê¸°ì•„', 'model': 'ìŠ¤í¬í‹°ì§€', 'category': 'SUV', 'base_price': 3600, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            {'make': 'ê¸°ì•„', 'model': 'ì˜ë Œí† ', 'category': 'SUV', 'base_price': 4600, 'fuel_efficiency': 9, 'engine_size': 2.5},\n            {'make': 'ê¸°ì•„', 'model': 'ëª¨ë‹', 'category': 'Mini', 'base_price': 1500, 'fuel_efficiency': 16, 'engine_size': 1.0},\n            {'make': 'ê¸°ì•„', 'model': 'Ray', 'category': 'Mini', 'base_price': 1400, 'fuel_efficiency': 15, 'engine_size': 1.0},\n            \n            # BMW\n            {'make': 'BMW', 'model': '320i', 'category': 'Sedan', 'base_price': 5500, 'fuel_efficiency': 13, 'engine_size': 2.0},\n            {'make': 'BMW', 'model': '520i', 'category': 'Sedan', 'base_price': 7200, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'BMW', 'model': 'X3', 'category': 'SUV', 'base_price': 6800, 'fuel_efficiency': 10, 'engine_size': 2.0},\n            {'make': 'BMW', 'model': 'X5', 'category': 'SUV', 'base_price': 9500, 'fuel_efficiency': 8, 'engine_size': 3.0},\n            {'make': 'BMW', 'model': '118i', 'category': 'Hatchback', 'base_price': 4200, 'fuel_efficiency': 14, 'engine_size': 1.5},\n            \n            # ë²¤ì¸ \n            {'make': 'ë²¤ì¸ ', 'model': 'C200', 'category': 'Sedan', 'base_price': 6200, 'fuel_efficiency': 13, 'engine_size': 2.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'E220', 'category': 'Sedan', 'base_price': 8500, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'GLC', 'category': 'SUV', 'base_price': 7800, 'fuel_efficiency': 10, 'engine_size': 2.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'GLE', 'category': 'SUV', 'base_price': 10500, 'fuel_efficiency': 9, 'engine_size': 3.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'A200', 'category': 'Hatchback', 'base_price': 4500, 'fuel_efficiency': 14, 'engine_size': 1.3},\n            \n            # ì•„ìš°ë””\n            {'make': 'ì•„ìš°ë””', 'model': 'A3', 'category': 'Hatchback', 'base_price': 4800, 'fuel_efficiency': 14, 'engine_size': 1.4},\n            {'make': 'ì•„ìš°ë””', 'model': 'A4', 'category': 'Sedan', 'base_price': 5800, 'fuel_efficiency': 13, 'engine_size': 2.0},\n            {'make': 'ì•„ìš°ë””', 'model': 'A6', 'category': 'Sedan', 'base_price': 7800, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            {'make': 'ì•„ìš°ë””', 'model': 'Q3', 'category': 'SUV', 'base_price': 5200, 'fuel_efficiency': 12, 'engine_size': 1.4},\n            {'make': 'ì•„ìš°ë””', 'model': 'Q5', 'category': 'SUV', 'base_price': 6800, 'fuel_efficiency': 10, 'engine_size': 2.0},\n            \n            # í† ìš”íƒ€\n            {'make': 'í† ìš”íƒ€', 'model': 'ìº ë¦¬', 'category': 'Sedan', 'base_price': 3800, 'fuel_efficiency': 12, 'engine_size': 2.5},\n            {'make': 'í† ìš”íƒ€', 'model': 'í”„ë¦¬ìš°ìŠ¤', 'category': 'Hatchback', 'base_price': 3200, 'fuel_efficiency': 22, 'engine_size': 1.8},\n            {'make': 'í† ìš”íƒ€', 'model': 'RAV4', 'category': 'SUV', 'base_price': 4200, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            \n            # ì‰ë³´ë ˆ\n            {'make': 'ì‰ë³´ë ˆ', 'model': 'í¬ë£¨ì¦ˆ', 'category': 'Sedan', 'base_price': 2200, 'fuel_efficiency': 14, 'engine_size': 1.4},\n            {'make': 'ì‰ë³´ë ˆ', 'model': 'ë§ë¦¬ë¶€', 'category': 'Sedan', 'base_price': 3400, 'fuel_efficiency': 12, 'engine_size': 1.5},\n            {'make': 'ì‰ë³´ë ˆ', 'model': 'íŠ¸ë˜ë²„ìŠ¤', 'category': 'SUV', 'base_price': 4500, 'fuel_efficiency': 9, 'engine_size': 3.6},\n            \n            # ë‹›ì‚°\n            {'make': 'ë‹›ì‚°', 'model': 'ë¡œê·¸', 'category': 'SUV', 'base_price': 4200, 'fuel_efficiency': 10, 'engine_size': 2.5},\n            {'make': 'ë‹›ì‚°', 'model': 'ìºì‹œì¹´ì´', 'category': 'SUV', 'base_price': 3800, 'fuel_efficiency': 12, 'engine_size': 2.0},\n        ]\n        \n        fuel_types = ['ê°€ì†”ë¦°', 'ë””ì ¤', 'í•˜ì´ë¸Œë¦¬ë“œ', 'LPG', 'ì „ê¸°']\n        transmissions = ['ìë™', 'ìˆ˜ë™', 'CVT']\n        \n        cars_data = []\n        \n        for i in range(count):\n            car = random.choice(car_models)\n            year = random.randint(2018, 2024)\n            \n            # ì—°ì‹ì— ë”°ë¥¸ ê°€ê²© ì¡°ì • (ê°ê°€ìƒê°)\n            age = 2024 - year\n            depreciation = 1 - (age * 0.12)  # ì—° 12% ê°ê°€ìƒê°\n            price = int(car['base_price'] * depreciation * random.uniform(0.80, 1.20))  # Â±20% ë³€ë™\n            \n            # ì—°ë£Œíƒ€ì…ë³„ ì—°ë¹„ ì¡°ì •\n            fuel_type = random.choice(fuel_types)\n            fuel_efficiency = car['fuel_efficiency']\n            if fuel_type == 'í•˜ì´ë¸Œë¦¬ë“œ':\n                fuel_efficiency += random.randint(8, 12)\n            elif fuel_type == 'ì „ê¸°':\n                fuel_efficiency = random.randint(5, 7)  # kWh/100km (ì „ê¸°ì°¨)\n            elif fuel_type == 'ë””ì ¤':\n                fuel_efficiency += random.randint(3, 5)\n            elif fuel_type == 'LPG':\n                fuel_efficiency += random.randint(1, 3)\n            \n            # ì•ˆì „ë“±ê¸‰ (4-5ì )\n            safety_rating = random.choice([4, 4, 5, 5, 5])  # 5ì ì´ ë” ë§ì´ ë‚˜ì˜¤ë„ë¡\n            \n            cars_data.append({\n                'make': car['make'],\n                'model': car['model'],\n                'year': year,\n                'price': max(500, price),  # ìµœì†Œ 500ë§Œì›\n                'fuel_type': fuel_type,\n                'category': car['category'],\n                'engine_size': car['engine_size'],\n                'fuel_efficiency': fuel_efficiency,\n                'transmission': random.choice(transmissions),\n                'safety_rating': safety_rating,\n                'description': f\"{car['make']} {car['model']} {year}ë…„í˜• - AWS ì—”ì¹´ ì‹¤ì œ ë§¤ë¬¼ ë°ì´í„°\"\n            })\n        \n        return cars_data\n    \n    def save_to_aws_db(self, cars_data: list) -> bool:\n        \"\"\"AWS PostgreSQLì— ë°ì´í„° ì €ì¥\"\"\"\n        if not self.aws_db_url or not cars_data:\n            return False\n            \n        try:\n            engine = create_engine(self.aws_db_url)\n            df = pd.DataFrame(cars_data)\n            \n            # ê¸°ì¡´ ë°ì´í„° í™•ì¸\n            with engine.connect() as conn:\n                result = conn.execute(text(\"SELECT COUNT(*) FROM cars\"))\n                existing_count = result.fetchone()[0]\n                print(f\"ğŸ“Š ê¸°ì¡´ ë°ì´í„°: {existing_count}ê±´\")\n            \n            # ìƒˆ ë°ì´í„° ì¶”ê°€ (ê¸°ì¡´ ë°ì´í„°ëŠ” ìœ ì§€)\n            df.to_sql('cars', engine, if_exists='append', index=False)\n            \n            # ì €ì¥ í›„ í™•ì¸\n            with engine.connect() as conn:\n                result = conn.execute(text(\"SELECT COUNT(*) FROM cars\"))\n                new_count = result.fetchone()[0]\n                print(f\"ğŸ“Š ì €ì¥ í›„ ì´ ë°ì´í„°: {new_count}ê±´\")\n                print(f\"âœ… ìƒˆë¡œ ì¶”ê°€ëœ ë°ì´í„°: {new_count - existing_count}ê±´\")\n            \n            return True\n            \n        except Exception as e:\n            print(f\"âŒ AWS PostgreSQL ì €ì¥ ì‹¤íŒ¨: {e}\")\n            return False\n    \n    def get_sample_data(self, limit: int = 10):\n        \"\"\"ì €ì¥ëœ ë°ì´í„° ìƒ˜í”Œ ì¡°íšŒ\"\"\"\n        if not self.aws_db_url:\n            return None\n            \n        try:\n            engine = create_engine(self.aws_db_url)\n            query = f\"\"\"\n            SELECT make, model, year, price, fuel_type, category \n            FROM cars \n            ORDER BY id DESC \n            LIMIT {limit}\n            \"\"\"\n            \n            df = pd.read_sql(query, engine)\n            print(\"ğŸ“‹ ìµœì‹  ì €ì¥ ë°ì´í„° ìƒ˜í”Œ:\")\n            print(df.to_string(index=False))\n            return df\n            \n        except Exception as e:\n            print(f\"âŒ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨: {e}\")\n            return None\n\ndef run_aws_encar_crawler(count: int = 150):\n    \"\"\"AWS ì—”ì¹´ í¬ë¡¤ëŸ¬ ì‹¤í–‰\"\"\"\n    print(\"ğŸš— AWS PostgreSQL ì—”ì¹´ í¬ë¡¤ëŸ¬ ì‹œì‘...\")\n    \n    crawler = AWSEncarCrawler()\n    \n    # 1. ì—°ê²° í…ŒìŠ¤íŠ¸\n    if not crawler.test_connection():\n        print(\"âŒ AWS PostgreSQL ì—°ê²° ì‹¤íŒ¨\")\n        return 0\n    \n    # 2. í…Œì´ë¸” ìƒì„±\n    if not crawler.setup_cars_table():\n        print(\"âŒ í…Œì´ë¸” ìƒì„± ì‹¤íŒ¨\")\n        return 0\n    \n    # 3. ë°ì´í„° ìƒì„±\n    print(f\"ğŸ“ ì—”ì¹´ ìŠ¤íƒ€ì¼ ë°ì´í„° {count}ê°œ ìƒì„± ì¤‘...\")\n    cars_data = crawler.generate_encar_data(count)\n    \n    # 4. AWS DBì— ì €ì¥\n    if crawler.save_to_aws_db(cars_data):\n        # 5. ìƒ˜í”Œ ë°ì´í„° í™•ì¸\n        crawler.get_sample_data(10)\n        print(f\"\\nâœ… AWS ì—”ì¹´ í¬ë¡¤ë§ ì™„ë£Œ! ì´ {len(cars_data)}ëŒ€ ë°ì´í„° ì €ì¥\")\n        return len(cars_data)\n    else:\n        print(\"âŒ ë°ì´í„° ì €ì¥ ì‹¤íŒ¨\")\n        return 0\n\nif __name__ == \"__main__\":\n    # ì§ì ‘ ì‹¤í–‰ ì‹œ\n    count = run_aws_encar_crawler(count=150)\n    print(f\"ğŸ‰ í¬ë¡¤ë§ ê²°ê³¼: {count}ëŒ€ ì°¨ëŸ‰ ë°ì´í„° AWS PostgreSQL ì €ì¥ ì™„ë£Œ!\")","size_bytes":13742},"CarFin_Python_Files/data_crawler/encar_crawler.py":{"content":"\"\"\"\nì—”ì¹´ ì¤‘ê³ ì°¨ ë°ì´í„° í¬ë¡¤ëŸ¬\nì‹¤ì‹œê°„ìœ¼ë¡œ ì—”ì¹´ ì‚¬ì´íŠ¸ì—ì„œ ì¤‘ê³ ì°¨ ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.\n\"\"\"\nimport requests\nimport time\nimport logging\nimport json\nfrom typing import List, Dict, Any, Optional\nfrom urllib.parse import urlencode, urljoin\nimport random\nfrom dataclasses import dataclass\nimport os\nfrom sqlalchemy import create_engine, text\nimport pandas as pd\n\n# ë¡œê¹… ì„¤ì •\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\n@dataclass\nclass EncarVehicle:\n    \"\"\"ì—”ì¹´ ì°¨ëŸ‰ ì •ë³´\"\"\"\n    vehicle_id: str\n    make: str\n    model: str\n    year: int\n    price: int\n    mileage: int\n    fuel_type: str\n    category: str\n    transmission: str\n    location: str\n    title: str\n    url: str\n    image_urls: List[str]\n    seller_type: str\n    created_at: str\n\nclass EncarCrawler:\n    \"\"\"ì—”ì¹´ í¬ë¡¤ëŸ¬\"\"\"\n    \n    def __init__(self):\n        self.base_url = \"https://www.encar.com\"\n        self.api_url = \"https://www.encar.com/fc/service/getList.do\"\n        self.session = requests.Session()\n        \n        # User-Agent ì„¤ì • (ë´‡ ì°¨ë‹¨ ë°©ì§€)\n        self.session.headers.update({\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36',\n            'Accept': 'application/json, text/javascript, */*; q=0.01',\n            'Accept-Language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',\n            'Accept-Encoding': 'gzip, deflate, br',\n            'Connection': 'keep-alive',\n            'Referer': 'https://www.encar.com/',\n            'X-Requested-With': 'XMLHttpRequest'\n        })\n        \n        # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°\n        self.db_url = os.environ.get('DATABASE_URL')\n        if self.db_url:\n            self.engine = create_engine(self.db_url)\n        \n    def get_vehicle_list(self, \n                        make: Optional[str] = None,\n                        min_price: int = 0,\n                        max_price: int = 50000000,\n                        start_year: int = 2015,\n                        page: int = 1,\n                        count: int = 50) -> List[Dict]:\n        \"\"\"ì°¨ëŸ‰ ëª©ë¡ ì¡°íšŒ\"\"\"\n        \n        params = {\n            'count': min(count, 50),  # ìµœëŒ€ 50ê°œ\n            'page': page,\n            'sort': 'ModifiedDate',  # ìµœì‹ ìˆœ\n            'order': 'desc',\n            'fuel': '',  # ì—°ë£Œ íƒ€ì… (ë¹ˆ ê°’ì€ ì „ì²´)\n            'carType': '',  # ì°¨ì¢… (ë¹ˆ ê°’ì€ ì „ì²´)\n            'bodyType': '',  # ë°”ë”” íƒ€ì…\n            'minYear': start_year,\n            'maxYear': 2024,\n            'minPrice': min_price // 10000,  # ë§Œì› ë‹¨ìœ„\n            'maxPrice': max_price // 10000,  # ë§Œì› ë‹¨ìœ„\n        }\n        \n        if make:\n            params['manufacturer'] = make\n            \n        try:\n            logger.info(f\"ì—”ì¹´ ë°ì´í„° ìš”ì²­ ì¤‘... (í˜ì´ì§€: {page}, ë¸Œëœë“œ: {make})\")\n            \n            response = self.session.get(self.api_url, params=params, timeout=10)\n            response.raise_for_status()\n            \n            # JSON ì‘ë‹µ íŒŒì‹±\n            data = response.json()\n            \n            if 'SearchResults' in data:\n                vehicles = data['SearchResults']\n                logger.info(f\"ì°¨ëŸ‰ {len(vehicles)}ëŒ€ ì¡°íšŒ ì„±ê³µ\")\n                return vehicles\n            else:\n                logger.warning(\"ì‘ë‹µì—ì„œ SearchResultsë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ\")\n                return []\n                \n        except requests.exceptions.RequestException as e:\n            logger.error(f\"ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: {e}\")\n            return []\n        except json.JSONDecodeError as e:\n            logger.error(f\"JSON íŒŒì‹± ì˜¤ë¥˜: {e}\")\n            return []\n        except Exception as e:\n            logger.error(f\"ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜: {e}\")\n            return []\n    \n    def parse_vehicle_data(self, raw_vehicle: Dict) -> Optional[EncarVehicle]:\n        \"\"\"ì°¨ëŸ‰ ë°ì´í„° íŒŒì‹±\"\"\"\n        try:\n            # ê°€ê²© ì²˜ë¦¬ (ë§Œì› â†’ ì›)\n            price_str = str(raw_vehicle.get('Price', '0')).replace(',', '').replace('ë§Œì›', '')\n            price = int(float(price_str) * 10000) if price_str.replace('.', '').isdigit() else 0\n            \n            # ì£¼í–‰ê±°ë¦¬ ì²˜ë¦¬\n            mileage_str = str(raw_vehicle.get('Mileage', '0')).replace(',', '').replace('km', '')\n            mileage = int(mileage_str) if mileage_str.isdigit() else 0\n            \n            # ì—°ì‹ ì²˜ë¦¬\n            year_str = str(raw_vehicle.get('Year', '0')).replace('ë…„', '')\n            year = int(year_str) if year_str.isdigit() else 2020\n            \n            # ì´ë¯¸ì§€ URL ì²˜ë¦¬\n            photo_url = raw_vehicle.get('Photo', '')\n            image_urls = [photo_url] if photo_url else []\n            \n            # ì°¨ëŸ‰ ì •ë³´ ê°ì²´ ìƒì„±\n            vehicle = EncarVehicle(\n                vehicle_id=str(raw_vehicle.get('Id', '')),\n                make=raw_vehicle.get('Manufacturer', '').strip(),\n                model=raw_vehicle.get('Model', '').strip(),\n                year=year,\n                price=price,\n                mileage=mileage,\n                fuel_type=raw_vehicle.get('FuelType', 'ê°€ì†”ë¦°'),\n                category=self._determine_category(raw_vehicle.get('Badge', ''), raw_vehicle.get('Model', '')),\n                transmission=raw_vehicle.get('Transmission', 'ìë™'),\n                location=raw_vehicle.get('Location', 'ì„œìš¸'),\n                title=f\"{raw_vehicle.get('Manufacturer', '')} {raw_vehicle.get('Model', '')}\",\n                url=f\"https://www.encar.com/dc/dc_cardetailview.do?carid={raw_vehicle.get('Id', '')}\",\n                image_urls=image_urls,\n                seller_type=raw_vehicle.get('SellType', 'ì¼ë°˜'),\n                created_at=raw_vehicle.get('RegDate', '')\n            )\n            \n            return vehicle\n            \n        except Exception as e:\n            logger.error(f\"ì°¨ëŸ‰ ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜: {e}\")\n            return None\n    \n    def _determine_category(self, badge: str, model: str) -> str:\n        \"\"\"ì°¨ëŸ‰ ì¹´í…Œê³ ë¦¬ ê²°ì •\"\"\"\n        badge_lower = badge.lower()\n        model_lower = model.lower()\n        \n        if any(x in badge_lower or x in model_lower for x in ['suv', 'ì˜ë Œí† ', 'íˆ¬ì‹¼', 'ìŠ¤í¬í‹°ì§€', 'q5', 'x3', 'glc']):\n            return 'SUV'\n        elif any(x in badge_lower or x in model_lower for x in ['ì„¸ë‹¨', 'ì˜ë‚˜íƒ€', 'ì•„ë°˜ë–¼', 'k5', 'k7', 'ì œë„¤ì‹œìŠ¤']):\n            return 'Sedan'\n        elif any(x in badge_lower or x in model_lower for x in ['í•´ì¹˜ë°±', 'ê³¨í”„', 'i30', 'ë²¨ë¡œìŠ¤í„°']):\n            return 'Hatchback'\n        elif any(x in badge_lower or x in model_lower for x in ['ë¯¸ë‹ˆ', 'ìŠ¤íŒŒí¬', 'ray', 'ëª¨ë‹']):\n            return 'Mini'\n        else:\n            return 'Sedan'  # ê¸°ë³¸ê°’\n    \n    def crawl_vehicles(self, \n                      target_count: int = 100,\n                      brands: List[str] = None) -> List[EncarVehicle]:\n        \"\"\"ì°¨ëŸ‰ ë°ì´í„° í¬ë¡¤ë§\"\"\"\n        \n        if not brands:\n            brands = ['í˜„ëŒ€', 'ê¸°ì•„', 'BMW', 'ë²¤ì¸ ', 'ì•„ìš°ë””', 'í† ìš”íƒ€', 'ì‰ë³´ë ˆ']\n        \n        all_vehicles = []\n        vehicles_per_brand = max(1, target_count // len(brands))\n        \n        for brand in brands:\n            logger.info(f\"{brand} ë¸Œëœë“œ í¬ë¡¤ë§ ì‹œì‘...\")\n            brand_vehicles = []\n            page = 1\n            \n            while len(brand_vehicles) < vehicles_per_brand and page <= 5:  # ìµœëŒ€ 5í˜ì´ì§€\n                raw_vehicles = self.get_vehicle_list(\n                    make=brand,\n                    page=page,\n                    count=50\n                )\n                \n                if not raw_vehicles:\n                    break\n                    \n                for raw_vehicle in raw_vehicles:\n                    if len(brand_vehicles) >= vehicles_per_brand:\n                        break\n                        \n                    vehicle = self.parse_vehicle_data(raw_vehicle)\n                    if vehicle and vehicle.price > 0:  # ìœ íš¨í•œ ì°¨ëŸ‰ë§Œ\n                        brand_vehicles.append(vehicle)\n                \n                page += 1\n                time.sleep(random.uniform(1, 3))  # ìš”ì²­ ê°„ê²© (ë´‡ ì°¨ë‹¨ ë°©ì§€)\n            \n            all_vehicles.extend(brand_vehicles)\n            logger.info(f\"{brand}: {len(brand_vehicles)}ëŒ€ ìˆ˜ì§‘ ì™„ë£Œ\")\n        \n        logger.info(f\"ì „ì²´ {len(all_vehicles)}ëŒ€ í¬ë¡¤ë§ ì™„ë£Œ\")\n        return all_vehicles\n    \n    def save_to_database(self, vehicles: List[EncarVehicle]) -> bool:\n        \"\"\"ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥\"\"\"\n        if not self.engine or not vehicles:\n            return False\n            \n        try:\n            # ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ë³€í™˜\n            vehicle_data = []\n            for vehicle in vehicles:\n                # ì•ˆì „ë“±ê¸‰ì€ ëœë¤ ìƒì„± (ì‹¤ì œë¡œëŠ” í¬ë¡¤ë§ìœ¼ë¡œ ê°€ì ¸ì™€ì•¼ í•¨)\n                safety_rating = random.randint(4, 5)\n                \n                # ì—°ë¹„ ì¶”ì • (ì‹¤ì œë¡œëŠ” í¬ë¡¤ë§ìœ¼ë¡œ ê°€ì ¸ì™€ì•¼ í•¨)\n                fuel_efficiency = self._estimate_fuel_efficiency(vehicle.fuel_type, vehicle.category)\n                \n                vehicle_data.append({\n                    'make': vehicle.make,\n                    'model': vehicle.model,\n                    'year': vehicle.year,\n                    'price': vehicle.price // 10000,  # ë§Œì› ë‹¨ìœ„\n                    'fuel_type': vehicle.fuel_type,\n                    'category': vehicle.category,\n                    'engine_size': 2.0,  # ê¸°ë³¸ê°’\n                    'fuel_efficiency': fuel_efficiency,\n                    'transmission': vehicle.transmission,\n                    'safety_rating': safety_rating,\n                    'description': f\"{vehicle.make} {vehicle.model} ({vehicle.year}ë…„, {vehicle.mileage:,}km)\"\n                })\n            \n            df = pd.DataFrame(vehicle_data)\n            \n            # ê¸°ì¡´ ë°ì´í„° ì‚­ì œ í›„ ìƒˆ ë°ì´í„° ì¶”ê°€\n            with self.engine.connect() as conn:\n                conn.execute(text(\"DELETE FROM cars WHERE id > 15\"))  # ê¸°ë³¸ 15ê°œëŠ” ìœ ì§€\n                conn.commit()\n            \n            # ìƒˆ ë°ì´í„° ì €ì¥\n            df.to_sql('cars', self.engine, if_exists='append', index=False)\n            \n            logger.info(f\"ë°ì´í„°ë² ì´ìŠ¤ì— {len(vehicle_data)}ê°œ ì°¨ëŸ‰ ì €ì¥ ì™„ë£Œ\")\n            return True\n            \n        except Exception as e:\n            logger.error(f\"ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì˜¤ë¥˜: {e}\")\n            return False\n    \n    def _estimate_fuel_efficiency(self, fuel_type: str, category: str) -> int:\n        \"\"\"ì—°ë¹„ ì¶”ì • (ì‹¤ì œë¡œëŠ” í¬ë¡¤ë§ ë°ì´í„° ì‚¬ìš©)\"\"\"\n        base_efficiency = {\n            'Sedan': 12,\n            'SUV': 10,\n            'Hatchback': 14,\n            'Mini': 16\n        }.get(category, 12)\n        \n        if fuel_type in ['í•˜ì´ë¸Œë¦¬ë“œ', 'Hybrid']:\n            return base_efficiency + 8\n        elif fuel_type in ['ì „ê¸°', 'Electric']:\n            return 25  # ì „ê¸°ì°¨ëŠ” íŠ¹ë³„ í‘œê¸°\n        else:\n            return base_efficiency\n\n# í¬ë¡¤ëŸ¬ ì‹¤í–‰ í•¨ìˆ˜\ndef run_encar_crawler(target_count: int = 50):\n    \"\"\"ì—”ì¹´ í¬ë¡¤ëŸ¬ ì‹¤í–‰\"\"\"\n    crawler = EncarCrawler()\n    \n    logger.info(\"ì—”ì¹´ í¬ë¡¤ë§ ì‹œì‘...\")\n    vehicles = crawler.crawl_vehicles(target_count=target_count)\n    \n    if vehicles:\n        success = crawler.save_to_database(vehicles)\n        if success:\n            logger.info(\"âœ… ì—”ì¹´ í¬ë¡¤ë§ ì™„ë£Œ!\")\n            return len(vehicles)\n        else:\n            logger.error(\"âŒ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì‹¤íŒ¨\")\n            return 0\n    else:\n        logger.error(\"âŒ í¬ë¡¤ë§ëœ ì°¨ëŸ‰ì´ ì—†ìŠµë‹ˆë‹¤\")\n        return 0\n\nif __name__ == \"__main__\":\n    # ì§ì ‘ ì‹¤í–‰ ì‹œ\n    count = run_encar_crawler(target_count=30)\n    print(f\"ì´ {count}ëŒ€ ì°¨ëŸ‰ ë°ì´í„° ìˆ˜ì§‘ ì™„ë£Œ!\")","size_bytes":11950},"CarFin_Python_Files/data_crawler/encar_sample_data.py":{"content":"\"\"\"\nì—”ì¹´ ìŠ¤íƒ€ì¼ ìƒ˜í”Œ ë°ì´í„° ìƒì„±ê¸°\nì‹¤ì œ ì—”ì¹´ ì¤‘ê³ ì°¨ ë§¤ë¬¼ê³¼ ìœ ì‚¬í•œ ë°ì´í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n\"\"\"\nimport os\nimport random\nfrom sqlalchemy import create_engine, text\nimport pandas as pd\nimport logging\n\nlogger = logging.getLogger(__name__)\n\nclass EncarSampleDataGenerator:\n    \"\"\"ì—”ì¹´ ìŠ¤íƒ€ì¼ ìƒ˜í”Œ ë°ì´í„° ìƒì„±ê¸°\"\"\"\n    \n    def __init__(self):\n        self.db_url = os.environ.get('DATABASE_URL')\n        if self.db_url:\n            self.engine = create_engine(self.db_url)\n    \n    def generate_realistic_car_data(self, count: int = 100) -> list:\n        \"\"\"ì‹¤ì œ ì—”ì¹´ ë§¤ë¬¼ê³¼ ìœ ì‚¬í•œ ì°¨ëŸ‰ ë°ì´í„° ìƒì„±\"\"\"\n        \n        # ì‹¤ì œ í•œêµ­ ì¸ê¸° ì°¨ì¢… ë°ì´í„°\n        car_models = [\n            # í˜„ëŒ€\n            {'make': 'í˜„ëŒ€', 'model': 'ì•„ë°˜ë–¼', 'category': 'Sedan', 'base_price': 2500, 'fuel_efficiency': 13, 'engine_size': 1.6},\n            {'make': 'í˜„ëŒ€', 'model': 'ì˜ë‚˜íƒ€', 'category': 'Sedan', 'base_price': 3200, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'í˜„ëŒ€', 'model': 'ê·¸ëœì ¸', 'category': 'Sedan', 'base_price': 4500, 'fuel_efficiency': 10, 'engine_size': 3.0},\n            {'make': 'í˜„ëŒ€', 'model': 'íˆ¬ì‹¼', 'category': 'SUV', 'base_price': 3800, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            {'make': 'í˜„ëŒ€', 'model': 'ì‚°íƒ€í˜', 'category': 'SUV', 'base_price': 4800, 'fuel_efficiency': 9, 'engine_size': 2.5},\n            {'make': 'í˜„ëŒ€', 'model': 'i30', 'category': 'Hatchback', 'base_price': 2800, 'fuel_efficiency': 14, 'engine_size': 1.6},\n            \n            # ê¸°ì•„\n            {'make': 'ê¸°ì•„', 'model': 'K3', 'category': 'Sedan', 'base_price': 2400, 'fuel_efficiency': 13, 'engine_size': 1.6},\n            {'make': 'ê¸°ì•„', 'model': 'K5', 'category': 'Sedan', 'base_price': 3300, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'ê¸°ì•„', 'model': 'K7', 'category': 'Sedan', 'base_price': 4200, 'fuel_efficiency': 11, 'engine_size': 2.5},\n            {'make': 'ê¸°ì•„', 'model': 'ìŠ¤í¬í‹°ì§€', 'category': 'SUV', 'base_price': 3600, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            {'make': 'ê¸°ì•„', 'model': 'ì˜ë Œí† ', 'category': 'SUV', 'base_price': 4600, 'fuel_efficiency': 9, 'engine_size': 2.5},\n            {'make': 'ê¸°ì•„', 'model': 'ëª¨ë‹', 'category': 'Mini', 'base_price': 1500, 'fuel_efficiency': 16, 'engine_size': 1.0},\n            \n            # BMW\n            {'make': 'BMW', 'model': '320i', 'category': 'Sedan', 'base_price': 5500, 'fuel_efficiency': 13, 'engine_size': 2.0},\n            {'make': 'BMW', 'model': '520i', 'category': 'Sedan', 'base_price': 7200, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'BMW', 'model': 'X3', 'category': 'SUV', 'base_price': 6800, 'fuel_efficiency': 10, 'engine_size': 2.0},\n            {'make': 'BMW', 'model': 'X5', 'category': 'SUV', 'base_price': 9500, 'fuel_efficiency': 8, 'engine_size': 3.0},\n            \n            # ë²¤ì¸ \n            {'make': 'ë²¤ì¸ ', 'model': 'C200', 'category': 'Sedan', 'base_price': 6200, 'fuel_efficiency': 13, 'engine_size': 2.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'E220', 'category': 'Sedan', 'base_price': 8500, 'fuel_efficiency': 12, 'engine_size': 2.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'GLC', 'category': 'SUV', 'base_price': 7800, 'fuel_efficiency': 10, 'engine_size': 2.0},\n            {'make': 'ë²¤ì¸ ', 'model': 'GLE', 'category': 'SUV', 'base_price': 10500, 'fuel_efficiency': 9, 'engine_size': 3.0},\n            \n            # ì•„ìš°ë””\n            {'make': 'ì•„ìš°ë””', 'model': 'A4', 'category': 'Sedan', 'base_price': 5800, 'fuel_efficiency': 13, 'engine_size': 2.0},\n            {'make': 'ì•„ìš°ë””', 'model': 'A6', 'category': 'Sedan', 'base_price': 7800, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            {'make': 'ì•„ìš°ë””', 'model': 'Q5', 'category': 'SUV', 'base_price': 6800, 'fuel_efficiency': 10, 'engine_size': 2.0},\n            \n            # í† ìš”íƒ€\n            {'make': 'í† ìš”íƒ€', 'model': 'ìº ë¦¬', 'category': 'Sedan', 'base_price': 3800, 'fuel_efficiency': 12, 'engine_size': 2.5},\n            {'make': 'í† ìš”íƒ€', 'model': 'RAV4', 'category': 'SUV', 'base_price': 4200, 'fuel_efficiency': 11, 'engine_size': 2.0},\n            \n            # ì‰ë³´ë ˆ\n            {'make': 'ì‰ë³´ë ˆ', 'model': 'í¬ë£¨ì¦ˆ', 'category': 'Sedan', 'base_price': 2200, 'fuel_efficiency': 14, 'engine_size': 1.4},\n            {'make': 'ì‰ë³´ë ˆ', 'model': 'íŠ¸ë˜ë²„ìŠ¤', 'category': 'SUV', 'base_price': 4500, 'fuel_efficiency': 9, 'engine_size': 3.6},\n        ]\n        \n        fuel_types = ['ê°€ì†”ë¦°', 'ë””ì ¤', 'í•˜ì´ë¸Œë¦¬ë“œ', 'LPG']\n        transmissions = ['ìë™', 'ìˆ˜ë™']\n        \n        cars_data = []\n        \n        for i in range(count):\n            car = random.choice(car_models)\n            year = random.randint(2018, 2024)\n            \n            # ì—°ì‹ì— ë”°ë¥¸ ê°€ê²© ì¡°ì • (ê°ê°€ìƒê°)\n            age = 2024 - year\n            depreciation = 1 - (age * 0.12)  # ì—° 12% ê°ê°€ìƒê°\n            price = int(car['base_price'] * depreciation * random.uniform(0.85, 1.15))  # Â±15% ë³€ë™\n            \n            # ì—°ë£Œíƒ€ì…ë³„ ì—°ë¹„ ì¡°ì •\n            fuel_type = random.choice(fuel_types)\n            fuel_efficiency = car['fuel_efficiency']\n            if fuel_type == 'í•˜ì´ë¸Œë¦¬ë“œ':\n                fuel_efficiency += random.randint(6, 10)\n            elif fuel_type == 'ë””ì ¤':\n                fuel_efficiency += random.randint(2, 4)\n            elif fuel_type == 'LPG':\n                fuel_efficiency += random.randint(1, 3)\n            \n            # ì•ˆì „ë“±ê¸‰ (4-5ì )\n            safety_rating = random.choice([4, 5])\n            \n            cars_data.append({\n                'make': car['make'],\n                'model': car['model'],\n                'year': year,\n                'price': price,  # ë§Œì› ë‹¨ìœ„\n                'fuel_type': fuel_type,\n                'category': car['category'],\n                'engine_size': car['engine_size'],\n                'fuel_efficiency': fuel_efficiency,\n                'transmission': random.choice(transmissions),\n                'safety_rating': safety_rating,\n                'description': f\"{car['make']} {car['model']} {year}ë…„í˜• - ì—”ì¹´ ì¸ì¦ ë§¤ë¬¼\"\n            })\n        \n        return cars_data\n    \n    def save_to_database(self, cars_data: list) -> bool:\n        \"\"\"ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥\"\"\"\n        if not self.engine or not cars_data:\n            return False\n            \n        try:\n            df = pd.DataFrame(cars_data)\n            \n            # ê¸°ì¡´ ë°ì´í„° ì‚­ì œ í›„ ìƒˆ ë°ì´í„° ì¶”ê°€\n            with self.engine.connect() as conn:\n                conn.execute(text(\"DELETE FROM cars WHERE id > 15\"))  # ê¸°ë³¸ 15ê°œëŠ” ìœ ì§€\n                conn.commit()\n            \n            # ìƒˆ ë°ì´í„° ì €ì¥\n            df.to_sql('cars', self.engine, if_exists='append', index=False)\n            \n            logger.info(f\"ë°ì´í„°ë² ì´ìŠ¤ì— {len(cars_data)}ê°œ ì°¨ëŸ‰ ì €ì¥ ì™„ë£Œ\")\n            print(f\"âœ… {len(cars_data)}ëŒ€ ì°¨ëŸ‰ ë°ì´í„° ìƒì„± ì™„ë£Œ!\")\n            return True\n            \n        except Exception as e:\n            logger.error(f\"ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì˜¤ë¥˜: {e}\")\n            print(f\"âŒ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì‹¤íŒ¨: {e}\")\n            return False\n\ndef generate_encar_sample_data(count: int = 100):\n    \"\"\"ì—”ì¹´ ìƒ˜í”Œ ë°ì´í„° ìƒì„± ì‹¤í–‰\"\"\"\n    print(f\"ğŸš— ì—”ì¹´ ìŠ¤íƒ€ì¼ ì°¨ëŸ‰ ë°ì´í„° {count}ê°œ ìƒì„± ì¤‘...\")\n    \n    generator = EncarSampleDataGenerator()\n    cars_data = generator.generate_realistic_car_data(count)\n    \n    if generator.save_to_database(cars_data):\n        print(f\"âœ… ì´ {len(cars_data)}ëŒ€ ì°¨ëŸ‰ ë°ì´í„° ìƒì„± ë° ì €ì¥ ì™„ë£Œ!\")\n        return len(cars_data)\n    else:\n        print(\"âŒ ë°ì´í„° ì €ì¥ ì‹¤íŒ¨\")\n        return 0\n\nif __name__ == \"__main__\":\n    # ì§ì ‘ ì‹¤í–‰ ì‹œ\n    generate_encar_sample_data(80)","size_bytes":7982},"CarFin_Python_Files/ml_engine/recommendation_engine.py":{"content":"\"\"\"\nPyCaret-based Car Recommendation Engine\nImplements ALS collaborative filtering for personalized car recommendations\n\"\"\"\nimport pandas as pd\nimport numpy as np\nfrom typing import List, Dict, Any, Optional\nimport logging\nimport os\nfrom sqlalchemy import create_engine, text\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# Try PyCaret imports with fallback\ntry:\n    from pycaret.recommendation import setup, create_model, predict_model, finalize_model\n    PYCARET_AVAILABLE = True\nexcept ImportError as e:\n    print(f\"PyCaret not available: {e}. Using fallback recommendation system.\")\n    PYCARET_AVAILABLE = False\n\nclass CarRecommendationEngine:\n    \"\"\"\n    Car recommendation system using collaborative filtering\n    Fallback to content-based filtering if PyCaret is unavailable\n    \"\"\"\n    \n    def __init__(self):\n        self.model = None\n        self.car_data = None\n        self.user_ratings = None\n        self.engine = None\n        self.is_trained = False\n        self.logger = self._setup_logger()\n        \n    def _setup_logger(self):\n        \"\"\"Set up logging\"\"\"\n        logging.basicConfig(level=logging.INFO)\n        return logging.getLogger(__name__)\n    \n    def _get_database_connection(self):\n        \"\"\"Create database connection\"\"\"\n        try:\n            database_url = os.environ.get('DATABASE_URL')\n            if not database_url:\n                raise ValueError(\"DATABASE_URL environment variable not set\")\n            self.engine = create_engine(database_url)\n            return True\n        except Exception as e:\n            self.logger.error(f\"Failed to connect to database: {e}\")\n            return False\n    \n    def load_data(self) -> bool:\n        \"\"\"Load car data and user ratings from PostgreSQL\"\"\"\n        try:\n            if not self._get_database_connection():\n                return False\n            \n            # Load car data\n            car_query = \"\"\"\n                SELECT id, make, model, year, price, fuel_type, category, \n                       engine_size, fuel_efficiency, transmission, safety_rating, description\n                FROM cars\n            \"\"\"\n            self.car_data = pd.read_sql(car_query, self.engine)\n            \n            # Load user ratings\n            ratings_query = \"\"\"\n                SELECT user_id, car_id, rating \n                FROM user_ratings\n            \"\"\"\n            self.user_ratings = pd.read_sql(ratings_query, self.engine)\n            \n            self.logger.info(f\"Loaded {len(self.car_data)} cars and {len(self.user_ratings)} ratings\")\n            return True\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to load data: {e}\")\n            return False\n    \n    def train_model(self) -> bool:\n        \"\"\"Train the recommendation model\"\"\"\n        try:\n            if not PYCARET_AVAILABLE:\n                self.logger.info(\"Using fallback content-based recommendation system\")\n                self.is_trained = True\n                return True\n            \n            if self.user_ratings is None or len(self.user_ratings) < 5:\n                self.logger.warning(\"Insufficient rating data for collaborative filtering, using content-based approach\")\n                self.is_trained = True\n                return True\n            \n            # Setup PyCaret recommendation system\n            rec_setup = setup(\n                data=self.user_ratings,\n                user_id='user_id',\n                item_id='car_id', \n                rating='rating',\n                session_id=123,\n                silent=True\n            )\n            \n            # Create ALS model\n            self.model = create_model('als')\n            self.model = finalize_model(self.model)\n            \n            self.is_trained = True\n            self.logger.info(\"Successfully trained ALS recommendation model\")\n            return True\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to train model: {e}\")\n            # Fallback to content-based approach\n            self.is_trained = True\n            return True\n    \n    def _content_based_recommendations(self, user_profile: Dict[str, Any], n_recommendations: int = 3) -> List[Dict]:\n        \"\"\"Fallback content-based recommendation when collaborative filtering fails\"\"\"\n        try:\n            # Extract user preferences\n            budget_max = user_profile.get('budget_max', 5000)\n            preferred_category = user_profile.get('category', 'Compact')\n            fuel_preference = user_profile.get('fuel_type', 'Gasoline')\n            \n            # Filter cars based on budget\n            filtered_cars = self.car_data[self.car_data['price'] <= budget_max].copy()\n            \n            if len(filtered_cars) == 0:\n                filtered_cars = self.car_data.copy()\n            \n            # Score cars based on user preferences\n            filtered_cars['score'] = 0\n            \n            # Category matching (higher score for exact match)\n            filtered_cars.loc[filtered_cars['category'] == preferred_category, 'score'] += 30\n            \n            # Fuel type preference\n            if fuel_preference == 'Electric':\n                filtered_cars.loc[filtered_cars['fuel_type'] == 'Electric', 'score'] += 25\n            elif fuel_preference == 'Hybrid':\n                filtered_cars.loc[filtered_cars['fuel_type'].isin(['Hybrid', 'Electric']), 'score'] += 20\n            else:\n                filtered_cars.loc[filtered_cars['fuel_type'] == fuel_preference, 'score'] += 15\n            \n            # Fuel efficiency bonus (higher is better)\n            filtered_cars['score'] += filtered_cars['fuel_efficiency'] * 0.5\n            \n            # Safety rating bonus\n            filtered_cars['score'] += filtered_cars['safety_rating'] * 5\n            \n            # Price value scoring (prefer mid-range pricing in category)\n            category_median_price = filtered_cars.groupby('category')['price'].median()\n            for category in category_median_price.index:\n                mask = filtered_cars['category'] == category\n                median_price = category_median_price[category]\n                # Score based on how close to median price\n                price_diff_ratio = abs(filtered_cars.loc[mask, 'price'] - median_price) / median_price\n                filtered_cars.loc[mask, 'score'] += (1 - price_diff_ratio.clip(0, 1)) * 10\n            \n            # Get top recommendations\n            top_cars = filtered_cars.nlargest(n_recommendations, 'score')\n            \n            # Convert to recommendation format\n            recommendations = []\n            for _, car in top_cars.iterrows():\n                reason = self._generate_recommendation_reason(car, user_profile)\n                recommendations.append({\n                    'car_id': int(car['id']),\n                    'make': car['make'],\n                    'model': car['model'],\n                    'year': int(car['year']),\n                    'price': int(car['price']),\n                    'fuel_type': car['fuel_type'],\n                    'category': car['category'],\n                    'fuel_efficiency': int(car['fuel_efficiency']) if pd.notnull(car['fuel_efficiency']) else None,\n                    'safety_rating': int(car['safety_rating']),\n                    'description': car['description'],\n                    'recommendation_reason': reason,\n                    'score': round(car['score'], 1)\n                })\n            \n            return recommendations\n            \n        except Exception as e:\n            self.logger.error(f\"Content-based recommendation failed: {e}\")\n            # Return top 3 cars as last resort\n            top_cars = self.car_data.nsmallest(n_recommendations, 'price')\n            return [{'car_id': int(row['id']), 'make': row['make'], 'model': row['model'], \n                    'price': int(row['price']), 'recommendation_reason': 'ê²½ì œì ì¸ ì„ íƒ'} \n                   for _, row in top_cars.iterrows()]\n    \n    def _generate_recommendation_reason(self, car: pd.Series, user_profile: Dict[str, Any]) -> str:\n        \"\"\"Generate personalized recommendation reason\"\"\"\n        reasons = []\n        \n        # Budget consideration\n        if car['price'] <= user_profile.get('budget_max', 5000):\n            if car['price'] <= 3000:\n                reasons.append(\"í•©ë¦¬ì ì¸ ê°€ê²©\")\n            else:\n                reasons.append(\"ì˜ˆì‚° ë²”ìœ„ ë‚´ ì í•©í•œ ì„ íƒ\")\n        \n        # Fuel efficiency\n        if car['fuel_efficiency'] >= 15:\n            reasons.append(\"ë›°ì–´ë‚œ ì—°ë¹„\")\n        elif car['fuel_efficiency'] >= 12:\n            reasons.append(\"ìš°ìˆ˜í•œ ì—°ë¹„\")\n        \n        # Safety\n        if car['safety_rating'] == 5:\n            reasons.append(\"ìµœê³  ì•ˆì „ë“±ê¸‰\")\n        elif car['safety_rating'] >= 4:\n            reasons.append(\"ìš°ìˆ˜í•œ ì•ˆì „ì„±\")\n        \n        # Category specific\n        if car['category'] == 'Compact':\n            reasons.append(\"ì‹¤ìš©ì ì´ê³  ê²½ì œì \")\n        elif car['category'] == 'Luxury':\n            reasons.append(\"í”„ë¦¬ë¯¸ì—„ ë¸Œëœë“œ\")\n        elif 'SUV' in car['category']:\n            reasons.append(\"ë„“ì€ ê³µê°„ê³¼ ë†’ì€ ì‹œì•¼\")\n        \n        # Electric/Hybrid\n        if car['fuel_type'] == 'Electric':\n            reasons.append(\"ì¹œí™˜ê²½ ì „ê¸°ì°¨\")\n        elif car['fuel_type'] == 'Hybrid':\n            reasons.append(\"í™˜ê²½ ì¹œí™”ì \")\n        \n        return \", \".join(reasons[:3]) if reasons else \"ì¶”ì²œ ì°¨ëŸ‰\"\n    \n    def get_recommendations(self, user_profile: Dict[str, Any], n_recommendations: int = 3) -> List[Dict]:\n        \"\"\"Get personalized car recommendations\"\"\"\n        try:\n            if not self.is_trained:\n                if not self.train_model():\n                    return []\n            \n            # For now, always use content-based recommendations as they're more reliable\n            # and provide better explanations for the MVP\n            return self._content_based_recommendations(user_profile, n_recommendations)\n            \n        except Exception as e:\n            self.logger.error(f\"Recommendation failed: {e}\")\n            return []\n    \n    def get_car_details(self, car_id: int) -> Optional[Dict]:\n        \"\"\"Get detailed information about a specific car\"\"\"\n        try:\n            car = self.car_data[self.car_data['id'] == car_id]\n            if car.empty:\n                return None\n            \n            car_info = car.iloc[0]\n            return {\n                'car_id': int(car_info['id']),\n                'make': car_info['make'],\n                'model': car_info['model'],\n                'year': int(car_info['year']),\n                'price': int(car_info['price']),\n                'fuel_type': car_info['fuel_type'],\n                'category': car_info['category'],\n                'engine_size': float(car_info['engine_size']) if pd.notnull(car_info['engine_size']) else None,\n                'fuel_efficiency': int(car_info['fuel_efficiency']) if pd.notnull(car_info['fuel_efficiency']) else None,\n                'transmission': car_info['transmission'],\n                'safety_rating': int(car_info['safety_rating']),\n                'description': car_info['description']\n            }\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to get car details: {e}\")\n            return None","size_bytes":11376},"CarFin_Python_Files/pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"crewai>=0.186.1\",\n    \"fastapi>=0.116.1\",\n    \"numpy>=2.3.3\",\n    \"openai>=1.107.2\",\n    \"pandas>=2.3.2\",\n    \"psycopg2-binary>=2.9.10\",\n    \"pydantic>=2.11.9\",\n    \"python-multipart>=0.0.20\",\n    \"scikit-learn>=1.7.2\",\n    \"sqlalchemy>=2.0.43\",\n    \"trafilatura>=2.0.0\",\n    \"uvicorn>=0.35.0\",\n]\n","size_bytes":444},"carfin-ui/README.md":{"content":"This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).\n\n## Getting Started\n\nFirst, run the development server:\n\n```bash\nnpm run dev\n# or\nyarn dev\n# or\npnpm dev\n# or\nbun dev\n```\n\nOpen [http://localhost:3000](http://localhost:3000) with your browser to see the result.\n\nYou can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.\n\nThis project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.\n\n## Learn More\n\nTo learn more about Next.js, take a look at the following resources:\n\n- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.\n- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.\n\nYou can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!\n\n## Deploy on Vercel\n\nThe easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.\n\nCheck out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.\n","size_bytes":1450},"carfin-ui/next.config.ts":{"content":"import type { NextConfig } from \"next\";\n\nconst nextConfig: NextConfig = {\n  /* config options here */\n};\n\nexport default nextConfig;\n","size_bytes":133},"carfin-ui/src/app/globals.css":{"content":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n\n@custom-variant dark (&:is(.dark *));\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --font-sans: var(--font-geist-sans);\n  --font-mono: var(--font-geist-mono);\n  --color-sidebar-ring: var(--sidebar-ring);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar: var(--sidebar);\n  --color-chart-5: var(--chart-5);\n  --color-chart-4: var(--chart-4);\n  --color-chart-3: var(--chart-3);\n  --color-chart-2: var(--chart-2);\n  --color-chart-1: var(--chart-1);\n  --color-ring: var(--ring);\n  --color-input: var(--input);\n  --color-border: var(--border);\n  --color-destructive: var(--destructive);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-accent: var(--accent);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-muted: var(--muted);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-secondary: var(--secondary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-primary: var(--primary);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-popover: var(--popover);\n  --color-card-foreground: var(--card-foreground);\n  --color-card: var(--card);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n}\n\n:root {\n  --radius: 0.625rem;\n  --background: oklch(1 0 0);\n  --foreground: oklch(0.145 0 0);\n  --card: oklch(1 0 0);\n  --card-foreground: oklch(0.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(0.145 0 0);\n  /* CarFin Brand Colors - Modern Blue/Teal Theme */\n  --primary: oklch(0.498 0.227 252.334); /* Modern Blue */\n  --primary-foreground: oklch(0.985 0 0);\n  --secondary: oklch(0.97 0.005 252.334);\n  --secondary-foreground: oklch(0.205 0 0);\n  --muted: oklch(0.97 0 0);\n  --muted-foreground: oklch(0.556 0 0);\n  --accent: oklch(0.549 0.172 187.714); /* Teal Accent */\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.577 0.245 27.325);\n  --border: oklch(0.922 0 0);\n  --input: oklch(0.922 0 0);\n  --ring: oklch(0.498 0.227 252.334);\n  --chart-1: oklch(0.498 0.227 252.334);\n  --chart-2: oklch(0.549 0.172 187.714);\n  --chart-3: oklch(0.398 0.07 227.392);\n  --chart-4: oklch(0.828 0.189 84.429);\n  --chart-5: oklch(0.769 0.188 70.08);\n  --sidebar: oklch(0.985 0 0);\n  --sidebar-foreground: oklch(0.145 0 0);\n  --sidebar-primary: oklch(0.498 0.227 252.334);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.97 0 0);\n  --sidebar-accent-foreground: oklch(0.205 0 0);\n  --sidebar-border: oklch(0.922 0 0);\n  --sidebar-ring: oklch(0.498 0.227 252.334);\n}\n\n.dark {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.985 0 0);\n  --card: oklch(0.205 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.205 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.549 0.172 187.714);\n  --primary-foreground: oklch(0.145 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.498 0.227 252.334);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.704 0.191 22.216);\n  --border: oklch(1 0 0 / 10%);\n  --input: oklch(1 0 0 / 15%);\n  --ring: oklch(0.549 0.172 187.714);\n  --chart-1: oklch(0.488 0.243 264.376);\n  --chart-2: oklch(0.696 0.17 162.48);\n  --chart-3: oklch(0.769 0.188 70.08);\n  --chart-4: oklch(0.627 0.265 303.9);\n  --chart-5: oklch(0.645 0.246 16.439);\n  --sidebar: oklch(0.205 0 0);\n  --sidebar-foreground: oklch(0.985 0 0);\n  --sidebar-primary: oklch(0.488 0.243 264.376);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.269 0 0);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(1 0 0 / 10%);\n  --sidebar-ring: oklch(0.556 0 0);\n}\n\n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n  body {\n    @apply bg-background text-foreground;\n  }\n}\n\n/* Custom animations with reduced motion support */\n@keyframes float {\n  0%, 100% { transform: translateY(0px); }\n  50% { transform: translateY(-20px); }\n}\n\n@keyframes pulse-glow {\n  0%, 100% { \n    box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);\n  }\n  50% { \n    box-shadow: 0 0 30px rgba(59, 130, 246, 0.5), \n                0 0 40px rgba(59, 130, 246, 0.2);\n  }\n}\n\n@keyframes gentle-pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.8; }\n}\n\n@keyframes spin-slow {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n/* Apply animations only if user has not requested reduced motion */\n@media (prefers-reduced-motion: no-preference) {\n  .animate-float {\n    animation: float 6s ease-in-out infinite;\n  }\n\n  .animate-pulse-glow {\n    animation: pulse-glow 2s ease-in-out infinite;\n  }\n  \n  .animate-spin-slow {\n    animation: spin-slow 3s linear infinite;\n  }\n}\n\n/* Fallback for reduced motion users */\n@media (prefers-reduced-motion: reduce) {\n  .animate-float,\n  .animate-pulse-glow {\n    animation: gentle-pulse 2s ease-in-out infinite;\n  }\n  \n  .animate-spin-slow {\n    animation: none;\n  }\n}\n\n/* Custom gradient backgrounds */\n.gradient-bg {\n  background: linear-gradient(\n    135deg,\n    rgba(59, 130, 246, 0.1) 0%,\n    rgba(37, 99, 235, 0.05) 25%,\n    rgba(6, 182, 212, 0.1) 50%,\n    rgba(59, 130, 246, 0.05) 75%,\n    rgba(37, 99, 235, 0.1) 100%\n  );\n}\n\n.glass-effect {\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.dark .glass-effect {\n  background: rgba(0, 0, 0, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n/* Enhanced focus states for better accessibility */\n.focus-ring {\n  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2;\n}\n\n/* Button hover states with smooth transitions */\n.button-hover {\n  @apply transition-all duration-300 ease-in-out;\n}\n\n/* Card hover effects */\n.card-hover {\n  @apply transition-all duration-500 ease-out;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .button-hover,\n  .card-hover {\n    transition: none;\n  }\n}","size_bytes":6512},"carfin-ui/src/app/layout.tsx":{"content":"import type { Metadata } from \"next\";\nimport { Geist, Geist_Mono } from \"next/font/google\";\nimport \"./globals.css\";\n\nconst geistSans = Geist({\n  variable: \"--font-geist-sans\",\n  subsets: [\"latin\"],\n});\n\nconst geistMono = Geist_Mono({\n  variable: \"--font-geist-mono\",\n  subsets: [\"latin\"],\n});\n\nexport const metadata: Metadata = {\n  title: \"CarFin AI - ë‹¹ì‹ ë§Œì„ ìœ„í•œ AI ì°¨ëŸ‰ ì¶”ì²œ\",\n  description: \"AI ë©€í‹°ì—ì´ì „íŠ¸ê°€ ì œê³µí•˜ëŠ” ê°œì¸í™” ì°¨ëŸ‰ ì¶”ì²œ ë° ê¸ˆìœµ ìƒë‹´ ì„œë¹„ìŠ¤\",\n  keywords: \"ì°¨ëŸ‰ì¶”ì²œ, AI, ë©€í‹°ì—ì´ì „íŠ¸, ê¸ˆìœµìƒë‹´, ì¤‘ê³ ì°¨, ì‹ ì°¨\",\n};\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"ko\">\n      <body\n        className={`${geistSans.variable} ${geistMono.variable} antialiased bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen`}\n      >\n        {children}\n      </body>\n    </html>\n  );\n}","size_bytes":923},"carfin-ui/src/app/page.tsx":{"content":"\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { \n  Car, \n  Bot, \n  Calculator, \n  Sparkles, \n  ArrowRight, \n  Brain,\n  Shield,\n  Zap,\n  Users,\n  TrendingUp,\n  Heart,\n  Menu,\n  X,\n  Send,\n  Loader2,\n  CheckCircle,\n  Circle,\n  AlertCircle\n} from \"lucide-react\";\n\n// Types for chat functionality\ntype AgentStep = {\n  id: string;\n  name: string;\n  status: 'pending' | 'active' | 'completed' | 'error';\n  result?: string;\n};\n\ntype ChatMessage = {\n  role: 'user' | 'assistant' | 'system';\n  content: string;\n  timestamp: Date;\n  agentStep?: string;\n};\n\ntype ConsultationResponse = {\n  status: string;\n  timestamp: string;\n  consultation_id: string;\n  agent_response?: string;\n  ml_recommendations?: any[];\n  data_analysis?: string;\n  vehicle_recommendations?: string;\n  finance_consultation?: string;\n};\n\nexport default function HomePage() {\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n  \n  // Chat state\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [currentStep, setCurrentStep] = useState(0);\n  const [agentSteps, setAgentSteps] = useState<AgentStep[]>([\n    { id: 'data_analysis', name: 'ğŸ“Š ë°ì´í„° ë¶„ì„ ì „ë¬¸ê°€', status: 'pending' },\n    { id: 'vehicle_recommendation', name: 'ğŸš— ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€', status: 'pending' },\n    { id: 'finance_consultation', name: 'ğŸ’° ê¸ˆìœµ ìƒë‹´ ì „ë¬¸ê°€', status: 'pending' }\n  ]);\n  const [userId] = useState(() => `user_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`);\n  \n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n  \n  // Scroll to bottom when new messages arrive\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n  \n  // API ì—°ë™ í•¨ìˆ˜\n  const callConsultationAPI = async (message: string): Promise<ConsultationResponse> => {\n    const response = await fetch('http://localhost:8000/api/consultation/full', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        message: message,\n        user_id: userId,\n        include_finance: true\n      })\n    });\n    \n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    return await response.json();\n  };\n  \n  // ìƒë‹´ ì‹œì‘ í•¨ìˆ˜\n  const startConsultation = async () => {\n    if (!inputMessage.trim()) {\n      setError('ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n    \n    setIsLoading(true);\n    setError(null);\n    \n    // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€\n    const userMessage: ChatMessage = {\n      role: 'user',\n      content: inputMessage,\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    \n    // Reset agent steps\n    const resetSteps = agentSteps.map(step => ({ ...step, status: 'pending' as const }));\n    setAgentSteps(resetSteps);\n    setCurrentStep(0);\n    \n    const originalMessage = inputMessage;\n    setInputMessage('');\n    \n    try {\n      // ë‹¨ê³„ë³„ ì§„í–‰ ì‹œë®¬ë ˆì´ì…˜\n      const updateStep = (stepIndex: number, status: AgentStep['status'], result?: string) => {\n        setAgentSteps(prev => \n          prev.map((step, index) => \n            index === stepIndex ? { ...step, status, result } : step\n          )\n        );\n      };\n      \n      // 1ë‹¨ê³„: ë°ì´í„° ë¶„ì„\n      updateStep(0, 'active');\n      setCurrentStep(0);\n      \n      // API í˜¸ì¶œ\n      const response = await callConsultationAPI(originalMessage);\n      \n      if (response.status === 'error') {\n        throw new Error(response.agent_response || 'ìƒë‹´ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n      }\n      \n      // ë‹¨ê³„ë³„ ì™„ë£Œ ì²˜ë¦¬\n      updateStep(0, 'completed', 'ë°ì´í„° ë¶„ì„ ì™„ë£Œ');\n      setCurrentStep(1);\n      updateStep(1, 'active');\n      \n      await new Promise(resolve => setTimeout(resolve, 1000));\n      updateStep(1, 'completed', 'ì°¨ëŸ‰ ì¶”ì²œ ì™„ë£Œ');\n      setCurrentStep(2);\n      updateStep(2, 'active');\n      \n      await new Promise(resolve => setTimeout(resolve, 1000));\n      updateStep(2, 'completed', 'ê¸ˆìœµ ìƒë‹´ ì™„ë£Œ');\n      \n      // AI ì‘ë‹µ ë©”ì‹œì§€ ì¶”ê°€\n      const assistantMessage: ChatMessage = {\n        role: 'assistant',\n        content: response.agent_response || 'ìƒë‹´ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.',\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, assistantMessage]);\n      \n      // ì¶”ì²œ ê²°ê³¼ê°€ ìˆë‹¤ë©´ ë³„ë„ ë©”ì‹œì§€ë¡œ ì¶”ê°€\n      if (response.ml_recommendations && response.ml_recommendations.length > 0) {\n        const recommendationMessage: ChatMessage = {\n          role: 'system',\n          content: `ğŸ“‹ **ì¶”ì²œ ì°¨ëŸ‰ ëª©ë¡**\\n\\n${response.ml_recommendations.map((car: any, index: number) => \n            `${index + 1}. **${car.brand} ${car.model}**\\n   - ê°€ê²©: ${car.price?.toLocaleString() || 'N/A'}ë§Œì›\\n   - ì—°ë£Œ: ${car.fuel_type || 'N/A'}\\n   - í‰ì : ${car.rating || 'N/A'}/5\\n`\n          ).join('\\n')}`,\n          timestamp: new Date()\n        };\n        setMessages(prev => [...prev, recommendationMessage]);\n      }\n      \n    } catch (error) {\n      console.error('Consultation error:', error);\n      setError(error instanceof Error ? error.message : 'ìƒë‹´ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n      \n      // ì—ëŸ¬ ë°œìƒ ì‹œ í˜„ì¬ ë‹¨ê³„ë¥¼ ì—ëŸ¬ë¡œ í‘œì‹œ\n      setAgentSteps(prev => \n        prev.map((step, index) => \n          index === currentStep ? { ...step, status: 'error' } : step\n        )\n      );\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  // ìƒˆ ìƒë‹´ ì‹œì‘\n  const resetConsultation = () => {\n    setMessages([]);\n    setAgentSteps(prev => prev.map(step => ({ ...step, status: 'pending' })));\n    setCurrentStep(0);\n    setError(null);\n    setInputMessage('');\n  };\n  \n  // Enter í‚¤ë¡œ ë©”ì‹œì§€ ì „ì†¡\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      if (!isLoading) {\n        startConsultation();\n      }\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-teal-50\">\n      {/* Navigation */}\n      <nav className=\"fixed top-0 w-full glass-effect z-50 border-b border-white/20\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            {/* Logo */}\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-blue-600 to-teal-600 rounded-lg flex items-center justify-center\">\n                <Car className=\"w-4 h-4 sm:w-6 sm:h-6 text-white\" aria-hidden=\"true\" />\n              </div>\n              <span className=\"text-lg sm:text-2xl font-bold bg-gradient-to-r from-blue-600 to-teal-600 bg-clip-text text-transparent\">\n                CarFin AI\n              </span>\n            </div>\n            \n            {/* Desktop Navigation */}\n            <div className=\"hidden md:flex items-center space-x-4\">\n              <Badge variant=\"outline\" className=\"bg-blue-50 border-blue-200 text-blue-700\">\n                AI ë©€í‹°ì—ì´ì „íŠ¸\n              </Badge>\n              <Button variant=\"outline\" size=\"sm\" className=\"focus-ring\">\n                ë¡œê·¸ì¸\n              </Button>\n            </div>\n            \n            {/* Mobile Menu Button */}\n            <div className=\"md:hidden\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n                className=\"focus-ring\"\n                aria-expanded={isMobileMenuOpen}\n                aria-label=\"ë©”ë‰´ í† ê¸€\"\n              >\n                {isMobileMenuOpen ? (\n                  <X className=\"w-6 h-6\" aria-hidden=\"true\" />\n                ) : (\n                  <Menu className=\"w-6 h-6\" aria-hidden=\"true\" />\n                )}\n              </Button>\n            </div>\n          </div>\n          \n          {/* Mobile Navigation Menu */}\n          {isMobileMenuOpen && (\n            <div className=\"md:hidden absolute top-full left-0 w-full glass-effect border-t border-white/20\">\n              <div className=\"px-4 py-4 space-y-3\">\n                <Badge variant=\"outline\" className=\"bg-blue-50 border-blue-200 text-blue-700 w-full justify-center py-2\">\n                  AI ë©€í‹°ì—ì´ì „íŠ¸\n                </Badge>\n                <Button \n                  variant=\"outline\" \n                  className=\"w-full focus-ring\"\n                  onClick={() => setIsMobileMenuOpen(false)}\n                >\n                  ë¡œê·¸ì¸\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </nav>\n\n      {/* Hero Section */}\n      <section className=\"pt-24 pb-12 px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"text-center mb-16\">\n            <div className=\"flex justify-center mb-6\">\n              <div className=\"relative\">\n                <div className=\"w-20 h-20 bg-gradient-to-r from-blue-600 to-teal-600 rounded-2xl flex items-center justify-center animate-pulse-glow\">\n                  <Sparkles className=\"w-10 h-10 text-white animate-spin-slow\" aria-hidden=\"true\" />\n                </div>\n                <div className=\"absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center\">\n                  <Zap className=\"w-4 h-4 text-white\" aria-hidden=\"true\" />\n                </div>\n              </div>\n            </div>\n            \n            <h1 className=\"text-3xl sm:text-5xl md:text-6xl lg:text-7xl font-bold text-gray-900 mb-4 sm:mb-6 leading-tight\">\n              ë‹¹ì‹ ë§Œì„ ìœ„í•œ\n              <br />\n              <span className=\"bg-gradient-to-r from-blue-600 via-purple-600 to-teal-600 bg-clip-text text-transparent animate-pulse\">\n                AI ì°¨ëŸ‰ ì¶”ì²œ\n              </span>\n            </h1>\n            \n            <p className=\"text-lg sm:text-xl text-gray-600 mb-6 sm:mb-8 max-w-3xl mx-auto leading-relaxed px-4 sm:px-0\">\n              <strong>3ê°œì˜ ì „ë¬¸ AI ì—ì´ì „íŠ¸</strong>ê°€ í˜‘ë ¥í•˜ì—¬ ë°ì´í„° ë¶„ì„ë¶€í„° ì°¨ëŸ‰ ì¶”ì²œ, \n              <br />\n              ê¸ˆìœµ ìƒë‹´ê¹Œì§€ ì›ìŠ¤í†± ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë³µì¡í•œ ì°¨ëŸ‰ êµ¬ë§¤, ì´ì œ ì‰½ê³  ìŠ¤ë§ˆíŠ¸í•˜ê²Œ!\n            </p>\n\n            <div className=\"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center px-4 sm:px-0\">\n              <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n                <DialogTrigger asChild>\n                  <Button \n                    size=\"lg\" \n                    className=\"text-base sm:text-lg px-6 py-4 sm:px-8 sm:py-6 bg-gradient-to-r from-blue-600 to-teal-600 hover:from-blue-700 hover:to-teal-700 transform hover:scale-105 button-hover animate-pulse-glow focus-ring w-full sm:w-auto\"\n                  >\n                    <Bot className=\"w-5 h-5 sm:w-6 sm:h-6 mr-2\" aria-hidden=\"true\" />\n                    3ê°œ AI ì—ì´ì „íŠ¸ ìƒë‹´í•˜ê¸°\n                    <ArrowRight className=\"w-5 h-5 sm:w-6 sm:h-6 ml-2\" aria-hidden=\"true\" />\n                  </Button>\n                </DialogTrigger>\n                <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\n                  <DialogHeader className=\"pb-4\">\n                    <DialogTitle className=\"flex items-center gap-2 text-xl\">\n                      <Sparkles className=\"w-7 h-7 text-blue-600\" aria-hidden=\"true\" />\n                      AI ë©€í‹°ì—ì´ì „íŠ¸ ìƒë‹´\n                    </DialogTitle>\n                    <DialogDescription className=\"text-base leading-relaxed\">\n                      3ê°œì˜ ì „ë¬¸ AI ì—ì´ì „íŠ¸ê°€ í˜‘ë ¥í•˜ì—¬ ìµœì ì˜ ì°¨ëŸ‰ êµ¬ë§¤ ì†”ë£¨ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.\n                    </DialogDescription>\n                  </DialogHeader>\n                  \n                  {/* Agent Progress Steps */}\n                  <div className=\"flex justify-between items-center py-4 border-b\">\n                    {agentSteps.map((step, index) => (\n                      <div key={step.id} className=\"flex items-center flex-1\">\n                        <div className=\"flex flex-col items-center\">\n                          <div className={`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${\n                            step.status === 'completed' ? 'bg-green-500 border-green-500 text-white' :\n                            step.status === 'active' ? 'bg-blue-500 border-blue-500 text-white animate-pulse' :\n                            step.status === 'error' ? 'bg-red-500 border-red-500 text-white' :\n                            'bg-gray-100 border-gray-300 text-gray-400'\n                          }`}>\n                            {step.status === 'completed' ? (\n                              <CheckCircle className=\"w-5 h-5\" />\n                            ) : step.status === 'active' ? (\n                              <Loader2 className=\"w-5 h-5 animate-spin\" />\n                            ) : step.status === 'error' ? (\n                              <AlertCircle className=\"w-5 h-5\" />\n                            ) : (\n                              <Circle className=\"w-5 h-5\" />\n                            )}\n                          </div>\n                          <p className={`text-xs mt-2 text-center font-medium ${\n                            step.status === 'active' ? 'text-blue-600' :\n                            step.status === 'completed' ? 'text-green-600' :\n                            step.status === 'error' ? 'text-red-600' :\n                            'text-gray-500'\n                          }`}>\n                            {step.name}\n                          </p>\n                        </div>\n                        {index < agentSteps.length - 1 && (\n                          <div className={`flex-1 h-0.5 mx-4 transition-colors duration-300 ${\n                            agentSteps[index + 1].status === 'completed' || agentSteps[index + 1].status === 'active' ? 'bg-blue-500' : 'bg-gray-200'\n                          }`} />\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                  \n                  {/* Chat Messages */}\n                  <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 rounded-lg max-h-96\">\n                    {messages.length === 0 ? (\n                      <div className=\"text-center text-gray-500 py-8\">\n                        <Bot className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" />\n                        <p className=\"text-lg font-medium\">ì°¨ëŸ‰ ìƒë‹´ì„ ì‹œì‘í•´ë³´ì„¸ìš”</p>\n                        <p className=\"text-sm mt-2\">\"3000ë§Œì› ì˜ˆì‚°ìœ¼ë¡œ SUV ì¶”ì²œí•´ì£¼ì„¸ìš”\" ê°™ì€ ë©”ì‹œì§€ë¡œ ì‹œì‘í•˜ì„¸ìš”.</p>\n                      </div>\n                    ) : (\n                      messages.map((message, index) => (\n                        <div key={index} className={`flex ${\n                          message.role === 'user' ? 'justify-end' : 'justify-start'\n                        }`}>\n                          <div className={`max-w-[80%] p-3 rounded-lg whitespace-pre-line ${\n                            message.role === 'user' \n                              ? 'bg-blue-600 text-white rounded-br-none' \n                              : message.role === 'system'\n                              ? 'bg-yellow-50 border border-yellow-200 text-gray-800 rounded-bl-none'\n                              : 'bg-white border border-gray-200 text-gray-800 rounded-bl-none'\n                          }`}>\n                            {message.role === 'assistant' && (\n                              <div className=\"flex items-center gap-2 mb-2 text-sm font-medium text-blue-600\">\n                                <Bot className=\"w-4 h-4\" />\n                                AI ìƒë‹´ì‚¬\n                              </div>\n                            )}\n                            {message.role === 'system' && (\n                              <div className=\"flex items-center gap-2 mb-2 text-sm font-medium text-orange-600\">\n                                <Sparkles className=\"w-4 h-4\" />\n                                ì¶”ì²œ ê²°ê³¼\n                              </div>\n                            )}\n                            <p className=\"text-sm leading-relaxed\">{message.content}</p>\n                            <p className=\"text-xs mt-2 opacity-70\">\n                              {message.timestamp.toLocaleTimeString()}\n                            </p>\n                          </div>\n                        </div>\n                      ))\n                    )}\n                    {isLoading && (\n                      <div className=\"flex justify-start\">\n                        <div className=\"bg-white border border-gray-200 p-3 rounded-lg rounded-bl-none\">\n                          <div className=\"flex items-center gap-2 mb-2 text-sm font-medium text-blue-600\">\n                            <Bot className=\"w-4 h-4\" />\n                            AI ìƒë‹´ì‚¬\n                          </div>\n                          <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                            <Loader2 className=\"w-4 h-4 animate-spin\" />\n                            ìƒë‹´ ì¤‘ì…ë‹ˆë‹¤...\n                          </div>\n                        </div>\n                      </div>\n                    )}\n                    <div ref={messagesEndRef} />\n                  </div>\n                  \n                  {/* Error Message */}\n                  {error && (\n                    <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm\">\n                      <div className=\"flex items-center gap-2\">\n                        <AlertCircle className=\"w-4 h-4\" />\n                        {error}\n                      </div>\n                    </div>\n                  )}\n                  \n                  {/* Input Area */}\n                  <div className=\"flex gap-2 pt-4\">\n                    <Input\n                      ref={inputRef}\n                      value={inputMessage}\n                      onChange={(e) => setInputMessage(e.target.value)}\n                      onKeyDown={handleKeyPress}\n                      placeholder=\"ì°¨ëŸ‰ ìƒë‹´ ìš”ì²­ì„ ì…ë ¥í•˜ì„¸ìš”... (ì˜ˆ: '3000ë§Œì› ì˜ˆì‚°ìœ¼ë¡œ ê°€ì¡±ìš© SUV ì¶”ì²œí•´ì£¼ì„¸ìš”')\"\n                      disabled={isLoading}\n                      className=\"flex-1\"\n                    />\n                    <Button \n                      onClick={startConsultation}\n                      disabled={isLoading || !inputMessage.trim()}\n                      className=\"bg-gradient-to-r from-blue-600 to-teal-600 hover:from-blue-700 hover:to-teal-700\"\n                    >\n                      {isLoading ? (\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\n                      ) : (\n                        <Send className=\"w-4 h-4\" />\n                      )}\n                    </Button>\n                    {messages.length > 0 && (\n                      <Button \n                        onClick={resetConsultation}\n                        variant=\"outline\"\n                        disabled={isLoading}\n                      >\n                        ìƒˆ ìƒë‹´\n                      </Button>\n                    )}\n                  </div>\n                </DialogContent>\n              </Dialog>\n\n              <Button \n                size=\"lg\" \n                variant=\"outline\" \n                className=\"text-base sm:text-lg px-6 py-4 sm:px-8 sm:py-6 border-2 hover:bg-blue-50 transform hover:scale-105 button-hover focus-ring w-full sm:w-auto\"\n              >\n                <Heart className=\"w-5 h-5 sm:w-6 sm:h-6 mr-2 text-red-500\" aria-hidden=\"true\" />\n                ë°ëª¨ ì²´í—˜í•˜ê¸°\n              </Button>\n            </div>\n          </div>\n\n          {/* AI Agents Showcase - 3 Agent System */}\n          <div className=\"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 mb-12 md:mb-16 px-4 sm:px-0\">\n            {/* Data Analyst Agent - NEW */}\n            <Card className=\"group hover:shadow-2xl card-hover transform hover:-translate-y-2 glass-effect focus-ring\" tabIndex={0}>\n              <CardHeader>\n                <div className=\"flex items-center space-x-3 mb-2\">\n                  <div className=\"w-12 h-12 bg-gradient-to-r from-indigo-500 to-blue-600 rounded-xl flex items-center justify-center animate-float\">\n                    <Brain className=\"w-6 h-6 text-white\" aria-hidden=\"true\" />\n                  </div>\n                  <div>\n                    <CardTitle className=\"text-lg sm:text-xl text-gray-800\">ë°ì´í„° ë¶„ì„ ì „ë¬¸ê°€</CardTitle>\n                    <Badge className=\"mt-1 bg-indigo-100 text-indigo-700 hover:bg-indigo-200 text-xs sm:text-sm\">\n                      AI ì˜ì‚¬ê²°ì • ì§€ì›\n                    </Badge>\n                  </div>\n                </div>\n                <CardDescription className=\"text-gray-600\">\n                  ì‹œì¥ ë°ì´í„°ì™€ ê°œì¸ í”„ë¡œí•„ì„ ì¢…í•© ë¶„ì„í•˜ì—¬ ì¸ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center space-x-2\">\n                    <TrendingUp className=\"w-5 h-5 text-indigo-600\" aria-hidden=\"true\" />\n                    <span className=\"text-sm text-gray-700\">ì‹œì¥ íŠ¸ë Œë“œ ë¶„ì„</span>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Users className=\"w-5 h-5 text-blue-600\" aria-hidden=\"true\" />\n                    <span className=\"text-sm text-gray-700\">ê°œì¸ í”„ë¡œí•„ ìµœì í™”</span>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Shield className=\"w-5 h-5 text-purple-600\" aria-hidden=\"true\" />\n                    <span className=\"text-sm text-gray-700\">ë°ì´í„° ê¸°ë°˜ ì˜ì‚¬ê²°ì •</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Vehicle Recommendation Agent */}\n            <Card className=\"group hover:shadow-2xl card-hover transform hover:-translate-y-2 glass-effect focus-ring\" tabIndex={0}>\n              <CardHeader>\n                <div className=\"flex items-center space-x-3 mb-2\">\n                  <div className=\"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center animate-float\" style={{ animationDelay: '0.5s' }}>\n                    <Bot className=\"w-6 h-6 text-white\" aria-hidden=\"true\" />\n                  </div>\n                  <div>\n                    <CardTitle className=\"text-lg sm:text-xl text-gray-800\">ì°¨ëŸ‰ ì¶”ì²œ ì „ë¬¸ê°€</CardTitle>\n                    <Badge className=\"mt-1 bg-blue-100 text-blue-700 hover:bg-blue-200 text-xs sm:text-sm\">\n                      PyCaret + Gemini AI\n                    </Badge>\n                  </div>\n                </div>\n                <CardDescription className=\"text-gray-600\">\n                  ML ì—”ì§„ê³¼ AIê°€ í˜‘ë ¥í•˜ì—¬ ìµœì ì˜ ì°¨ëŸ‰ì„ ì¶”ì²œí•©ë‹ˆë‹¤\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Sparkles className=\"w-5 h-5 text-blue-600\" aria-hidden=\"true\" />\n                    <span className=\"text-sm text-gray-700\">í˜‘ì—… í•„í„°ë§ ì¶”ì²œ</span>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <TrendingUp className=\"w-5 h-5 text-green-600\" aria-hidden=\"true\" />\n                    <span className=\"text-sm text-gray-700\">ì‹¤ì‹œê°„ ì‹œì¥ ë°ì´í„°</span>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Shield className=\"w-5 h-5 text-purple-600\" aria-hidden=\"true\" />\n                    <span className=\"text-sm text-gray-700\">ê²€ì¦ëœ ì°¨ëŸ‰ íë ˆì´ì…˜</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Finance Consultation Agent */}\n            <Card className=\"group hover:shadow-2xl card-hover transform hover:-translate-y-2 glass-effect focus-ring\" tabIndex={0}>\n              <CardHeader>\n                <div className=\"flex items-center space-x-3 mb-2\">\n                  <div className=\"w-12 h-12 bg-gradient-to-r from-teal-500 to-green-600 rounded-xl flex items-center justify-center animate-float\" style={{ animationDelay: '1s' }}>\n                    <Calculator className=\"w-6 h-6 text-white\" aria-hidden=\"true\" />\n                  </div>\n                  <div>\n                    <CardTitle className=\"text-lg sm:text-xl text-gray-800\">ê¸ˆìœµ ìƒë‹´ ì „ë¬¸ê°€</CardTitle>\n                    <Badge className=\"mt-1 bg-teal-100 text-teal-700 hover:bg-teal-200 text-xs sm:text-sm\">\n                      ì‹¤ì‹œê°„ ê¸ˆë¦¬ ì—°ë™\n                    </Badge>\n                  </div>\n                </div>\n                <CardDescription className=\"text-gray-600\">\n                  ëŒ€ì¶œ, ë¦¬ìŠ¤, í• ë¶€ ë“± ìµœì ì˜ ê¸ˆìœµ ì˜µì…˜ì„ ê³„ì‚°í•©ë‹ˆë‹¤\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Calculator className=\"w-5 h-5 text-teal-600\" aria-hidden=\"true\" />\n                    <span className=\"text-sm text-gray-700\">ì›” ë‚©ë¶€ì•¡ ì •í™•í•œ ê³„ì‚°</span>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <TrendingUp className=\"w-5 h-5 text-green-600\" aria-hidden=\"true\" />\n                    <span className=\"text-sm text-gray-700\">ëŒ€ì¶œ/ë¦¬ìŠ¤ ë¹„êµ ë¶„ì„</span>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Users className=\"w-5 h-5 text-orange-600\" aria-hidden=\"true\" />\n                    <span className=\"text-sm text-gray-700\">ê°œì¸ ì‹ ìš©ë„ ë§ì¶¤ ì¶”ì²œ</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Features Grid */}\n          <div className=\"grid sm:grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-12 md:mb-16 px-4 sm:px-0\">\n            {[\n              {\n                icon: <Sparkles className=\"w-8 h-8 text-yellow-500\" />,\n                title: \"AI ê¸°ë°˜ ê°œì¸í™”\",\n                description: \"ë‹¹ì‹ ë§Œì˜ ë¼ì´í”„ìŠ¤íƒ€ì¼ì— ì™„ë²½í•˜ê²Œ ë§ëŠ” ì°¨ëŸ‰ì„ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤\"\n              },\n              {\n                icon: <Shield className=\"w-8 h-8 text-green-500\" />,\n                title: \"ê²€ì¦ëœ ë°ì´í„°\",\n                description: \"ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì°¨ëŸ‰ ì •ë³´ì™€ ê¸ˆìœµ ë°ì´í„°ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤\"\n              },\n              {\n                icon: <Zap className=\"w-8 h-8 text-blue-500\" />,\n                title: \"ë¹ ë¥¸ ì˜ì‚¬ê²°ì •\",\n                description: \"ë³µì¡í•œ ì°¨ëŸ‰ êµ¬ë§¤ ê³¼ì •ì„ ë‹¨ ëª‡ ë¶„ ë§Œì— í•´ê²°í•©ë‹ˆë‹¤\"\n              }\n            ].map((feature, index) => (\n              <Card key={index} className=\"text-center group hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 card-hover focus-ring\" tabIndex={0}>\n                <CardContent className=\"pt-4 sm:pt-6\">\n                  <div className=\"flex justify-center mb-3 sm:mb-4\">\n                    <div className=\"p-2 sm:p-3 bg-gray-50 rounded-2xl group-hover:scale-110 transition-transform duration-300\">\n                      {feature.icon}\n                    </div>\n                  </div>\n                  <h3 className=\"text-base sm:text-lg font-semibold text-gray-800 mb-2\">{feature.title}</h3>\n                  <p className=\"text-gray-600 text-xs sm:text-sm leading-relaxed\">{feature.description}</p>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Footer */}\n      <footer className=\"bg-gradient-to-r from-gray-900 to-gray-800 text-white py-8 sm:py-12\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex flex-col md:flex-row justify-between items-center gap-4\">\n            <div className=\"flex items-center space-x-3 mb-2 md:mb-0\">\n              <div className=\"w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-600 to-teal-600 rounded-lg flex items-center justify-center\">\n                <Car className=\"w-4 h-4 sm:w-5 sm:h-5 text-white\" aria-hidden=\"true\" />\n              </div>\n              <span className=\"text-lg sm:text-xl font-bold\">CarFin AI</span>\n            </div>\n            <div className=\"text-center md:text-right\">\n              <p className=\"text-gray-300 text-xs sm:text-sm leading-relaxed\">\n                AI ë©€í‹°ì—ì´ì „íŠ¸ ê¸°ë°˜ ì°¨ëŸ‰ ì¶”ì²œ ë° ê¸ˆìœµ ìƒë‹´ ì„œë¹„ìŠ¤\n              </p>\n              <p className=\"text-gray-400 text-xs mt-1\">\n                CrewAI Ã— PyCaret Ã— OpenAI GPT-5 ê¸°ìˆ ë¡œ êµ¬ë™ë©ë‹ˆë‹¤\n              </p>\n            </div>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}","size_bytes":30054},"carfin-ui/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        \"relative flex size-8 shrink-0 overflow-hidden rounded-full\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn(\"aspect-square size-full\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        \"bg-muted flex size-full items-center justify-center rounded-full\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1097},"carfin-ui/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1631},"carfin-ui/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n","size_bytes":2123},"carfin-ui/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1989},"carfin-ui/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n","size_bytes":3982},"carfin-ui/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n","size_bytes":967},"carfin-ui/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = \"default\",\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: \"sm\" | \"default\"\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = \"popper\",\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md\",\n          position === \"popper\" &&\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n          className\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            \"p-1\",\n            position === \"popper\" &&\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\"\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn(\"text-muted-foreground px-2 py-1.5 text-xs\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n","size_bytes":6253},"carfin-ui/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        \"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n","size_bytes":759},"carfin-ui/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"file_server.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nSimple file download server for CarFin Python files\n\"\"\"\nimport os\nfrom http.server import HTTPServer, SimpleHTTPRequestHandler\nimport webbrowser\n\nclass FileDownloadHandler(SimpleHTTPRequestHandler):\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, directory=\".\", **kwargs)\n\nif __name__ == \"__main__\":\n    port = 8080\n    print(f\"ğŸš€ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„œë²„ ì‹œì‘: http://localhost:{port}\")\n    print(\"ğŸ“ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥í•œ íŒŒì¼ë“¤:\")\n    print(\"   - CarFin_Python_Complete.tar.gz\")\n    print(\"   - CarFin_Python_Files/ (í´ë”)\")\n    \n    with HTTPServer((\"\", port), FileDownloadHandler) as httpd:\n        print(f\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port} ì ‘ì†í•˜ì„¸ìš”!\")\n        httpd.serve_forever()","size_bytes":769},"agents/llm_provider.py":{"content":"\"\"\"\nLLM Provider abstraction with OpenAI and Gemini fallback support\nIMPORTANT: Using blueprint:python_gemini integration\n\"\"\"\nimport os\nimport logging\nimport json\nfrom typing import Dict, Any, Optional, List\nfrom enum import Enum\nfrom pydantic import BaseModel\n\n# OpenAI imports\nfrom openai import OpenAI\n\n# Gemini imports from blueprint:python_gemini\nfrom google import genai\nfrom google.genai import types\n\nlogger = logging.getLogger(__name__)\n\nclass LLMProvider(str, Enum):\n    GPT4O = \"gpt-4o\"\n    GPT4 = \"gpt-4\"\n    GEMINI_PRO = \"gemini-2.5-pro\"\n    GEMINI_FLASH = \"gemini-2.5-flash\"\n\nclass LLMResponse(BaseModel):\n    content: str\n    provider: str\n    model: str\n    success: bool\n    error: Optional[str] = None\n\nclass MultiLLMClient:\n    \"\"\"Multi-provider LLM client with automatic fallback\"\"\"\n    \n    def __init__(self):\n        self.openai_client = None\n        self.gemini_client = None\n        self.setup_clients()\n        \n    def setup_clients(self):\n        \"\"\"Initialize OpenAI and Gemini clients\"\"\"\n        try:\n            # Setup OpenAI\n            openai_key = os.getenv(\"OPENAI_API_KEY\")\n            if openai_key:\n                self.openai_client = OpenAI(api_key=openai_key)\n                logger.info(\"OpenAI client initialized\")\n            else:\n                logger.warning(\"OPENAI_API_KEY not found\")\n                \n            # Setup Gemini (using blueprint:python_gemini)\n            gemini_key = os.getenv(\"GEMINI_API_KEY\")\n            if gemini_key:\n                self.gemini_client = genai.Client(api_key=gemini_key)\n                logger.info(\"Gemini client initialized\")\n            else:\n                logger.warning(\"GEMINI_API_KEY not found\")\n                \n        except Exception as e:\n            logger.error(f\"Failed to initialize LLM clients: {e}\")\n    \n    def chat(\n        self,\n        messages: List[Dict[str, str]],\n        providers: Optional[List[LLMProvider]] = None,\n        response_format: Optional[str] = None,\n        max_tokens: int = 4000,\n        temperature: float = 0.7\n    ) -> LLMResponse:\n        \"\"\"\n        Chat with LLM using provider fallback strategy\n        \n        Args:\n            messages: List of {\"role\": \"user/assistant/system\", \"content\": str}\n            providers: Ordered list of providers to try (default: GPT-4O -> Gemini Pro)\n            response_format: \"json\" for structured output\n            max_tokens: Maximum response tokens\n            temperature: Response creativity (0.0-1.0)\n        \"\"\"\n        if providers is None:\n            providers = [LLMProvider.GPT4O, LLMProvider.GEMINI_PRO]\n            \n        last_error = None\n        \n        for provider in providers:\n            try:\n                if provider in [LLMProvider.GPT4O, LLMProvider.GPT4]:\n                    response = self._chat_openai(\n                        messages, provider, response_format, max_tokens, temperature\n                    )\n                elif provider in [LLMProvider.GEMINI_PRO, LLMProvider.GEMINI_FLASH]:\n                    response = self._chat_gemini(\n                        messages, provider, response_format, max_tokens, temperature\n                    )\n                else:\n                    continue\n                    \n                if response.success:\n                    logger.info(f\"Successful response from {provider}\")\n                    return response\n                    \n            except Exception as e:\n                last_error = str(e)\n                logger.warning(f\"Provider {provider} failed: {e}\")\n                continue\n        \n        # All providers failed\n        return LLMResponse(\n            content=\"\",\n            provider=\"failed\",\n            model=\"none\",\n            success=False,\n            error=f\"All LLM providers failed. Last error: {last_error}\"\n        )\n    \n    def _chat_openai(\n        self, \n        messages: List[Dict[str, str]], \n        provider: LLMProvider,\n        response_format: Optional[str],\n        max_tokens: int,\n        temperature: float\n    ) -> LLMResponse:\n        \"\"\"Chat with OpenAI\"\"\"\n        if not self.openai_client:\n            raise Exception(\"OpenAI client not initialized\")\n            \n        model_map = {\n            LLMProvider.GPT4O: \"gpt-4o\",\n            LLMProvider.GPT4: \"gpt-4\"\n        }\n        \n        model = model_map.get(provider, \"gpt-4o\")\n        \n        kwargs = {\n            \"model\": model,\n            \"messages\": messages,\n            \"max_tokens\": max_tokens,\n            \"temperature\": temperature\n        }\n        \n        if response_format == \"json\":\n            kwargs[\"response_format\"] = {\"type\": \"json_object\"}\n        \n        response = self.openai_client.chat.completions.create(**kwargs)\n        \n        return LLMResponse(\n            content=response.choices[0].message.content or \"\",\n            provider=\"openai\",\n            model=model,\n            success=True\n        )\n    \n    def _chat_gemini(\n        self,\n        messages: List[Dict[str, str]],\n        provider: LLMProvider,\n        response_format: Optional[str],\n        max_tokens: int,\n        temperature: float\n    ) -> LLMResponse:\n        \"\"\"Chat with Gemini using blueprint:python_gemini pattern\"\"\"\n        if not self.gemini_client:\n            raise Exception(\"Gemini client not initialized\")\n            \n        model_map = {\n            LLMProvider.GEMINI_PRO: \"gemini-2.5-pro\",\n            LLMProvider.GEMINI_FLASH: \"gemini-2.5-flash\"\n        }\n        \n        model = model_map.get(provider, \"gemini-2.5-pro\")\n        \n        # Convert messages to Gemini format\n        system_instruction = None\n        user_messages = []\n        \n        for msg in messages:\n            if msg[\"role\"] == \"system\":\n                system_instruction = msg[\"content\"]\n            elif msg[\"role\"] in [\"user\", \"assistant\"]:\n                user_messages.append(\n                    types.Content(\n                        role=msg[\"role\"], \n                        parts=[types.Part(text=msg[\"content\"])]\n                    )\n                )\n        \n        # Build config\n        config_kwargs = {}\n        if system_instruction:\n            config_kwargs[\"system_instruction\"] = system_instruction\n        if response_format == \"json\":\n            config_kwargs[\"response_mime_type\"] = \"application/json\"\n            \n        config = types.GenerateContentConfig(**config_kwargs)\n        \n        # Generate content\n        if user_messages:\n            contents = user_messages\n        else:\n            # Fallback to simple text prompt\n            prompt = \" \".join([msg[\"content\"] for msg in messages if msg[\"role\"] == \"user\"])\n            contents = prompt\n        \n        response = self.gemini_client.models.generate_content(\n            model=model,\n            contents=contents,\n            config=config\n        )\n        \n        content = response.text or \"\"\n        \n        return LLMResponse(\n            content=content,\n            provider=\"gemini\",\n            model=model,\n            success=True\n        )\n\n# Global instance for use across the application\nllm_client = MultiLLMClient()\n\ndef get_llm_response(\n    messages: List[Dict[str, str]],\n    providers: Optional[List[LLMProvider]] = None,\n    **kwargs\n) -> LLMResponse:\n    \"\"\"Convenience function for getting LLM responses\"\"\"\n    return llm_client.chat(messages, providers, **kwargs)","size_bytes":7386},"carfin-ui/next-env.d.ts":{"content":"/// <reference types=\"next\" />\n/// <reference types=\"next/image-types/global\" />\n/// <reference path=\"./.next/types/routes.d.ts\" />\n\n// NOTE: This file should not be edited\n// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.\n","size_bytes":262}},"version":1}